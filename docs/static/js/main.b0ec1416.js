/*! For license information please see main.b0ec1416.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||b(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===y)},t.typeOf=b},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case x:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Se=null;function xe(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Ce(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==Ee||null!==Se)&&(Ne(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Et,St,xt,Ct=!1,Tt=[],It=null,Nt=null,Pt=null,Rt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Pt&&jt(Pt)&&(Pt=null),Rt.forEach(Ut),At.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Bt=_.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},hn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Sn}var Cn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Rn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Sr={};function xr(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=xr("animationend"),Tr=xr("animationiteration"),Ir=xr("animationstart"),Nr=xr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),u(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=yn;break;case Nr:u=Pn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&l.push(Hr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==c?s:_i(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Wn(s))if(Xn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(y=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],Ei=-1;function Si(e){return{current:e}}function xi(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Ci(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ni=Si(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){xi(Ni),xi(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ii),Ci(Ii,e)):xi(Ni),Ci(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){Bi[Wi++]=Ki,Bi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Bi[--Wi],Bi[Wi]=null,Ki=Bi[--Wi],Bi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,_a=null;function ba(){_a=ka=ga=null}function wa(e){var t=ya.current;xi(ya),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Ai(t)?Pi:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Ai(t)?Pi:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),ia&&Ji(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Ji(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Za),Ci(Za,t)}function io(){xi(Za),xi(eo),xi(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(xi(Za),xi(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,_o=0,bo=0;function wo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function xo(){var e=0!==_o;return _o=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Fu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Ao(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Pu)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ho(e,t){return qo(4,2,e,t)}function Ko(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:xa,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:xa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pu)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Pu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:xa,useCallback:Yo,useContext:xa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:xa,useCallback:Yo,useContext:xa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Po,useRef:Vo,useState:function(){return Po(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Po(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function bs(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=xo(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Du,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Du,Ou),Ou|=r;return bs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ai(n)?Pi:Ii.current;return a=Ri(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=xo(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ws(e,t),Ba(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=xa(c):c=Ri(t,c=Ai(n)?Pi:Ii.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Pa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Pa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Pa||qa(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=xa(u):u=Ri(t,u=Ai(n)?Pi:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Pa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Pa||qa(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var As,Os,Ds,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Pu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Gs(t),null;case 3:return r=t.stateNode,io(),xi(Ni),xi(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Os(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(xi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Os(e,t),null===e&&qr(t.stateNode.containerInfo),Gs(t),null;case 10:return wa(t.type._context),Gs(t),null;case 19:if(xi(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Xe()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $s(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ni),xi(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=hu,i=fu;hu=null,du(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,du(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,fu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){xc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){xc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){xc(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xc(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Xe())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,mu(t,e),Xs=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){xc(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Zs=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){xc(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,_u(e,t,n)}function _u(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Eu(i):null!==u?(u.return=o,Zs=u):Eu(i);for(;null!==a;)Zs=a,_u(a,t,n),a=a.sibling;Zs=i,Ys=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):bu(e)}}function bu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){xc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{au(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Su,xu=Math.ceil,Cu=_.ReactCurrentDispatcher,Tu=_.ReactCurrentOwner,Iu=_.ReactCurrentBatchConfig,Nu=0,Pu=null,Ru=null,Au=0,Ou=0,Du=Si(0),Lu=0,Mu=null,Fu=0,ju=0,Uu=0,Vu=null,zu=null,qu=0,Bu=1/0,Wu=null,Hu=!1,Ku=null,Gu=null,Qu=!1,$u=null,Yu=0,Xu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Au?Au&-Au:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));yt(e,n,r),0!==(2&Nu)&&e===Pu||(e===Pu&&(0===(2&Nu)&&(ju|=n),4===Lu&&uc(e,Au)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(Bu=Xe()+500,Ui&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Pu?Au:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&qi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ft(e,e===Pu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Pu===e&&Au===t||(Wu=null,Bu=Xe()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}ba(),Cu.current=o,Nu=i,null!==Ru?t=0:(Pu=null,Au=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,zu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zu,Wu),t);break}wc(e,zu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zu,Wu),r);break}wc(e,zu,Wu);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));Ec();var t=ft(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zu,Wu),ic(e,Xe()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(Bu=Xe()+500,Ui&&qi())}}function hc(e){null!==$u&&0===$u.tag&&0===(6&Nu)&&Ec();var t=Nu;Nu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Nu=t))&&qi()}}function fc(){Ou=Du.current,xi(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),xi(Ni),xi(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(so);break;case 10:wa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Pu=e,Ru=e=Dc(e.current,null),Au=Ou=t,Lu=0,Mu=null,Uu=ju=Fu=0,zu=Vu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(ba(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,_o=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Au,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Pu||0===(268435455&Fu)&&0===(268435455&ju)||uc(Pu,Au)}function yc(e,t){var n=Nu;Nu|=2;var r=vc();for(Pu===e&&Au===t||(Wu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Nu=n,Cu.current=r,null!==Ru)throw Error(a(261));return Pu=null,Au=0,Lu}function gc(){for(;null!==Ru;)_c(Ru)}function kc(){for(;null!==Ru&&!$e();)_c(Ru)}function _c(e){var t=Su(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?bc(e):Ru=t,Tu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ou)))return void(Ru=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function wc(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==$u);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Pu&&(Ru=Pu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Pc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(b){xc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Ye(),Nu=u,kt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,$u=e,Yu=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!==(1&Yu)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,qi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function Ec(){if(null!==$u){var e=_t(Yu),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Yu=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(ou(h),h===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var _=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Zs=_;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(w){xc(u,u.return,w)}if(u===s){Zs=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,Zs=b;break e}Zs=u.return}}if(Nu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function xc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Au&n)===n&&(4===Lu||3===Lu&&(130023424&Au)===Au&&500>Xe()-qu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Pc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case S:s=8,i|=8;break;case x:return(e=Ac(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Ac(19,n,t,i)).elementType=P,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Hs(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=xa(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Es(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ws(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),Ba(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Nu)&&(Bu=Xe()+500,qi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return kt},xt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,bi,Ce,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case f:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=k.prototype=new g;_.constructor=k,v(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,_(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(b,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,x=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function P(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?E():(S=!1,x=null)}}else S=!1}if("function"===typeof k)E=function(){k(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,E=function(){A.postMessage(null)}}else E=function(){y(P,0)};function O(e){x=e,S||(S=!0,E())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,D(b,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,h[0],h[1]);return u((function(){f.hasValue=!0,f.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e=n(250),t=n(248),r=n(327),i=n(164);var a=function(e){e()},o=function(){return a};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(791),h=n.t(l,2),f=Symbol.for("react-redux-context-".concat(l.version)),d=globalThis;var p=new Proxy({},new Proxy({},{get:function(e,t){var n=function(){var e=d[f];return e||(e=(0,l.createContext)(null),d[f]=e),e}();return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return Reflect[t].apply(Reflect,[n].concat(i))}}}));function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(){return(0,l.useContext)(e)}}var m=v(),y=function(){throw new Error("uSES not initialized!")},g=function(e,t){return e===t};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=e===p?m:v(e);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="function"===typeof n?{equalityFn:n}:n,i=r.equalityFn,a=void 0===i?g:i,o=r.stabilityCheck,s=void 0===o?void 0:o;r.noopCheck;var u=t(),h=u.store,f=u.subscription,d=u.getServerState,p=u.stabilityCheck,v=(u.noopCheck,(0,l.useRef)(!0),(0,l.useCallback)(c({},e.name,(function(t){return e(t)}))[e.name],[e,p,s])),m=y(f.addNestedSub,h.getState,d||h.getState,v,a);return(0,l.useDebugValue)(m),m}}var _=k();n(110),n(900);var b={notify:function(){},get:function(){return[]}};function w(e,t){var n,r=b;function i(){s.onStateChange&&s.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=o(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var s={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=b)},getListeners:function(){return r}};return s}var E=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?l.useLayoutEffect:l.useEffect;var S=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,a=e.stabilityCheck,o=void 0===a?"once":a,s=e.noopCheck,u=void 0===s?"once":s,c=(0,l.useMemo)((function(){var e=w(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0,stabilityCheck:o,noopCheck:u}}),[t,i,o,u]),h=(0,l.useMemo)((function(){return t.getState()}),[t]);E((function(){var e=c.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),h!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,h]);var f=n||p;return l.createElement(f.Provider,{value:c},r)};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=e===p?m:v(e);return function(){return t().store}}var C=x();function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=e===p?C:x(e);return function(){return t().dispatch}}var I,N=T();function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}!function(e){y=e}(r.useSyncExternalStoreWithSelector),function(e){e}(t.useSyncExternalStore),I=i.unstable_batchedUpdates,a=I;var O="function"===typeof Symbol&&Symbol.observable||"@@observable",D=function(){return Math.random().toString(36).substring(7).split("").join(".")},L={INIT:"@@redux/INIT"+D(),REPLACE:"@@redux/REPLACE"+D(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+D()}};function M(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function F(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(A(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(A(1));return n(F)(e,t)}if("function"!==typeof e)throw new Error(A(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(A(3));return a}function h(e){if("function"!==typeof e)throw new Error(A(4));if(u)throw new Error(A(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(A(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!M(e))throw new Error(A(7));if("undefined"===typeof e.type)throw new Error(A(8));if(u)throw new Error(A(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:L.INIT}),(r={dispatch:f,subscribe:h,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(A(10));i=e,f({type:L.REPLACE})}})[O]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(A(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[O]=function(){return this},e},r}function j(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:L.INIT}))throw new Error(A(12));if("undefined"===typeof n(void 0,{type:L.PROBE_UNKNOWN_ACTION()}))throw new Error(A(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],h=c(l,t);if("undefined"===typeof h){t&&t.type;throw new Error(A(14))}i[u]=h,r=r||h!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(A(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=U.apply(void 0,a)(n.dispatch),R(R({},n),{},{dispatch:r})}}}function z(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q(e){return!!e&&!!e[Re]}function B(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ae}(e)||Array.isArray(e)||!!e[Pe]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Pe])||Y(e)||X(e))}function W(e,t,n){void 0===n&&(n=!1),0===H(e)?(n?Object.keys:Oe)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function H(e){var t=e[Re];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Y(e)?2:X(e)?3:0}function K(e,t){return 2===H(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return 2===H(e)?e.get(t):e[t]}function Q(e,t,n){var r=H(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function $(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Y(e){return Ce&&e instanceof Map}function X(e){return Te&&e instanceof Set}function J(e){return e.o||e.t}function Z(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=De(e);delete t[Re];for(var n=Oe(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ee(e,t){return void 0===t&&(t=!1),ne(e)||q(e)||!B(e)||(H(e)>1&&(e.set=e.add=e.clear=e.delete=te),Object.freeze(e),t&&W(e,(function(e,t){return ee(t,!0)}),!0)),e}function te(){z(2)}function ne(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function re(e){var t=Le[e];return t||z(18,e),t}function ie(e,t){Le[e]||(Le[e]=t)}function ae(){return Se}function oe(e,t){t&&(re("Patches"),e.u=[],e.s=[],e.v=t)}function se(e){ue(e),e.p.forEach(le),e.p=null}function ue(e){e===Se&&(Se=e.l)}function ce(e){return Se={p:[],l:Se,h:e,m:!0,_:0}}function le(e){var t=e[Re];0===t.i||1===t.i?t.j():t.g=!0}function he(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||re("ES5").S(t,e,r),r?(n[Re].P&&(se(t),z(4)),B(e)&&(e=fe(t,e),t.l||pe(t,e)),t.u&&re("Patches").M(n[Re].t,e,t.u,t.s)):e=fe(t,n,[]),se(t),t.u&&t.v(t.u,t.s),e!==Ne?e:void 0}function fe(e,t,n){if(ne(t))return t;var r=t[Re];if(!r)return W(t,(function(i,a){return de(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return pe(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Z(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),W(a,(function(t,a){return de(e,r,i,t,a,n,o)})),pe(e,i,!1),n&&e.u&&re("Patches").N(r,n,e.u,e.s)}return r.o}function de(e,t,n,r,i,a,o){if(q(i)){var s=fe(e,i,a&&t&&3!==t.i&&!K(t.R,r)?a.concat(r):void 0);if(Q(n,r,s),!q(s))return;e.m=!1}else o&&n.add(i);if(B(i)&&!ne(i)){if(!e.h.D&&e._<1)return;fe(e,i),t&&t.A.l||pe(e,i)}}function pe(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&ee(t,n)}function ve(e,t){var n=e[Re];return(n?J(n):e)[t]}function me(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ye(e){e.P||(e.P=!0,e.l&&ye(e.l))}function ge(e){e.o||(e.o=Z(e.t))}function ke(e,t,n){var r=Y(t)?re("MapSet").F(t,n):X(t)?re("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:ae(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Me;n&&(i=[r],a=Fe);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):re("ES5").J(t,n);return(n?n.A:ae()).p.push(r),r}function _e(e){return q(e)||z(22,e),function e(t){if(!B(t))return t;var n,r=t[Re],i=H(t);if(r){if(!r.P&&(r.i<4||!re("ES5").K(r)))return r.t;r.I=!0,n=be(t,i),r.I=!1}else n=be(t,i);return W(n,(function(t,i){r&&G(r.t,t)===i||Q(n,t,e(i))})),3===i?new Set(n):n}(e)}function be(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Z(e)}function we(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Re];return Me.get(t,e)},set:function(t){var n=this[Re];Me.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Re];if(!i.P)switch(i.i){case 5:r(i)&&ye(i);break;case 4:n(i)&&ye(i)}}}function n(e){for(var t=e.t,n=e.k,r=Oe(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Re){var o=t[a];if(void 0===o&&!K(t,a))return!0;var s=n[a],u=s&&s[Re];if(u?u.t!==o:!$(s,o))return!0}}var c=!!t[Re];return r.length!==Oe(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};ie("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=De(n);delete a[Re];for(var o=Oe(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:ae(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Re,{value:a,writable:!0}),i},S:function(e,n,i){i?q(n)&&n[Re].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Re];if(n){var i=n.t,a=n.k,o=n.R,s=n.i;if(4===s)W(a,(function(t){t!==Re&&(void 0!==i[t]||K(i,t)?o[t]||e(a[t]):(o[t]=!0,ye(n)))})),W(i,(function(e){void 0!==a[e]||K(a,e)||(o[e]=!1,ye(n))}));else if(5===s){if(r(n)&&(ye(n),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),h=0;h<l;h++)a.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(a[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var Ee,Se,xe="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ce="undefined"!=typeof Map,Te="undefined"!=typeof Set,Ie="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ne=xe?Symbol.for("immer-nothing"):((Ee={})["immer-nothing"]=!0,Ee),Pe=xe?Symbol.for("immer-draftable"):"__$immer_draftable",Re=xe?Symbol.for("immer-state"):"__$immer_state",Ae=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Oe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,De=Object.getOwnPropertyDescriptors||function(e){var t={};return Oe(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Le={},Me={get:function(e,t){if(t===Re)return e;var n=J(e);if(!K(n,t))return function(e,t,n){var r,i=me(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!B(r)?r:r===ve(e.t,t)?(ge(e),e.o[t]=ke(e.A.h,r,e)):r},has:function(e,t){return t in J(e)},ownKeys:function(e){return Reflect.ownKeys(J(e))},set:function(e,t,n){var r=me(J(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ve(J(e),t),a=null==i?void 0:i[Re];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if($(n,i)&&(void 0!==n||K(e.t,t)))return!0;ge(e),ye(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ve(e.t,t)||t in e.t?(e.R[t]=!1,ge(e),ye(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=J(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){z(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){z(12)}},Fe={};W(Me,(function(e,t){Fe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Fe.deleteProperty=function(e,t){return Fe.set.call(this,e,t,void 0)},Fe.set=function(e,t,n){return Me.set.call(this,e[0],t,n,e[0])};var je=function(){function e(e){var t=this;this.O=Ie,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&z(6),void 0!==r&&"function"!=typeof r&&z(7),B(e)){var s=ce(t),u=ke(t,e,void 0),c=!0;try{o=n(u),c=!1}finally{c?se(s):ue(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return oe(s,r),he(e,s)}),(function(e){throw se(s),e})):(oe(s,r),he(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Ne&&(o=void 0),t.D&&ee(o,!0),r){var l=[],h=[];re("Patches").M(e,o,l,h),r(l,h)}return o}z(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){B(e)||z(8),q(e)&&(e=_e(e));var t=ce(this),n=ke(this,e,void 0);return n[Re].C=!0,ue(t),n},t.finishDraft=function(e,t){var n=(e&&e[Re]).A;return oe(n,t),he(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Ie&&z(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=re("Patches").$;return q(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ue=new je,Ve=Ue.produce,ze=(Ue.produceWithPatches.bind(Ue),Ue.setAutoFreeze.bind(Ue),Ue.setUseProxies.bind(Ue),Ue.applyPatches.bind(Ue),Ue.createDraft.bind(Ue),Ue.finishDraft.bind(Ue),Ve);function qe(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Be=qe();Be.withExtraArgument=qe;var We=Be,He=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ge=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Qe=Object.defineProperty,$e=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,et=function(e,t,n){return t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},tt=function(e,t){for(var n in t||(t={}))Je.call(t,n)&&et(e,n,t[n]);if(Xe)for(var r=0,i=Xe(t);r<i.length;r++){n=i[r];Ze.call(t,n)&&et(e,n,t[n])}return e},nt=function(e,t){return $e(e,Ye(t))},rt=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(t){i(t)}},o=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},it="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?U:U.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function at(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var ot=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return He(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Ge([void 0],e[0].concat(this)))):new(t.bind.apply(t,Ge([void 0],e.concat(this))))},t}(Array),st=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return He(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Ge([void 0],e[0].concat(this)))):new(t.bind.apply(t,Ge([void 0],e.concat(this))))},t}(Array);function ut(e){return B(e)?ze(e,(function(){})):e}function ct(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new ot);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(We.withExtraArgument(n.extraArgument)):r.push(We));0;return r}(e)}}function lt(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return tt(tt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ht(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function ft(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ut(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},u={};function c(){var t="function"===typeof e.extraReducers?ht(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,u=t[2],c=void 0===u?void 0:u,l=tt(tt({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ht(t):[t,n,r],o=a[0],s=a[1],u=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ut(e())};else{var c=ut(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=Ge([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(q(e))return void 0===(r=n(e,t))?e:r;if(B(e))return ze(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[c]=n,u[e]=r?lt(c,r):lt(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:u,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var dt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},pt=["name","message","stack","code"],vt=function(e,t){this.payload=e,this.meta=t},mt=function(e,t){this.payload=e,this.meta=t},yt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=pt;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},gt=function(){function e(e,t,n){var r=lt(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:nt(tt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=lt(e+"/pending",(function(e,t,n){return{payload:void 0,meta:nt(tt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=lt(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||yt)(e||"Rejected"),meta:nt(tt({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,u,c){var l,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):dt(),f=new o;function d(e){l=e,f.abort()}var p=function(){return rt(this,null,(function(){var o,p,v,m,y,g;return Ke(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:u,extra:c}),null===(_=m)||"object"!==typeof _||"function"!==typeof _.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),s(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:u,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:s,getState:u,extra:c,requestId:h,signal:f.signal,abort:d,rejectWithValue:function(e,t){return new vt(e,t)},fulfillWithValue:function(e,t){return new mt(e,t)}})).then((function(t){if(t instanceof vt)throw t;return t instanceof mt?r(t.payload,h,e,t.meta):r(t,h,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof vt?a(null,h,e,g.payload,g.meta):a(g,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||s(v),[2,v]}var _}))}))}();return Object.assign(p,{abort:d,requestId:h,arg:e,unwrap:function(){return p.then(kt)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function kt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var _t="listenerMiddleware";lt(_t+"/add"),lt(_t+"/removeAll"),lt(_t+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var bt,wt=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:wt(10);we();var Et=ft({name:"user",initialState:{email:null,token:null,id:null,name:null},reducers:{setUser:function(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id,e.name=t.payload.name},removeUser:function(e){e.email=null,e.token=null,e.id=null,e.name=null},setName:function(e,t){e.name=t.payload.name},setEmail:function(e,t){e.email=t.payload.email}}}),St=Et.actions,xt=St.setUser,Ct=St.removeUser,Tt=St.setName,It=St.setEmail,Nt=Et.reducer,Pt=ft({name:"reserv",initialState:{date:{day:null,month:null,year:null},time:{from:{hours:"",minutes:""},to:{hours:"",minutes:""}},table:null,amount:null,comment:null},reducers:{setDate:function(e,t){e.date.day=t.payload.day,e.date.month=t.payload.month,e.date.year=t.payload.year},updateDate:function(e,t){e.date[t.payload.key]=t.payload.value},setTime:function(e,t){e.time.from.hours=t.payload.from.hours,e.time.from.minutes=t.payload.from.minutes,e.time.to.hours=t.payload.to.hours,e.time.to.minutes=t.payload.to.minutes},updateTime:function(e,t){var n=t.payload,r=n.range,i=n.key,a=n.value;e.time[r][i]=a},setTable:function(e,t){e.table=t.payload.table},setAmount:function(e,t){e.amount=t.payload.amount},setComment:function(e,t){e.comment=t.payload.comment},removeReserv:function(e){e.date.day=null,e.date.month=null,e.date.year=null,e.time.from.hours="",e.time.from.minutes="",e.time.to.hours="",e.time.to.minutes="",e.table=null,e.amount=null,e.comment=null}}}),Rt=Pt.actions,At=Rt.setDate,Ot=Rt.updateDate,Dt=Rt.setTime,Lt=Rt.updateTime,Mt=Rt.setTable,Ft=Rt.setAmount,jt=Rt.setComment,Ut=Rt.removeReserv,Vt=Pt.reducer;function zt(){zt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var c=h(e[r],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==s(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,u)}))}u(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function qt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Dy){return void n(Dy)}s.done?t(u):Promise.resolve(u).then(r,i)}function Bt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){qt(a,r,i,o,s,"next",e)}function s(e){qt(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Wt(e,t){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wt(e,t)}function Ht(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Kt(e,t,n){return Kt=Ht()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Wt(i,n.prototype),i},Kt.apply(null,arguments)}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}function Qt(){return Qt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Qt.apply(this,arguments)}function $t(e){if(Array.isArray(e))return e}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xt(e,t){if(e){if("string"===typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(e,t):void 0}}function Jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zt(e,t){return $t(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||Xt(e,t)||Jt()}function en(e){var t="function"===typeof Map?new Map:void 0;return en=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Kt(e,arguments,Gt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Wt(n,e)},en(e)}function tn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Xt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function nn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}function rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){var t=Ht();return function(){var n,r=Gt(e);if(t){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rn(e)}(this,n)}}function on(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function sn(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||on(e)||Xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function ln(e,t,n){return t&&cn(e.prototype,t),n&&cn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hn=!1,fn=!1,dn="${JSCORE_VERSION}",pn=function(e,t){if(!e)throw vn(t)},vn=function(e){return new Error("Firebase Database ("+dn+") INTERNAL ASSERT FAILED: "+e)},mn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new gn;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},gn=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return ln(n)}(en(Error)),kn=function(e){var t=mn(e);return yn.encodeByteArray(t,!0)},_n=function(e){return kn(e).replace(/\./g,"")},bn=function(e){try{return yn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wn(e){return En(void 0,e)}function En(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=En(e[n],t[n]));return e}var Sn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},xn=function(){try{return Sn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBAZE_API_KEY:"AIzaSyDcAXN1g3Ofl4FsPZGiQSQq4q2QaUmt_Co",REACT_APP_FIREBAZE_APP_ID:"1:1029433028060:web:355fc0e820eb8221987319",REACT_APP_FIREBAZE_AUTH_DOMAIN:"reservation-app-57c2d.firebaseapp.com",REACT_APP_FIREBAZE_MESSAGING_SENDER_ID:"1029433028060",REACT_APP_FIREBAZE_PROJECT_ID:"reservation-app-57c2d",REACT_APP_FIREBAZE_STORAGE_BUCKET:"reservation-app-57c2d.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&bn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Cn=function(e){var t,n;return null===(n=null===(t=xn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Tn=function(e){var t=Cn(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},In=function(){var e;return null===(e=xn())||void 0===e?void 0:e.config},Nn=function(e){var t;return null===(t=xn())||void 0===t?void 0:t["_".concat(e)]},Pn=function(){function e(){var t=this;un(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ln(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Rn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_n(JSON.stringify({alg:"none",type:"JWT"})),_n(JSON.stringify(a)),""].join(".")}function An(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function On(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Dn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ln(){return!0===hn||!0===fn}function Mn(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Fn=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a;return un(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(rn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(rn(a),jn.prototype.create),a}return ln(n)}(en(Error)),jn=function(){function e(t,n,r){un(this,e),this.service=t,this.serviceName=n,this.errors=r}return ln(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Un,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Fn(n,a,t)}}]),e}();var Un=/\{\$([^}]+)}/g;function Vn(e){return JSON.parse(e)}function zn(e){return JSON.stringify(e)}var qn=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Vn(bn(a[0])||""),n=Vn(bn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Bn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Hn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kn(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Gn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Qn(s)&&Qn(u)){if(!Gn(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Qn(e){return null!==e&&"object"===typeof e}function $n(e){for(var t=[],n=function(){var e=Zt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Yn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Zt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Xn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Jn=function(){function e(){un(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ln(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var Zn=function(){function e(t,n){var r=this;un(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ln(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=tn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=er),void 0===r.error&&(r.error=er),void 0===r.complete&&(r.complete=er);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function er(){}function tr(e,t){return"".concat(e," failed: ").concat(t," argument ")}var nr=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function rr(e){return e&&e._delegate?e._delegate:e}var ir=function(){function e(t,n,r){un(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ln(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ar="[DEFAULT]",or=function(){function e(t,n){un(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ln(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Pn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch(u){}var t,n=tn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Zt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(sn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),sn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=tn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=Zt(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ar?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;return this.component?this.component.multipleInstances?e:ar:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var sr,ur,cr=function(){function e(t){un(this,e),this.name=t,this.providers=new Map}return ln(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new or(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),lr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ur||(ur={}));var hr={debug:ur.DEBUG,verbose:ur.VERBOSE,info:ur.INFO,warn:ur.WARN,error:ur.ERROR,silent:ur.SILENT},fr=ur.INFO,dr=(c(sr={},ur.DEBUG,"log"),c(sr,ur.VERBOSE,"log"),c(sr,ur.INFO,"info"),c(sr,ur.WARN,"warn"),c(sr,ur.ERROR,"error"),sr),pr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=dr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},vr=function(){function e(t){un(this,e),this.name=t,this._logLevel=fr,this._logHandler=pr,this._userLogHandler=null,lr.push(this)}return ln(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ur))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?hr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ur.DEBUG].concat(t)),this._logHandler.apply(this,[this,ur.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ur.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ur.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ur.INFO].concat(t)),this._logHandler.apply(this,[this,ur.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ur.WARN].concat(t)),this._logHandler.apply(this,[this,ur.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ur.ERROR].concat(t)),this._logHandler.apply(this,[this,ur.ERROR].concat(t))}}]),e}();var mr,yr,gr=function(e,t){return t.some((function(t){return e instanceof t}))};var kr=new WeakMap,_r=new WeakMap,br=new WeakMap,wr=new WeakMap,Er=new WeakMap;var Sr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _r.get(e);if("objectStoreNames"===t)return e.objectStoreNames||br.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function xr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yr||(yr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ir(this),n),Tr(kr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(e.apply(Ir(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ir(this),t].concat(r));return br.set(a,t.sort?t.sort():[t]),Tr(a)}}function Cr(e){return"function"===typeof e?xr(e):(e instanceof IDBTransaction&&function(e){if(!_r.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));_r.set(e,t)}}(e),gr(e,mr||(mr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Sr):e)}function Tr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Tr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&kr.set(t,e)})).catch((function(){})),Er.set(t,e),t}(e);if(wr.has(e))return wr.get(e);var t=Cr(e);return t!==e&&(wr.set(e,t),Er.set(t,e)),t}var Ir=function(e){return Er.get(e)};var Nr,Pr,Rr=["get","getKey","getAll","getAllKeys","count"],Ar=["put","add","delete","clear"],Or=new Map;function Dr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Or.get(t))return Or.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ar.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Rr.includes(n))){var a=function(){var e=Bt(zt().mark((function e(t){var a,o,s,u,c,l,h=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Or.set(t,a),a}}}Sr=function(e){return R(R({},e),{},{get:function(t,n,r){return Dr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Dr(t,n)||e.has(t,n)}})}(Sr);var Lr=function(){function e(t){un(this,e),this.container=t}return ln(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Mr="@firebase/app",Fr="0.9.14",jr=new vr("@firebase/app"),Ur="[DEFAULT]",Vr=(c(Nr={},Mr,"fire-core"),c(Nr,"@firebase/app-compat","fire-core-compat"),c(Nr,"@firebase/analytics","fire-analytics"),c(Nr,"@firebase/analytics-compat","fire-analytics-compat"),c(Nr,"@firebase/app-check","fire-app-check"),c(Nr,"@firebase/app-check-compat","fire-app-check-compat"),c(Nr,"@firebase/auth","fire-auth"),c(Nr,"@firebase/auth-compat","fire-auth-compat"),c(Nr,"@firebase/database","fire-rtdb"),c(Nr,"@firebase/database-compat","fire-rtdb-compat"),c(Nr,"@firebase/functions","fire-fn"),c(Nr,"@firebase/functions-compat","fire-fn-compat"),c(Nr,"@firebase/installations","fire-iid"),c(Nr,"@firebase/installations-compat","fire-iid-compat"),c(Nr,"@firebase/messaging","fire-fcm"),c(Nr,"@firebase/messaging-compat","fire-fcm-compat"),c(Nr,"@firebase/performance","fire-perf"),c(Nr,"@firebase/performance-compat","fire-perf-compat"),c(Nr,"@firebase/remote-config","fire-rc"),c(Nr,"@firebase/remote-config-compat","fire-rc-compat"),c(Nr,"@firebase/storage","fire-gcs"),c(Nr,"@firebase/storage-compat","fire-gcs-compat"),c(Nr,"@firebase/firestore","fire-fst"),c(Nr,"@firebase/firestore-compat","fire-fst-compat"),c(Nr,"fire-js","fire-js"),c(Nr,"firebase","fire-js-all"),Nr),zr=new Map,qr=new Map;function Br(e,t){try{e.container.addComponent(t)}catch(n){jr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Wr(e){var t=e.name;if(qr.has(t))return jr.debug("There were multiple attempts to register component ".concat(t,".")),!1;qr.set(t,e);var n,r=tn(zr.values());try{for(r.s();!(n=r.n()).done;){Br(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Hr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Kr=(c(Pr={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),c(Pr,"bad-app-name","Illegal App name: '{$appName}"),c(Pr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),c(Pr,"app-deleted","Firebase App named '{$appName}' already deleted"),c(Pr,"no-options","Need to provide options, when not being deployed to hosting via source."),c(Pr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),c(Pr,"invalid-log-argument","First argument to `onLog` must be null or a function."),c(Pr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),c(Pr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),c(Pr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),c(Pr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Pr),Gr=new jn("app","Firebase",Kr),Qr=function(){function e(t,n,r){var i=this;un(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",(function(){return i}),"PUBLIC"))}return ln(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}]),e}(),$r="10.0.0";function Yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=In()),!n)throw Gr.create("no-options");var a=zr.get(i);if(a){if(Gn(n,a.options)&&Gn(r,a.config))return a;throw Gr.create("duplicate-app",{appName:i})}var o,s=new cr(i),u=tn(qr.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Qr(n,r,s);return zr.set(i,l),l}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=zr.get(e);if(!t&&e===Ur&&In())return Yr();if(!t)throw Gr.create("no-app",{appName:e});return t}function Jr(e,t,n){var r,i=null!==(r=Vr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void jr.warn(s.join(" "))}Wr(new ir("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Zr="firebase-heartbeat-database",ei=1,ti="firebase-heartbeat-store",ni=null;function ri(){return ni||(ni=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Tr(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Tr(s.result),e.oldVersion,e.newVersion,Tr(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Zr,ei,{upgrade:function(e,t){if(0===t)e.createObjectStore(ti)}}).catch((function(e){throw Gr.create("idb-open",{originalErrorMessage:e.message})}))),ni}function ii(e){return ai.apply(this,arguments)}function ai(){return ai=Bt(zt().mark((function e(t){var n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ri();case 3:return n=e.sent,e.next=6,n.transaction(ti).objectStore(ti).get(ui(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Fn?jr.warn(e.t0.message):(i=Gr.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),jr.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ai.apply(this,arguments)}function oi(e,t){return si.apply(this,arguments)}function si(){return si=Bt(zt().mark((function e(t,n){var r,i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ri();case 3:return r=e.sent,i=r.transaction(ti,"readwrite"),a=i.objectStore(ti),e.next=8,a.put(n,ui(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Fn?jr.warn(e.t0.message):(o=Gr.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),jr.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),si.apply(this,arguments)}function ui(e){return"".concat(e.name,"!").concat(e.options.appId)}var ci=function(){function e(t){var n=this;un(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new di(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ln(e,[{key:"triggerHeartbeat",value:function(){var e=Bt(zt().mark((function e(){var t,n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=li(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Bt(zt().mark((function e(){var t,n,r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=li(),n=hi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=_n(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function li(){return(new Date).toISOString().substring(0,10)}function hi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=tn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),pi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),pi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var fi,di=function(){function e(t){un(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ln(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Dy){t(Dy)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ii(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(sn(r.heartbeats),sn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function pi(e){return _n(JSON.stringify({version:2,heartbeats:e})).length}fi="",Wr(new ir("platform-logger",(function(e){return new Lr(e)}),"PRIVATE")),Wr(new ir("heartbeat",(function(e){return new ci(e)}),"PRIVATE")),Jr(Mr,Fr,fi),Jr(Mr,Fr,"esm2017"),Jr("fire-js","");var vi,mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},yi={},gi=gi||{},ki=mi||self;function _i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function bi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var wi="closure_uid_"+(1e9*Math.random()>>>0),Ei=0;function Si(e,t,n){return e.call.apply(e.bind,arguments)}function xi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ci(e,t,n){return(Ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Si:xi).apply(null,arguments)}function Ti(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ii(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ni(){this.s=this.s,this.o=this.o}Ni.prototype.s=!1,Ni.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,wi)&&e[wi]||(e[wi]=++Ei)}(this)},Ni.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ri(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ai(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(_i(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Oi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Oi.prototype.h=function(){this.defaultPrevented=!0};var Di=function(){if(!ki.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ki.addEventListener("test",(function(){}),t),ki.removeEventListener("test",(function(){}),t)}catch($){}return e}();function Li(e){return/^[\s\xa0]*$/.test(e)}function Mi(){var e=ki.navigator;return e&&(e=e.userAgent)?e:""}function Fi(e){return-1!=Mi().indexOf(e)}function ji(e){return ji[" "](e),e}ji[" "]=function(){};var Ui,Vi,zi=Fi("Opera"),qi=Fi("Trident")||Fi("MSIE"),Bi=Fi("Edge"),Wi=Bi||qi,Hi=Fi("Gecko")&&!(-1!=Mi().toLowerCase().indexOf("webkit")&&!Fi("Edge"))&&!(Fi("Trident")||Fi("MSIE"))&&!Fi("Edge"),Ki=-1!=Mi().toLowerCase().indexOf("webkit")&&!Fi("Edge");function Gi(){var e=ki.document;return e?e.documentMode:void 0}e:{var Qi="",$i=function(){var e=Mi();return Hi?/rv:([^\);]+)(\)|;)/.exec(e):Bi?/Edge\/([\d\.]+)/.exec(e):qi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ki?/WebKit\/(\S+)/.exec(e):zi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if($i&&(Qi=$i?$i[1]:""),qi){var Yi=Gi();if(null!=Yi&&Yi>parseFloat(Qi)){Ui=String(Yi);break e}}Ui=Qi}if(ki.document&&qi){var Xi=Gi();Vi=Xi||(parseInt(Ui,10)||void 0)}else Vi=void 0;var Ji=Vi;function Zi(e,t){if(Oi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Hi){e:{try{ji(t.nodeName);var i=!0;break e}catch(Q){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ea[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Zi.$.h.call(this)}}Ii(Zi,Oi);var ea={2:"touch",3:"pen",4:"mouse"};Zi.prototype.h=function(){Zi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ta="closure_listenable_"+(1e6*Math.random()|0),na=0;function ra(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++na,this.fa=this.ia=!1}function ia(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function aa(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function oa(e){var t={};for(var n in e)t[n]=e[n];return t}var sa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ua(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<sa.length;a++)n=sa[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ca(e){this.src=e,this.g={},this.h=0}function la(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Pi(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ia(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ha(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}ca.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ha(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ra(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var fa="closure_lm_"+(1e6*Math.random()|0),da={};function pa(e,t,n,r,i){if(r&&r.once)return ma(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)pa(e,t[a],n,r,i);return null}return n=Ea(n),e&&e[ta]?e.O(t,n,bi(r)?!!r.capture:!!r,i):va(e,t,n,!1,r,i)}function va(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=bi(i)?!!i.capture:!!i,s=ba(e);if(s||(e[fa]=s=new ca(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=_a;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Di||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ka(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ma(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ma(e,t[a],n,r,i);return null}return n=Ea(n),e&&e[ta]?e.P(t,n,bi(r)?!!r.capture:!!r,i):va(e,t,n,!0,r,i)}function ya(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ya(e,t[a],n,r,i);else r=bi(r)?!!r.capture:!!r,n=Ea(n),e&&e[ta]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ha(a=e.g[t],n,r,i))&&(ia(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ba(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ha(t,n,r,i)),(n=-1<e?t[e]:null)&&ga(n))}function ga(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ta])la(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ka(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ba(t))?(la(n,e),0==n.h&&(n.src=null,t[fa]=null)):ia(e)}}}function ka(e){return e in da?da[e]:da[e]="on"+e}function _a(e,t){if(e.fa)e=!0;else{t=new Zi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ga(e),e=n.call(r,t)}return e}function ba(e){return(e=e[fa])instanceof ca?e:null}var wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ea(e){return"function"===typeof e?e:(e[wa]||(e[wa]=function(t){return e.handleEvent(t)}),e[wa])}function Sa(){Ni.call(this),this.i=new ca(this),this.S=this,this.J=null}function xa(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Oi(t,e);else if(t instanceof Oi)t.target=t.target||e;else{var i=t;ua(t=new Oi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ca(o,r,!0,t)&&i}if(i=Ca(o=t.g=e,r,!0,t)&&i,i=Ca(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ca(o=t.g=n[a],r,!1,t)&&i}function Ca(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&la(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ii(Sa,Ni),Sa.prototype[ta]=!0,Sa.prototype.removeEventListener=function(e,t,n,r){ya(this,e,t,n,r)},Sa.prototype.N=function(){if(Sa.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ia(n[r]);delete t.g[e],t.h--}}this.J=null},Sa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sa.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ta=ki.JSON.stringify,Ia=function(){function e(t,n){un(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ln(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Na(){var e=Fa,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pa=function(){function e(){un(this,e),this.h=this.g=null}return ln(e,[{key:"add",value:function(e,t){var n=Ra.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ra=new Ia((function(){return new Aa}),(function(e){return e.reset()})),Aa=function(){function e(){un(this,e),this.next=this.g=this.h=null}return ln(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Oa(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Da(e){ki.setTimeout((function(){throw e}),0)}var La,Ma=!1,Fa=new Pa,ja=function(){var e=ki.Promise.resolve(void 0);La=function(){e.then(Ua)}},Ua=function(){for(var e;e=Na();){try{e.h.call(e.g)}catch($){Da($)}var t=Ra;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ma=!1};function Va(e,t){Sa.call(this),this.h=e||1,this.g=t||ki,this.j=Ci(this.qb,this),this.l=Date.now()}function za(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function qa(e,t,n){if("function"===typeof e)n&&(e=Ci(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ci(e.handleEvent,e)}return 2147483647<Number(t)?-1:ki.setTimeout(e,t||0)}function Ba(e){e.g=qa((function(){e.g=null,e.i&&(e.i=!1,Ba(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ii(Va,Sa),(vi=Va.prototype).ga=!1,vi.T=null,vi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xa(this,"tick"),this.ga&&(za(this),this.start()))}},vi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vi.N=function(){Va.$.N.call(this),za(this),delete this.g};var Wa=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ln(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ba(this)}},{key:"N",value:function(){Qt(Gt(n.prototype),"N",this).call(this),this.g&&(ki.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ni);function Ha(e){Ni.call(this),this.h=e,this.g={}}Ii(Ha,Ni);var Ka=[];function Ga(e,t,n,r){Array.isArray(n)||(n&&(Ka[0]=n.toString()),n=Ka);for(var i=0;i<n.length;i++){var a=pa(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Qa(e){aa(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ga(e)}),e),e.g={}}function $a(){this.g=!0}function Ya(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ta(n)}catch(z){return t}}(e,n)+(r?" "+r:"")}))}Ha.prototype.N=function(){Ha.$.N.call(this),Qa(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$a.prototype.Ea=function(){this.g=!1},$a.prototype.info=function(){};var Xa={},Ja=null;function Za(){return Ja=Ja||new Sa}function eo(e){Oi.call(this,Xa.Ta,e)}function to(e){var t=Za();xa(t,new eo(t))}function no(e,t){Oi.call(this,Xa.STAT_EVENT,e),this.stat=t}function ro(e){var t=Za();xa(t,new no(t,e))}function io(e,t){Oi.call(this,Xa.Ua,e),this.size=t}function ao(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ki.setTimeout((function(){e()}),t)}Xa.Ta="serverreachability",Ii(eo,Oi),Xa.STAT_EVENT="statevent",Ii(no,Oi),Xa.Ua="timingevent",Ii(io,Oi);var oo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},so={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uo(){}function co(e){return e.h||(e.h=e.i())}function lo(){}uo.prototype.h=null;var ho,fo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function po(){Oi.call(this,"d")}function vo(){Oi.call(this,"c")}function mo(){}function yo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ha(this),this.P=ko,e=Wi?125:void 0,this.V=new Va(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new go}function go(){this.i=null,this.g="",this.h=!1}Ii(po,Oi),Ii(vo,Oi),Ii(mo,uo),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},ho=new mo;var ko=45e3,_o={},bo={};function wo(e,t,n){e.L=1,e.v=zo(Mo(t)),e.s=n,e.S=!0,Eo(e,null)}function Eo(e,t){e.G=Date.now(),To(e),e.A=Mo(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),es(n.i,"t",r),e.C=0,n=e.l.J,e.h=new go,e.g=eu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Wa(Ci(e.Pa,e,e.g),e.O)),Ga(e.U,e.g,"readystatechange",e.nb),t=e.I?oa(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),to(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function So(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function xo(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Co(e,n))==bo){4==t&&(e.o=4,ro(14),i=!1),Ya(e.j,e.m,null,"[Incomplete Response]");break}if(r==_o){e.o=4,ro(15),Ya(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ya(e.j,e.m,r,null),Ao(e,r)}So(e)&&r!=bo&&r!=_o&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ro(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ks(t),t.M=!0,ro(11))):(Ya(e.j,e.m,n,"[Invalid Chunked Response]"),Ro(e),Po(e))}function Co(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bo:(n=Number(t.substring(n,r)),isNaN(n)?_o:(r+=1)+n>t.length?bo:(t=t.slice(r,r+n),e.C=r+n,t))}function To(e){e.Y=Date.now()+e.P,Io(e,e.P)}function Io(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ao(Ci(e.lb,e),t)}function No(e){e.B&&(ki.clearTimeout(e.B),e.B=null)}function Po(e){0==e.l.H||e.J||$s(e.l,e)}function Ro(e){No(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,za(e.V),Qa(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ao(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ss(n.i,e)))if(!e.K&&ss(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Qs(n),js(n)}Hs(n),ro(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ao(Ci(n.ib,n),6e3));if(1>=os(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Xs(n,11)}else if((e.K||n.g==e)&&Qs(n),!Li(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(us(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Vo(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Zs(r,r.J?r.pa:null,r.Y),d.K){cs(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(No(p),To(p)),r.g=d}else Ws(r);0<n.j.length&&Vs(n)}else"stop"!=a[0]&&"close"!=a[0]||Xs(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xs(n,7):Fs(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}to()}catch(a){}}function Oo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(_i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(_i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(_i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(vi=yo.prototype).setTimeout=function(e){this.P=e},vi.nb=function(e){e=e.target;var t=this.M;t&&3==Rs(e)?t.l():this.Pa(e)},vi.Pa=function(e){try{if(e==this.g)e:{var t=Rs(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Wi||this.g&&(this.h.h||this.g.ja()||As(this.g)))){this.J||4!=t||7==n||to(),No(this);var r=this.g.da();this.ca=r;t:if(So(this)){var i=As(this.g);e="";var a=i.length,o=4==Rs(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ro(this),Po(this);var s="";break t}this.h.i=new ki.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Li(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ro(12),Ro(this),Po(this);break e}Ya(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,r)}this.S?(xo(this,t,s),Wi&&this.i&&3==t&&(Ga(this.U,this.V,"tick",this.mb),this.V.start())):(Ya(this.j,this.m,s,null),Ao(this,s)),4==t&&Ro(this),this.i&&!this.J&&(4==t?$s(this.l,this):(this.i=!1,To(this)))}else(function(e){var t={};e=(e.g&&2<=Rs(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Li(e[n])){var r=Oa(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,ro(12)):(this.o=0,ro(13)),Ro(this),Po(this)}}}catch(t){}},vi.mb=function(){if(this.g){var e=Rs(this.g),t=this.g.ja();this.C<t.length&&(No(this),xo(this,e,t),this.i&&4!=e&&To(this))}},vi.cancel=function(){this.J=!0,Ro(this)},vi.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(to(),ro(17)),Ro(this),this.o=2,Po(this)):Io(this,this.Y-e)};var Do=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Lo){this.h=e.h,Fo(this,e.j),this.s=e.s,this.g=e.g,jo(this,e.m),this.l=e.l;var t=e.i,n=new Yo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Uo(this,n),this.o=e.o}else e&&(t=String(e).match(Do))?(this.h=!1,Fo(this,t[1]||"",!0),this.s=qo(t[2]||""),this.g=qo(t[3]||"",!0),jo(this,t[4]),this.l=qo(t[5]||"",!0),Uo(this,t[6]||"",!0),this.o=qo(t[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}function Mo(e){return new Lo(e)}function Fo(e,t,n){e.j=n?qo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Uo(e,t,n){t instanceof Yo?(e.i=t,function(e,t){t&&!e.j&&(Xo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jo(this,t),es(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Bo(t,Qo)),e.i=new Yo(t,e.h))}function Vo(e,t,n){e.i.set(t,n)}function zo(e){return Vo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Bo(t,Ho,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Bo(t,Ho,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bo(n,"/"==n.charAt(0)?Go:Ko,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Bo(n,$o)),e.join("")};var Ho=/[#\/\?@]/g,Ko=/[#\?:]/g,Go=/[#\?]/g,Qo=/[#\?@]/g,$o=/#/g;function Yo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jo(e,t){Xo(e),t=ts(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zo(e,t){return Xo(e),t=ts(e,t),e.g.has(t)}function es(e,t,n){Jo(e,t),0<n.length&&(e.i=null,e.g.set(ts(e,t),Ri(n)),e.h+=n.length)}function ts(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(vi=Yo.prototype).add=function(e,t){Xo(this),this.i=null,e=ts(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},vi.forEach=function(e,t){Xo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},vi.ta=function(){Xo(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},vi.Z=function(e){Xo(this);var t=[];if("string"===typeof e)Zo(this,e)&&(t=t.concat(this.g.get(ts(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},vi.set=function(e,t){return Xo(this),this.i=null,Zo(this,e=ts(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},vi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},vi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ns=ln((function e(t,n){un(this,e),this.g=t,this.map=n}));function rs(e){this.l=e||is,ki.PerformanceNavigationTiming?e=0<(e=ki.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ki.g&&ki.g.Ka&&ki.g.Ka()&&ki.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var is=10;function as(e){return!!e.h||!!e.g&&e.g.size>=e.j}function os(e){return e.h?1:e.g?e.g.size:0}function ss(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function us(e,t){e.g?e.g.add(t):e.h=t}function cs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ls(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=tn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Ri(e.i)}rs.prototype.cancel=function(){if(this.i=ls(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=tn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var hs=function(){function e(){un(this,e)}return ln(e,[{key:"stringify",value:function(e){return ki.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return ki.JSON.parse(e,void 0)}}]),e}();function fs(){this.g=new hs}function ds(e,t,n){var r=n||"";try{Oo(e,(function(e,n){var i=e;bi(e)&&(i=Ta(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ps(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Q){}}function vs(e){this.l=e.fc||null,this.j=e.ob||!1}function ms(e,t){Sa.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ii(vs,uo),vs.prototype.g=function(){return new ms(this.l,this.j)},vs.prototype.i=function(e){return function(){return e}}({}),Ii(ms,Sa);var ys=0;function gs(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ks(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_s(e)}function _s(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(vi=ms.prototype).open=function(e,t){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_s(this)},vi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ki).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},vi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ks(this)),this.readyState=ys},vi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ki.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gs(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},vi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ks(this):_s(this),3==this.readyState&&gs(this)}},vi.Za=function(e){this.g&&(this.response=this.responseText=e,ks(this))},vi.Ya=function(e){this.g&&(this.response=e,ks(this))},vi.ka=function(){this.g&&ks(this)},vi.setRequestHeader=function(e,t){this.v.append(e,t)},vi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},vi.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bs=ki.JSON.parse;function ws(e){Sa.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Es,this.L=this.M=!1}Ii(ws,Sa);var Es="",Ss=/^https?$/i,xs=["POST","PUT"];function Cs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ts(e),Ns(e)}function Ts(e){e.F||(e.F=!0,xa(e,"complete"),xa(e,"error"))}function Is(e){if(e.h&&"undefined"!=typeof gi&&(!e.C[1]||4!=Rs(e)||2!=e.da()))if(e.v&&4==Rs(e))qa(e.La,0,e);else if(xa(e,"readystatechange"),4==Rs(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Do)[1]||null;!a&&ki.self&&ki.self.location&&(a=ki.self.location.protocol.slice(0,-1)),i=!Ss.test(a?a.toLowerCase():"")}t=i}if(t)xa(e,"complete"),xa(e,"success");else{e.m=6;try{var o=2<Rs(e)?e.g.statusText:""}catch(z){o=""}e.j=o+" ["+e.da()+"]",Ts(e)}}finally{Ns(e)}}}function Ns(e,t){if(e.g){Ps(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||xa(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ps(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ki.clearTimeout(e.A),e.A=null)}function Rs(e){return e.g?e.g.readyState:0}function As(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Es:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(re){return null}}function Os(e){var t="";return aa(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ds(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Os(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Vo(e,t,n))}function Ls(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ms(e){this.Ga=0,this.j=[],this.l=new $a,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ls("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ls("baseRetryDelayMs",5e3,e),this.hb=Ls("retryDelaySeedMs",1e4,e),this.eb=Ls("forwardChannelMaxRetries",2,e),this.xa=Ls("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new rs(e&&e.concurrentRequestLimit),this.Ja=new fs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Fs(e){if(Us(e),3==e.H){var t=e.W++,n=Mo(e.I);if(Vo(n,"SID",e.K),Vo(n,"RID",t),Vo(n,"TYPE","terminate"),qs(e,n),(t=new yo(e,e.l,t)).L=2,t.v=zo(Mo(n)),n=!1,ki.navigator&&ki.navigator.sendBeacon)try{n=ki.navigator.sendBeacon(t.v.toString(),"")}catch(ee){}!n&&ki.Image&&((new Image).src=t.v,n=!0),n||(t.g=eu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),To(t)}Js(e)}function js(e){e.g&&(Ks(e),e.g.cancel(),e.g=null)}function Us(e){js(e),e.u&&(ki.clearTimeout(e.u),e.u=null),Qs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ki.clearTimeout(e.m),e.m=null)}function Vs(e){if(!as(e.i)&&!e.m){e.m=!0;var t=e.Na;La||ja(),Ma||(La(),Ma=!0),Fa.add(t,e),e.C=0}}function zs(e,t){var n;n=t?t.m:e.W++;var r=Mo(e.I);Vo(r,"SID",e.K),Vo(r,"RID",n),Vo(r,"AID",e.V),qs(e,r),e.o&&e.s&&Ds(r,e.o,e.s),n=new yo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Bs(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),us(e.i,n),wo(n,r,t)}function qs(e,t){e.na&&aa(e.na,(function(e,n){Vo(t,n,e)})),e.h&&Oo({},(function(e,n){Vo(t,n,e)}))}function Bs(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ci(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{ds(l,o,"req"+c+"_")}catch(Pe){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ws(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;La||ja(),Ma||(La(),Ma=!0),Fa.add(t,e),e.A=0}}function Hs(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ao(Ci(e.Ma,e),Ys(e,e.A)),e.A++,!0)}function Ks(e){null!=e.B&&(ki.clearTimeout(e.B),e.B=null)}function Gs(e){e.g=new yo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Mo(e.wa);Vo(t,"RID","rpc"),Vo(t,"SID",e.K),Vo(t,"AID",e.V),Vo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Vo(t,"TO",e.qa),Vo(t,"TYPE","xmlhttp"),qs(e,t),e.o&&e.s&&Ds(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=zo(Mo(t)),n.s=null,n.S=!0,Eo(n,e)}function Qs(e){null!=e.v&&(ki.clearTimeout(e.v),e.v=null)}function $s(e,t){var n=null;if(e.g==t){Qs(e),Ks(e),e.g=null;var r=2}else{if(!ss(e.i,t))return;n=t.F,cs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;xa(r=Za(),new io(r,n)),Vs(e)}else Ws(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(os(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ao(Ci(e.Na,e,t),Ys(e,e.C)),e.C++,!0))}(e,t)||2==r&&Hs(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xs(e,5);break;case 4:Xs(e,10);break;case 3:Xs(e,6);break;default:Xs(e,2)}}function Ys(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Xs(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ci(e.pb,e);n||(n=new Lo("//www.google.com/images/cleardot.gif"),ki.location&&"http"==ki.location.protocol||Fo(n,"https"),zo(n)),function(e,t){var n=new $a;if(ki.Image){var r=new Image;r.onload=Ti(ps,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ti(ps,n,r,"TestLoadImage: error",!1,t),r.onabort=Ti(ps,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ti(ps,n,r,"TestLoadImage: timeout",!1,t),ki.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ro(2);e.H=0,e.h&&e.h.za(t),Js(e),Us(e)}function Js(e){if(e.H=0,e.ma=[],e.h){var t=ls(e.i);0==t.length&&0==e.j.length||(Ai(e.ma,t),Ai(e.ma,e.j),e.i.i.length=0,Ri(e.j),e.j.length=0),e.h.ya()}}function Zs(e,t,n){var r=n instanceof Lo?Mo(n):new Lo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),jo(r,r.m);else{var i=ki.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Lo(null);r&&Fo(a,r),t&&(a.g=t),i&&jo(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Vo(r,n,t),Vo(r,"VER",e.ra),qs(e,r),r}function eu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ws(new vs({ob:!0})):new ws(e.va)).Oa(e.J),t}function tu(){}function nu(){if(qi&&!(10<=Number(Ji)))throw Error("Environmental error: no available transport.")}function ru(e,t){Sa.call(this),this.g=new Ms(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Li(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Li(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ou(this)}function iu(e){po.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function au(){vo.call(this),this.status=1}function ou(e){this.g=e}function su(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function uu(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function cu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(vi=ws.prototype).Oa=function(e){this.M=e},vi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ho.g(),this.C=this.u?co(this.u):co(ho),this.g.onreadystatechange=Ci(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Cs(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=tn(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=ki.FormData&&e instanceof ki.FormData,!(0<=Pi(xs,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=tn(n);try{for(c.s();!(u=c.n()).done;){var l=Zt(u.value,2),h=l[0],f=l[1];this.g.setRequestHeader(h,f)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ps(this),0<this.B&&((this.L=function(e){return qi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ci(this.ua,this)):this.A=qa(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Cs(this,s)}},vi.ua=function(){"undefined"!=typeof gi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xa(this,"timeout"),this.abort(8))},vi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xa(this,"complete"),xa(this,"abort"),Ns(this))},vi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ns(this,!0)),ws.$.N.call(this)},vi.La=function(){this.s||(this.G||this.v||this.l?Is(this):this.kb())},vi.kb=function(){Is(this)},vi.isActive=function(){return!!this.g},vi.da=function(){try{return 2<Rs(this)?this.g.status:-1}catch(G){return-1}},vi.ja=function(){try{return this.g?this.g.responseText:""}catch(G){return""}},vi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bs(t)}},vi.Ia=function(){return this.m},vi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(vi=Ms.prototype).ra=8,vi.H=1,vi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new yo(this,this.l,e),n=this.s;if(this.U&&(n?ua(n=oa(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bs(this,t,r),Vo(i=Mo(this.I),"RID",e),Vo(i,"CVER",22),this.F&&Vo(i,"X-HTTP-Session-Id",this.F),qs(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Os(n)))+"&"+r:this.o&&Ds(i,this.o,n)),us(this.i,t),this.bb&&Vo(i,"TYPE","init"),this.P?(Vo(i,"$req",r),Vo(i,"SID","null"),t.aa=!0,wo(t,i,null)):wo(t,i,r),this.H=2}}else 3==this.H&&(e?zs(this,e):0==this.j.length||as(this.i)||zs(this))},vi.Ma=function(){if(this.u=null,Gs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ao(Ci(this.jb,this),e)}},vi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ro(10),js(this),Gs(this))},vi.ib=function(){null!=this.v&&(this.v=null,js(this),Hs(this),ro(19))},vi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ro(2)):(this.l.info("Failed to ping google.com"),ro(1))},vi.isActive=function(){return!!this.h&&this.h.isActive(this)},(vi=tu.prototype).Ba=function(){},vi.Aa=function(){},vi.za=function(){},vi.ya=function(){},vi.isActive=function(){return!0},vi.Va=function(){},nu.prototype.g=function(e,t){return new ru(e,t)},Ii(ru,Sa),ru.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ro(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Zs(e,null,e.Y),Vs(e)},ru.prototype.close=function(){Fs(this.g)},ru.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ta(e),e=n);t.j.push(new ns(t.fb++,e)),3==t.H&&Vs(t)},ru.prototype.N=function(){this.g.h=null,delete this.j,Fs(this.g),delete this.g,ru.$.N.call(this)},Ii(iu,po),Ii(au,vo),Ii(ou,tu),ou.prototype.Ba=function(){xa(this.g,"a")},ou.prototype.Aa=function(e){xa(this.g,new iu(e))},ou.prototype.za=function(e){xa(this.g,new au)},ou.prototype.ya=function(){xa(this.g,"b")},Ii(su,(function(){this.blockSize=-1})),su.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},su.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)uu(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){uu(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){uu(this,r),i=0;break}}this.h=i,this.i+=t},su.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var lu={};function hu(e){return-128<=e&&128>e?function(e,t){var n=lu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new cu([0|e],0>e?-1:0)})):new cu([0|e],0>e?-1:0)}function fu(e){if(isNaN(e)||!isFinite(e))return pu;if(0>e)return ku(fu(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=du;return new cu(t,0)}var du=4294967296,pu=hu(0),vu=hu(1),mu=hu(16777216);function yu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function gu(e){return-1==e.h}function ku(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new cu(n,~e.h).add(vu)}function _u(e,t){return e.add(ku(t))}function bu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function wu(e,t){this.g=e,this.h=t}function Eu(e,t){if(yu(t))throw Error("division by zero");if(yu(e))return new wu(pu,pu);if(gu(e))return t=Eu(ku(e),t),new wu(ku(t.g),ku(t.h));if(gu(t))return t=Eu(e,ku(t)),new wu(ku(t.g),t.h);if(30<e.g.length){if(gu(e)||gu(t))throw Error("slowDivide_ only works with positive integers.");for(var n=vu,r=t;0>=r.X(e);)n=Su(n),r=Su(r);var i=xu(n,1),a=xu(r,1);for(r=xu(r,2),n=xu(n,2);!yu(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=xu(r,1),n=xu(n,1)}return t=_u(e,i.R(t)),new wu(i,t)}for(i=pu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=fu(n)).R(t);gu(o)||0<o.X(e);)o=(a=fu(n-=r)).R(t);yu(a)&&(a=vu),i=i.add(a),e=_u(e,o)}return new wu(i,e)}function Su(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new cu(n,e.h)}function xu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new cu(i,e.h)}(vi=cu.prototype).ea=function(){if(gu(this))return-ku(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:du+r)*t,t*=du}return e},vi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(yu(this))return"0";if(gu(this))return"-"+ku(this).toString(e);for(var t=fu(Math.pow(e,6)),n=this,r="";;){var i=Eu(n,t).g,a=((0<(n=_u(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(yu(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},vi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},vi.X=function(e){return gu(e=_u(this,e))?-1:yu(e)?0:1},vi.abs=function(){return gu(this)?ku(this):this},vi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new cu(n,-2147483648&n[n.length-1]?-1:0)},vi.R=function(e){if(yu(this)||yu(e))return pu;if(gu(this))return gu(e)?ku(this).R(ku(e)):ku(ku(this).R(e));if(gu(e))return ku(this.R(ku(e)));if(0>this.X(mu)&&0>e.X(mu))return fu(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,bu(n,2*r+2*i),n[2*r+2*i+1]+=a*u,bu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,bu(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,bu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new cu(n,0)},vi.gb=function(e){return Eu(this,e).h},vi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new cu(n,this.h&e.h)},vi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new cu(n,this.h|e.h)},vi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new cu(n,this.h^e.h)},nu.prototype.createWebChannel=nu.prototype.g,ru.prototype.send=ru.prototype.u,ru.prototype.open=ru.prototype.m,ru.prototype.close=ru.prototype.close,oo.NO_ERROR=0,oo.TIMEOUT=8,oo.HTTP_ERROR=6,so.COMPLETE="complete",lo.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",Sa.prototype.listen=Sa.prototype.O,ws.prototype.listenOnce=ws.prototype.P,ws.prototype.getLastError=ws.prototype.Sa,ws.prototype.getLastErrorCode=ws.prototype.Ia,ws.prototype.getStatus=ws.prototype.da,ws.prototype.getResponseJson=ws.prototype.Wa,ws.prototype.getResponseText=ws.prototype.ja,ws.prototype.send=ws.prototype.ha,ws.prototype.setWithCredentials=ws.prototype.Oa,su.prototype.digest=su.prototype.l,su.prototype.reset=su.prototype.reset,su.prototype.update=su.prototype.j,cu.prototype.add=cu.prototype.add,cu.prototype.multiply=cu.prototype.R,cu.prototype.modulo=cu.prototype.gb,cu.prototype.compare=cu.prototype.X,cu.prototype.toNumber=cu.prototype.ea,cu.prototype.toString=cu.prototype.toString,cu.prototype.getBits=cu.prototype.D,cu.fromNumber=fu,cu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ku(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=fu(Math.pow(n,8)),i=pu,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=fu(Math.pow(n,o)),i=i.R(o).add(fu(s))):i=(i=i.R(r)).add(fu(s))}return i};var Cu=yi.createWebChannelTransport=function(){return new nu},Tu=yi.getStatEventTarget=function(){return Za()},Iu=yi.ErrorCode=oo,Nu=yi.EventType=so,Pu=yi.Event=Xa,Ru=yi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Au=yi.FetchXmlHttpFactory=vs,Ou=yi.WebChannel=lo,Du=yi.XhrIo=ws,Lu=yi.Md5=su,Mu=yi.Integer=cu,Fu="@firebase/firestore",ju=function(){function e(t){un(this,e),this.uid=t}return ln(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ju.UNAUTHENTICATED=new ju(null),ju.GOOGLE_CREDENTIALS=new ju("google-credentials-uid"),ju.FIRST_PARTY=new ju("first-party-uid"),ju.MOCK_USER=new ju("mock-user");var Uu="10.0.0",Vu=new vr("@firebase/firestore");function zu(){return Vu.logLevel}function qu(e){if(Vu.logLevel<=ur.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hu);Vu.debug.apply(Vu,["Firestore (".concat(Uu,"): ").concat(e)].concat(sn(i)))}}function Bu(e){if(Vu.logLevel<=ur.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hu);Vu.error.apply(Vu,["Firestore (".concat(Uu,"): ").concat(e)].concat(sn(i)))}}function Wu(e){if(Vu.logLevel<=ur.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hu);Vu.warn.apply(Vu,["Firestore (".concat(Uu,"): ").concat(e)].concat(sn(i)))}}function Hu(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(B){return e}}function Ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Uu,") INTERNAL ASSERTION FAILED: ")+e;throw Bu(t),new Error(t)}function Gu(e,t){e||Ku()}function Qu(e,t){return e}var $u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Yu=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ln(n)}(Fn),Xu=ln((function e(){var t=this;un(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ju=ln((function e(t,n){un(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Zu=function(){function e(){un(this,e)}return ln(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ju.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ec=function(){function e(t){un(this,e),this.token=t,this.changeListener=null}return ln(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),tc=function(){function e(t){un(this,e),this.t=t,this.currentUser=ju.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ln(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Xu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Xu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){qu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(qu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(qu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Gu("string"==typeof n.accessToken),new Ju(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Gu(null===e||"string"==typeof e),new ju(e)}}]),e}(),nc=function(){function e(t,n,r){un(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ju.FIRST_PARTY,this.I=new Map}return ln(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),rc=function(){function e(t,n,r){un(this,e),this.l=t,this.h=n,this.P=r}return ln(e,[{key:"getToken",value:function(){return Promise.resolve(new nc(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ju.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ic=ln((function e(t){un(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ac=function(){function e(t){un(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return ln(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&qu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,qu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){qu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):qu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Gu("string"==typeof t.token),e.R=t.token,new ic(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function oc(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var sc=function(){function e(){un(this,e)}return ln(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=oc(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function uc(e,t){return e<t?-1:e>t?1:0}function cc(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var lc=function(){function e(t,n){if(un(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Yu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Yu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Yu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ln(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?uc(this.nanoseconds,e.nanoseconds):uc(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),hc=function(){function e(t){un(this,e),this.timestamp=t}return ln(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new lc(0,0))}},{key:"max",value:function(){return new e(new lc(253402300799,999999999))}}]),e}(),fc=function(){function e(t,n,r){un(this,e),void 0===n?n=0:n>t.length&&Ku(),void 0===r?r=t.length-n:r>t.length-n&&Ku(),this.segments=t,this.offset=n,this.len=r}return ln(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),dc=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Yu($u.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,sn(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fc),pc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vc=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return pc.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Yu($u.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Yu($u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Yu($u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Yu($u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fc),mc=function(){function e(t){un(this,e),this.path=t}return ln(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===dc.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(dc.fromString(t))}},{key:"fromName",value:function(t){return new e(dc.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(dc.emptyPath())}},{key:"comparator",value:function(e,t){return dc.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new dc(t.slice()))}}]),e}(),yc=ln((function e(t,n,r,i){un(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));yc.UNKNOWN_ID=-1;function gc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=hc.fromTimestamp(1e9===r?new lc(n+1,0):new lc(n,r));return new _c(i,mc.empty(),t)}function kc(e){return new _c(e.readTime,e.key,-1)}var _c=function(){function e(t,n,r){un(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ln(e,null,[{key:"min",value:function(){return new e(hc.min(),mc.empty(),-1)}},{key:"max",value:function(){return new e(hc.max(),mc.empty(),-1)}}]),e}();function bc(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=mc.comparator(e.documentKey,t.documentKey))?n:uc(e.largestBatchId,t.largestBatchId)}var wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ec=function(){function e(){un(this,e),this.onCommittedListeners=[]}return ln(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Sc(e){return xc.apply(this,arguments)}function xc(){return xc=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===$u.FAILED_PRECONDITION&&t.message===wc){e.next=2;break}throw t;case 2:qu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}var Cc=function(){function e(t){var n=this;un(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ln(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ku(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=tn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Tc(e){return"IndexedDbTransactionError"===e.name}var Ic=function(){function e(t,n){var r=this;un(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return ln(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function Nc(e){return null==e}function Pc(e){return 0===e&&1/e==-1/0}function Rc(e){return"number"==typeof e&&Number.isInteger(e)&&!Pc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ic.ae=-1;var Ac=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Oc=([].concat(sn(Ac),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Dc=Oc;[].concat(Dc,["indexConfiguration","indexState","indexEntries"]);function Lc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var jc=function(){function e(t,n){un(this,e),this.comparator=t,this.root=n||Vc.EMPTY}return ln(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Uc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Uc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Uc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Uc(this.root,e,this.comparator,!0)}}]),e}(),Uc=function(){function e(t,n,r,i){un(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ln(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vc=function(){function e(t,n,r,i,a){un(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ln(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ku();if(this.right.isRed())throw Ku();var e=this.left.check();if(e!==this.right.check())throw Ku();return e+(this.isRed()?0:1)}}]),e}();Vc.EMPTY=null,Vc.RED=!0,Vc.BLACK=!1,Vc.EMPTY=new(function(){function e(){un(this,e),this.size=0}return ln(e,[{key:"key",get:function(){throw Ku()}},{key:"value",get:function(){throw Ku()}},{key:"color",get:function(){throw Ku()}},{key:"left",get:function(){throw Ku()}},{key:"right",get:function(){throw Ku()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zc=function(){function e(t){un(this,e),this.comparator=t,this.data=new jc(this.comparator)}return ln(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),qc=function(){function e(t){un(this,e),this.iter=t}return ln(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Bc=function(){function e(t){un(this,e),this.fields=t,t.sort(vc.comparator)}return ln(e,[{key:"unionWith",value:function(t){var n,r=new zc(vc.comparator),i=tn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=tn(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=tn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return cc(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Wc=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return ln(n)}(en(Error));var Hc=function(e){function t(e){un(this,t),this.binaryString=e}return ln(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return function(e){return btoa(e)}(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return uc(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wc("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Hc.EMPTY_BYTE_STRING=new Hc("");var Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gc(e){if(Gu(!!e),"string"==typeof e){var t=0,n=Kc.exec(e);if(Gu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Qc(e.seconds),nanos:Qc(e.nanos)}}function Qc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $c(e){return"string"==typeof e?Hc.fromBase64String(e):Hc.fromUint8Array(e)}function Yc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xc(e){var t=e.mapValue.fields.__previous_value__;return Yc(t)?Xc(t):t}function Jc(e){var t=Gc(e.mapValue.fields.__local_write_time__.timestampValue);return new lc(t.seconds,t.nanos)}var Zc=ln((function e(t,n,r,i,a,o,s,u,c){un(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),el=function(){function e(t,n){un(this,e),this.projectId=t,this.database=n||"(default)"}return ln(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yc(e)?4:vl(e)?9007199254740991:10:Ku()}function rl(e,t){if(e===t)return!0;var n=nl(e);if(n!==nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jc(e).isEqual(Jc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gc(e.timestampValue),r=Gc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $c(e.bytesValue).isEqual($c(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qc(e.geoPointValue.latitude)===Qc(t.geoPointValue.latitude)&&Qc(e.geoPointValue.longitude)===Qc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qc(e.integerValue)===Qc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Qc(e.doubleValue),r=Qc(t.doubleValue);return n===r?Pc(n)===Pc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return cc(e.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Lc(n)!==Lc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rl(n[i],r[i])))return!1;return!0}(e,t);default:return Ku()}}function il(e,t){return void 0!==(e.values||[]).find((function(e){return rl(e,t)}))}function al(e,t){if(e===t)return 0;var n=nl(e),r=nl(t);if(n!==r)return uc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uc(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Qc(e.integerValue||e.doubleValue),r=Qc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ol(e.timestampValue,t.timestampValue);case 4:return ol(Jc(e),Jc(t));case 5:return uc(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$c(e),r=$c(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=uc(n[i],r[i]);if(0!==a)return a}return uc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=uc(Qc(e.latitude),Qc(t.latitude));return 0!==n?n:uc(Qc(e.longitude),Qc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=al(n[i],r[i]);if(a)return a}return uc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===tl.mapValue&&t===tl.mapValue)return 0;if(e===tl.mapValue)return 1;if(t===tl.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=uc(r[o],a[o]);if(0!==s)return s;var u=al(n[r[o]],i[a[o]]);if(0!==u)return u}return uc(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ku()}}function ol(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return uc(e,t);var n=Gc(e),r=Gc(t),i=uc(n.seconds,r.seconds);return 0!==i?i:uc(n.nanos,r.nanos)}function sl(e){return ul(e)}function ul(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $c(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return mc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=tn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ul(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=tn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ul(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ku()}function cl(e){return!!e&&"integerValue"in e}function ll(e){return!!e&&"arrayValue"in e}function hl(e){return!!e&&"nullValue"in e}function fl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dl(e){return!!e&&"mapValue"in e}function pl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Mc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pl(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pl(e.arrayValue.values[r]);return n}return Object.assign({},e)}function vl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var ml=function(){function e(t){un(this,e),this.value=t}return ln(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dl(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}},{key:"setAll",value:function(e){var t=this,n=vc.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pl(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Mc(t,(function(t,n){return e[t]=n}));var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pl(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function yl(e){var t=[];return Mc(e.fields,(function(e,n){var r=new vc([e]);if(dl(n)){var i=yl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=tn(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Bc(t)}var gl=function(){function e(t,n,r,i,a,o,s){un(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return ln(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(hc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ml.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ml.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=hc.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,hc.min(),hc.min(),hc.min(),ml.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,hc.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,hc.min(),hc.min(),ml.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,hc.min(),hc.min(),ml.empty(),2)}}]),e}(),kl=ln((function e(t,n){un(this,e),this.position=t,this.inclusive=n}));function _l(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?mc.comparator(mc.fromName(o.referenceValue),n.key):al(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rl(e.position[n],t.position[n]))return!1;return!0}var wl=ln((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";un(this,e),this.field=t,this.dir=n}));function El(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Sl=ln((function e(){un(this,e)})),xl=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a;return un(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ln(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(al(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(al(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ku()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ol(e,t,r):"array-contains"===t?new Fl(e,r):"in"===t?new jl(e,r):"not-in"===t?new Ul(e,r):"array-contains-any"===t?new Vl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Dl(e,n):new Ll(e,n)}}]),n}(Sl),Cl=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return ln(n,[{key:"matches",value:function(e){return Tl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=tn(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Sl);function Tl(e){return"and"===e.op}function Il(e){return Nl(e)&&Tl(e)}function Nl(e){var t,n=tn(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Cl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Pl(e){if(e instanceof xl)return e.field.canonicalString()+e.op.toString()+sl(e.value);if(Il(e))return e.filters.map((function(e){return Pl(e)})).join(",");var t=e.filters.map((function(e){return Pl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Rl(e,t){return e instanceof xl?function(e,t){return t instanceof xl&&e.op===t.op&&e.field.isEqual(t.field)&&rl(e.value,t.value)}(e,t):e instanceof Cl?function(e,t){return t instanceof Cl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Rl(n,t.filters[r])}),!0)}(e,t):void Ku()}function Al(e){return e instanceof xl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(sl(e.value))}(e):e instanceof Cl?function(e){return e.op.toString()+" {"+e.getFilters().map(Al).join(" ,")+"}"}(e):"Filter"}var Ol=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a;return un(this,n),(a=t.call(this,e,r,i)).key=mc.fromName(i.referenceValue),a}return ln(n,[{key:"matches",value:function(e){var t=mc.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(xl),Dl=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this,e,"in",r)).keys=Ml("in",r),i}return ln(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xl),Ll=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this,e,"not-in",r)).keys=Ml("not-in",r),i}return ln(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xl);function Ml(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return mc.fromName(e.referenceValue)}))}var Fl=function(e){nn(n,e);var t=an(n);function n(e,r){return un(this,n),t.call(this,e,"array-contains",r)}return ln(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ll(t)&&il(t.arrayValue,this.value)}}]),n}(xl),jl=function(e){nn(n,e);var t=an(n);function n(e,r){return un(this,n),t.call(this,e,"in",r)}return ln(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&il(this.value.arrayValue,t)}}]),n}(xl),Ul=function(e){nn(n,e);var t=an(n);function n(e,r){return un(this,n),t.call(this,e,"not-in",r)}return ln(n,[{key:"matches",value:function(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!il(this.value.arrayValue,t)}}]),n}(xl),Vl=function(e){nn(n,e);var t=an(n);function n(e,r){return un(this,n),t.call(this,e,"array-contains-any",r)}return ln(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ll(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return il(t.value.arrayValue,e)}))}}]),n}(xl),zl=ln((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;un(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.he=null}));function ql(e){return new zl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bl(e){var t=Qu(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Pl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Nc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return sl(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return sl(e)})).join(",")),t.he=n}return t.he}function Wl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!El(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Rl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bl(e.startAt,t.startAt)&&bl(e.endAt,t.endAt)}function Hl(e){return mc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Kl=ln((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;un(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function Gl(e,t,n,r,i,a,o,s){return new Kl(e,t,n,r,i,a,o,s)}function Ql(e){return new Kl(e)}function $l(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xl(e){var t,n=tn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Jl(e){return null!==e.collectionGroup}function Zl(e){var t=Qu(e);if(null===t.Pe){t.Pe=[];var n=Xl(t),r=Yl(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new wl(n)),t.Pe.push(new wl(vc.keyField(),"asc"));else{var i,a=!1,o=tn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.Pe.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new wl(vc.keyField(),u))}}}return t.Pe}function eh(e){var t=Qu(e);if(!t.Ie)if("F"===t.limitType)t.Ie=ql(t.path,t.collectionGroup,Zl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=tn(Zl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new wl(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new kl(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new kl(t.startAt.position,t.startAt.inclusive):null;t.Ie=ql(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.Ie}function th(e,t,n){return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nh(e,t){return Wl(eh(e),eh(t))&&e.limitType===t.limitType}function rh(e){return"".concat(Bl(eh(e)),"|lt:").concat(e.limitType)}function ih(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Al(e)})).join(", "),"]")),Nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return sl(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return sl(e)})).join(",")),"Target(".concat(t,")")}(eh(e)),"; limitType=").concat(e.limitType,")")}function ah(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=tn(Zl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=tn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=_l(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zl(e),t))&&!(e.endAt&&!function(e,t,n){var r=_l(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zl(e),t))}(e,t)}function oh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sh(e){return function(t,n){var r,i=!1,a=tn(Zl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=uh(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function uh(e,t,n){var r=e.field.isKeyField()?mc.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?al(r,i):Ku()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ku()}}var ch=function(){function e(t,n){un(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ln(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=Zt(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Mc(this.inner,(function(t,n){var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=Zt(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Fc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),lh=new jc(mc.comparator);function hh(){return lh}var fh=new jc(mc.comparator);function dh(){for(var e=fh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ph(e){var t=fh;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function vh(){return yh()}function mh(){return yh()}function yh(){return new ch((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var gh=new jc(mc.comparator),kh=new zc(mc.comparator);function _h(){for(var e=kh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var bh=new zc(uc);function wh(){return bh}function Eh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(t)?"-0":t}}function Sh(e){return{integerValue:""+e}}function xh(e,t){return Rc(t)?Sh(t):Eh(e,t)}var Ch=ln((function e(){un(this,e),this._=void 0}));function Th(e,t,n){return e instanceof Ph?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yc(t)&&(t=Xc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Rh?Ah(e,t):e instanceof Oh?Dh(e,t):function(e,t){var n=Nh(e,t),r=Mh(n)+Mh(e.Te);return cl(n)&&cl(e.Te)?Sh(r):Eh(e.serializer,r)}(e,t)}function Ih(e,t,n){return e instanceof Rh?Ah(e,t):e instanceof Oh?Dh(e,t):n}function Nh(e,t){return e instanceof Lh?function(e){return cl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Ph=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n)}(Ch),Rh=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).elements=e,r}return ln(n)}(Ch);function Ah(e,t){var n,r=Fh(t),i=tn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return rl(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Oh=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).elements=e,r}return ln(n)}(Ch);function Dh(e,t){var n,r=Fh(t),i=tn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!rl(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Lh=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return ln(n)}(Ch);function Mh(e){return Qc(e.integerValue||e.doubleValue)}function Fh(e){return ll(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jh=ln((function e(t,n){un(this,e),this.version=t,this.transformResults=n})),Uh=function(){function e(t,n){un(this,e),this.updateTime=t,this.exists=n}return ln(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Vh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zh=ln((function e(){un(this,e)}));function qh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ef(e.key,Uh.none()):new Gh(e.key,e.data,Uh.none());var n,r=e.data,i=ml.empty(),a=new zc(vc.comparator),o=tn(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Qh(e.key,i,new Bc(a.toArray()),Uh.none())}function Bh(e,t,n){e instanceof Gh?function(e,t,n){var r=e.value.clone(),i=Yh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qh?function(e,t,n){if(Vh(e.precondition,t)){var r=Yh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($h(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wh(e,t,n,r){return e instanceof Gh?function(e,t,n,r){if(!Vh(e.precondition,t))return n;var i=e.value.clone(),a=Xh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qh?function(e,t,n,r){if(!Vh(e.precondition,t))return n;var i=Xh(e.fieldTransforms,r,t),a=t.data;return a.setAll($h(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Vh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hh(e,t){var n,r=null,i=tn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Nh(a.transform,o||null);null!=s&&(null===r&&(r=ml.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Kh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&cc(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rh&&t instanceof Rh||e instanceof Oh&&t instanceof Oh?cc(e.elements,t.elements,rl):e instanceof Lh&&t instanceof Lh?rl(e.Te,t.Te):e instanceof Ph&&t instanceof Ph}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Gh=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return un(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ln(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zh),Qh=function(e){nn(n,e);var t=an(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return un(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return ln(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(zh);function $h(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Yh(e,t,n){var r=new Map;Gu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ih(o,s,n[i]))}return r}function Xh(e,t,n){var r,i=new Map,a=tn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Th(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Jh,Zh,ef=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ln(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zh),tf=function(e){nn(n,e);var t=an(n);function n(e,r){var i;return un(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ln(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zh),nf=function(){function e(t,n,r,i){un(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ln(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=tn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Wh(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=tn(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Wh(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=mh();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=qh(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(hc.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),_h())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,(function(e,t){return Kh(e,t)}))&&cc(this.baseMutations,e.baseMutations,(function(e,t){return Kh(e,t)}))}}]),e}(),rf=function(){function e(t,n,r,i){un(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ln(e,null,[{key:"from",value:function(t,n,r){Gu(t.mutations.length===r.length);for(var i=gh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),af=function(){function e(t,n){un(this,e),this.largestBatchId=t,this.mutation=n}return ln(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),of=ln((function e(t,n){un(this,e),this.count=t,this.unchangedNames=n}));function sf(e){switch(e){default:return Ku();case $u.CANCELLED:case $u.UNKNOWN:case $u.DEADLINE_EXCEEDED:case $u.RESOURCE_EXHAUSTED:case $u.INTERNAL:case $u.UNAVAILABLE:case $u.UNAUTHENTICATED:return!1;case $u.INVALID_ARGUMENT:case $u.NOT_FOUND:case $u.ALREADY_EXISTS:case $u.PERMISSION_DENIED:case $u.FAILED_PRECONDITION:case $u.ABORTED:case $u.OUT_OF_RANGE:case $u.UNIMPLEMENTED:case $u.DATA_LOSS:return!0}}function uf(e){if(void 0===e)return Bu("GRPC error has no .code"),$u.UNKNOWN;switch(e){case Jh.OK:return $u.OK;case Jh.CANCELLED:return $u.CANCELLED;case Jh.UNKNOWN:return $u.UNKNOWN;case Jh.DEADLINE_EXCEEDED:return $u.DEADLINE_EXCEEDED;case Jh.RESOURCE_EXHAUSTED:return $u.RESOURCE_EXHAUSTED;case Jh.INTERNAL:return $u.INTERNAL;case Jh.UNAVAILABLE:return $u.UNAVAILABLE;case Jh.UNAUTHENTICATED:return $u.UNAUTHENTICATED;case Jh.INVALID_ARGUMENT:return $u.INVALID_ARGUMENT;case Jh.NOT_FOUND:return $u.NOT_FOUND;case Jh.ALREADY_EXISTS:return $u.ALREADY_EXISTS;case Jh.PERMISSION_DENIED:return $u.PERMISSION_DENIED;case Jh.FAILED_PRECONDITION:return $u.FAILED_PRECONDITION;case Jh.ABORTED:return $u.ABORTED;case Jh.OUT_OF_RANGE:return $u.OUT_OF_RANGE;case Jh.UNIMPLEMENTED:return $u.UNIMPLEMENTED;case Jh.DATA_LOSS:return $u.DATA_LOSS;default:return Ku()}}(Zh=Jh||(Jh={}))[Zh.OK=0]="OK",Zh[Zh.CANCELLED=1]="CANCELLED",Zh[Zh.UNKNOWN=2]="UNKNOWN",Zh[Zh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zh[Zh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zh[Zh.NOT_FOUND=5]="NOT_FOUND",Zh[Zh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zh[Zh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zh[Zh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zh[Zh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zh[Zh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zh[Zh.ABORTED=10]="ABORTED",Zh[Zh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zh[Zh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zh[Zh.INTERNAL=13]="INTERNAL",Zh[Zh.UNAVAILABLE=14]="UNAVAILABLE",Zh[Zh.DATA_LOSS=15]="DATA_LOSS";var cf=function(){function e(){un(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return ln(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return lf}},{key:"getOrCreateInstance",value:function(){return null===lf&&(lf=new e),lf}}]),e}(),lf=null;function hf(){return new TextEncoder}var ff=new Mu([4294967295,4294967295],0);function df(e){var t=hf().encode(e),n=new Lu;return n.update(t),new Uint8Array(n.digest())}function pf(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Mu([n,r],0),new Mu([i,a],0)]}var vf=function(){function e(t,n,r){if(un(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mf("Invalid padding: ".concat(n));if(r<0)throw new mf("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new mf("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new mf("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=Mu.fromNumber(this.de)}return ln(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(Mu.fromNumber(n)));return 1===r.compare(ff)&&(r=new Mu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=Zt(pf(df(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=Zt(pf(df(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),mf=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return ln(n)}(en(Error)),yf=function(){function e(t,n,r,i,a){un(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ln(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,gf.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(hc.min(),i,new jc(uc),hh(),_h())}}]),e}(),gf=function(){function e(t,n,r,i,a){un(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ln(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,_h(),_h(),_h())}}]),e}(),kf=ln((function e(t,n,r,i){un(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),_f=ln((function e(t,n){un(this,e),this.targetId=t,this.pe=n})),bf=ln((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;un(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),wf=function(){function e(){un(this,e),this.ye=0,this.we=xf(),this.Se=Hc.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return ln(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=_h(),t=_h(),n=_h();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ku()}})),new gf(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=xf()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),Ef=function(){function e(t){un(this,e),this.qe=t,this.Qe=new Map,this.Ke=hh(),this.$e=Sf(),this.Ue=new jc(uc)}return ln(e,[{key:"We",value:function(e){var t,n=tn(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(s){n.e(s)}finally{n.f()}var i,a=tn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(s){a.e(s)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:Ku()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(Hl(o))if(0===i){var s=new mc(o.path);this.ze(r,s,gl.newNoDocument(s,hc.min()))}else Gu(1===i);else{var u=this.et(r);if(u!==i){var c=this.tt(e,u);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=cf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,s,u,c,l={localCacheCount:n,existenceFilterCount:r.count},h=r.unchangedNames;return h&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,u,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,s,u=i.bits,c=u.bitmap,l=void 0===c?"":c,h=u.padding,f=void 0===h?0:h,d=i.hashCount,p=void 0===d?0:d;try{o=$c(l).toUint8Array()}catch(e){if(e instanceof Wc)return Wu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{s=new vf(o,f,p)}catch(e){return Wu(e instanceof mf?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return s.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===s.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&Hl(a.target)){var o=new mc(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,gl.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=_h();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new yf(e,n,this.Ue,this.Ke,r);return this.Ke=hh(),this.$e=Sf(),this.Ue=new jc(uc),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new wf,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new zc(uc),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||qu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new wf),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Sf(){return new jc(mc.comparator)}function xf(){return new jc(mc.comparator)}var Cf={asc:"ASCENDING",desc:"DESCENDING"},Tf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},If={and:"AND",or:"OR"},Nf=ln((function e(t,n){un(this,e),this.databaseId=t,this.useProto3Json=n}));function Pf(e,t){return e.useProto3Json||Nc(t)?t:{value:t}}function Rf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Af(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Of(e,t){return Rf(e,t.toTimestamp())}function Df(e){return Gu(!!e),hc.fromTimestamp(function(e){var t=Gc(e);return new lc(t.seconds,t.nanos)}(e))}function Lf(e,t){return function(e){return new dc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Mf(e){var t=dc.fromString(e);return Gu(nd(t)),t}function Ff(e,t){return Lf(e.databaseId,t.path)}function jf(e,t){var n=Mf(t);if(n.get(1)!==e.databaseId.projectId)throw new Yu($u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yu($u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mc(qf(n))}function Uf(e,t){return Lf(e.databaseId,t)}function Vf(e){var t=Mf(e);return 4===t.length?dc.emptyPath():qf(t)}function zf(e){return new dc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qf(e){return Gu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bf(e,t,n){return{name:Ff(e,t),fields:n.value.mapValue.fields}}function Wf(e,t){var n;if(t instanceof Gh)n={update:Bf(e,t.key,t.value)};else if(t instanceof ef)n={delete:Ff(e,t.key)};else if(t instanceof Qh)n={update:Bf(e,t.key,t.data),updateMask:td(t.fieldMask)};else{if(!(t instanceof tf))return Ku();n={verify:Ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ph)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Oh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lh)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Ku()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Of(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ku()}(e,t.precondition)),n}function Hf(e,t){return{documents:[Uf(e,t.path)]}}function Kf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ed(Cl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Jf(e.field),direction:$f(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Pf(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Gf(e){var t=Vf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Gu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Qf(e);return t instanceof Cl&&Il(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new wl(Zf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return Nc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new kl(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new kl(n,t)}(n.endAt)),Gl(t,i,s,o,u,"F",c,l)}function Qf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zf(e.unaryFilter.field);return xl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zf(e.unaryFilter.field);return xl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zf(e.unaryFilter.field);return xl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zf(e.unaryFilter.field);return xl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ku()}}(e):void 0!==e.fieldFilter?function(e){return xl.create(Zf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ku()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Cl.create(e.compositeFilter.filters.map((function(e){return Qf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ku()}}(e.compositeFilter.op))}(e):Ku()}function $f(e){return Cf[e]}function Yf(e){return Tf[e]}function Xf(e){return If[e]}function Jf(e){return{fieldPath:e.canonicalString()}}function Zf(e){return vc.fromServerFormat(e.fieldPath)}function ed(e){return e instanceof xl?function(e){if("=="===e.op){if(fl(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NAN"}};if(hl(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fl(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NAN"}};if(hl(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jf(e.field),op:Yf(e.op),value:e.value}}}(e):e instanceof Cl?function(e){var t=e.getFilters().map((function(e){return ed(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Xf(e.op),filters:t}}}(e):Ku()}function td(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var rd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:hc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hc.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;un(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return ln(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),id=ln((function e(t){un(this,e),this.ct=t}));function ad(e){var t=Gf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?th(t,t.limit,"L"):t}var od=function(){function e(){un(this,e)}return ln(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Qc(e.integerValue));else if("doubleValue"in e){var n=Qc(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Pc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($c(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?vl(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ku()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),mc.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();od.bt=new od;var sd=function(){function e(){un(this,e),this.sn=new ud}return ln(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),Cc.resolve()}},{key:"getCollectionParents",value:function(e,t){return Cc.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Cc.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Cc.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Cc.resolve(null)}},{key:"getIndexType",value:function(e,t){return Cc.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Cc.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Cc.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Cc.resolve(_c.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Cc.resolve(_c.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Cc.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Cc.resolve()}}]),e}(),ud=function(){function e(){un(this,e),this.index={}}return ln(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zc(dc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zc(dc.comparator)).toArray()}}]),e}();new Uint8Array(0);var cd=function(){function e(t,n,r){un(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ln(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();cd.DEFAULT_COLLECTION_PERCENTILE=10,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cd.DEFAULT=new cd(41943040,cd.DEFAULT_COLLECTION_PERCENTILE,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cd.DISABLED=new cd(-1,0,0);var ld=function(){function e(t){un(this,e),this.Mn=t}return ln(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}();var hd=function(){function e(){un(this,e),this.changes=new ch((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ln(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,gl.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cc.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var fd=ln((function e(t,n){un(this,e),this.overlayedDocument=t,this.mutatedFields=n})),dd=function(){function e(t,n,r,i){un(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ln(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Wh(r.mutation,e,Bc.empty(),lc.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,_h()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_h(),i=vh();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=dh();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=vh();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,_h())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=hh(),a=yh(),o=yh();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Qh)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Wh(o.mutation,t,o.mutation.getFieldMask(),lc.now())):a.set(t.key,Bc.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new fd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=yh(),i=new jc((function(e,t){return e-t})),a=_h();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=tn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Bc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||_h()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=mh();c.forEach((function(e){if(!a.has(e)){var n=qh(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Cc.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return mc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Cc.resolve(vh()),s=-1,u=a;return o.next((function(t){return Cc.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Cc.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,_h())})).next((function(e){return{batchId:s,changes:ph(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new mc(t)).next((function(e){var t=dh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=dh();return this.indexManager.getCollectionParents(e,i).next((function(o){return Cc.forEach(o,(function(o){var s=function(e,t){return new Kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,gl.newInvalidDocument(r)))}));var n=dh();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Wh(a.mutation,i,Bc.empty(),lc.now()),ah(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),pd=function(){function e(t){un(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return ln(e,[{key:"getBundleMetadata",value:function(e,t){return Cc.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Df(e.createTime)}}(t)),Cc.resolve()}},{key:"getNamedQuery",value:function(e,t){return Cc.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:ad(e.bundledQuery),readTime:Df(e.readTime)}}(t)),Cc.resolve()}}]),e}(),vd=function(){function e(){un(this,e),this.overlays=new jc(mc.comparator),this.cr=new Map}return ln(e,[{key:"getOverlay",value:function(e,t){return Cc.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=vh();return Cc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),Cc.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),Cc.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=vh(),i=t.length+1,a=new mc(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Cc.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new jc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=vh(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=vh(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Cc.resolve(u)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new af(t,n));var a=this.cr.get(t);void 0===a&&(a=_h(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),md=function(){function e(){un(this,e),this.lr=new zc(yd.hr),this.Pr=new zc(yd.Ir)}return ln(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yd(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new yd(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new mc(new dc([])),r=new yd(n,e),i=new yd(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new mc(new dc([])),n=new yd(t,e),r=new yd(t,e+1),i=_h();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new yd(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yd=function(){function e(t,n){un(this,e),this.key=t,this.mr=n}return ln(e,null,[{key:"hr",value:function(e,t){return mc.comparator(e.key,t.key)||uc(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return uc(e.mr,t.mr)||mc.comparator(e.key,t.key)}}]),e}(),gd=function(){function e(t,n){un(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new zc(yd.hr)}return ln(e,[{key:"checkEmpty",value:function(e){return Cc.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new nf(i,t,n,r);this.mutationQueue.push(a);var o,s=tn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.pr=this.pr.add(new yd(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Cc.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Cc.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return Cc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Cc.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return Cc.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new yd(t,0),i=new yd(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),Cc.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zc(uc);return t.forEach((function(e){var t=new yd(e,0),i=new yd(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),Cc.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;mc.isDocumentKey(i)||(i=i.child(""));var a=new yd(new mc(i),0),o=new zc(uc);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),Cc.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Gu(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return Cc.forEach(t.mutations,(function(i){var a=new yd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yd(t,0),r=this.pr.firstAfterOrEqual(n);return Cc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Cc.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),kd=function(){function e(t){un(this,e),this.Dr=t,this.docs=new jc(mc.comparator),this.size=0}return ln(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Cc.resolve(n?n.document.mutableCopy():gl.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=hh();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gl.newInvalidDocument(e))})),Cc.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=hh(),a=t.path,o=new mc(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||bc(kc(l),n)<=0||(r.has(l.key)||ah(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Cc.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ku()}},{key:"vr",value:function(e,t){return Cc.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _d(this)}},{key:"getSize",value:function(e){return Cc.resolve(this.size)}}]),e}(),_d=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).sr=e,r}return ln(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),Cc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(hd),bd=function(){function e(t){un(this,e),this.persistence=t,this.Cr=new ch((function(e){return Bl(e)}),Wl),this.lastRemoteSnapshotVersion=hc.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new md,this.targetCount=0,this.Or=ld.xn()}return ln(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),Cc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Cc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Cc.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),Cc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),Cc.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new ld(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,Cc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),Cc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,Cc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Cc.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Cc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return Cc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),Cc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Cc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),Cc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return Cc.resolve(n)}},{key:"containsKey",value:function(e,t){return Cc.resolve(this.Mr.containsKey(t))}}]),e}(),wd=function(){function e(t,n){var r=this;un(this,e),this.Nr={},this.overlays={},this.Br=new Ic(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new bd(this),this.indexManager=new sd,this.remoteDocumentCache=function(e){return new kd(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new id(n),this.Qr=new pd(this.serializer)}return ln(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new gd(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;qu("MemoryPersistence","Starting transaction:",e);var i=new Ed(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return Cc.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ed=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ln(n)}(Ec),Sd=function(){function e(t){un(this,e),this.persistence=t,this.Wr=new md,this.Gr=null}return ln(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw Ku()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),Cc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),Cc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),Cc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cc.forEach(this.jr,(function(r){var i=mc.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,hc.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return Cc.or([function(){return Cc.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}();var xd=function(){function e(t,n,r,i){un(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return ln(e,null,[{key:"qi",value:function(t,n){var r,i=_h(),a=_h(),o=tn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Cd=function(){function e(){un(this,e),this.Qi=!1}return ln(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if($l(t))return Cc.resolve(null);var r=eh(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=th(t,null,"F"),r=eh(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=_h.apply(void 0,sn(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,th(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return $l(t)||r.isEqual(hc.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(zu()<=ur.DEBUG&&qu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ih(t)),i.ji(e,o,t,gc(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new zc(sh(e));return t.forEach((function(t,r){ah(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return zu()<=ur.DEBUG&&qu("QueryEngine","Using full collection scan to execute query:",ih(t)),this.Ki.getDocumentsMatchingQuery(e,t,_c.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Td=function(){function e(t,n,r,i){un(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new jc(uc),this.Yi=new ch((function(e){return Bl(e)}),Wl),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return ln(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dd(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Id(e,t,n,r){return new Td(e,t,n,r)}function Nd(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=_h(),u=tn(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=tn(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=tn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=tn(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Rd(e,t){var n=Qu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Cc.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Gu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=_h(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Ad(e){var t=Qu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function Od(e,t){var n=Qu(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Hc.EMPTY_BYTE_STRING,hc.min()).withLastLimboFreeSnapshotVersion(hc.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var s=hh(),u=_h();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Dd(e,a,t.documentUpdates).next((function(e){s=e.ns,u=e.rs}))),!r.isEqual(hc.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Cc.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Dd(e,t,n){var r=_h(),i=_h();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=hh();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(hc.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):qu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function Ld(e,t){var n=Qu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Md(e,t){var n=Qu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,Cc.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new rd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Fd(e,t,n){return jd.apply(this,arguments)}function jd(){return jd=Bt(zt().mark((function e(t,n,r){var i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Qu(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Tc(e.t1)){e.next=12;break}throw e.t1;case 12:qu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),jd.apply(this,arguments)}function Ud(e,t,n){var r=Qu(e),i=hc.min(),a=_h();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Qu(e),i=r.Yi.get(n);return void 0!==i?Cc.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,eh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:hc.min(),n?a:_h())})).next((function(e){return Vd(r,oh(t),e),{documents:e,ss:a}}))}))}function Vd(e,t,n){var r=e.Zi.get(t)||hc.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}var zd=function(){function e(){un(this,e),this.activeTargetIds=wh()}return ln(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),qd=function(){function e(){un(this,e),this.Hs=new zd,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ln(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new zd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Bd=function(){function e(){un(this,e)}return ln(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Wd=function(){function e(){var t=this;un(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return ln(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){qu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=tn(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){qu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=tn(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Hd=null;function Kd(){return null===Hd?Hd=268435456+Math.round(2147483648*Math.random()):Hd++,"0x"+Hd.toString(16)}var Gd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Qd=function(){function e(t){un(this,e),this.so=t.so,this.oo=t.oo}return ln(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),$d="WebChannelConnection",Yd=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return ln(n,[{key:"fo",value:function(e,t,n,r){var i=Kd();return new Promise((function(a,o){var s=new Du;s.setWithCredentials(!0),s.listenOnce(Nu.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Iu.NO_ERROR:var t=s.getResponseJson();qu($d,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Iu.TIMEOUT:qu($d,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Yu($u.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:var n=s.getStatus();if(qu($d,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values($u).indexOf(t)>=0?t:$u.UNKNOWN}(u.status);o(new Yu(c,u.message))}else o(new Yu($u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Yu($u.UNAVAILABLE,"Connection failed."));break;default:Ku()}}finally{qu($d,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);qu($d,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Kd(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Cu(),o=Tu(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Au({})),this.mo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");qu($d,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new Qd({so:function(t){f?qu($d,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(qu($d,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),qu($d,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ou.EventType.OPEN,(function(){f||qu($d,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ou.EventType.CLOSE,(function(){f||(f=!0,qu($d,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,Ou.EventType.ERROR,(function(t){f||(f=!0,Wu($d,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new Yu($u.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ou.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Gu(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){qu($d,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Jh[e];if(void 0!==t)return uf(t)}(s),c=o.message;void 0===u&&(u=$u.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.Po(new Yu(u,c)),l.close()}else qu($d,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,Pu.STAT_EVENT,(function(t){t.stat===Ru.PROXY?qu($d,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ru.NOPROXY&&qu($d,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){un(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.To=n+"://"+t.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ln(e,[{key:"Ao",get:function(){return!1}},{key:"Ro",value:function(e,t,n,r,i){var a=Kd(),o=this.Vo(e,t);qu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.mo(s,r,i),this.fo(e,o,s,n).then((function(t){return qu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Wu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"po",value:function(e,t,n,r,i,a){return this.Ro(e,t,n,r,i)}},{key:"mo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Vo",value:function(e,t){var n=Gd[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function Xd(){return"undefined"!=typeof document?document:null}function Jd(e){return new Nf(e,!0)}var Zd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;un(this,e),this.ii=t,this.timerId=n,this.wo=r,this.So=i,this.bo=a,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}return ln(e,[{key:"reset",value:function(){this.Do=0}},{key:"Fo",value:function(){this.Do=this.bo}},{key:"Mo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&qu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Do," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}},{key:"Oo",value:function(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}},{key:"cancel",value:function(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"xo",value:function(){return(Math.random()-.5)*this.Do}}]),e}(),ep=function(){function e(t,n,r,i,a,o,s,u){un(this,e),this.ii=t,this.No=r,this.Bo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new Zd(t,n)}return ln(e,[{key:"Ko",value:function(){return 1===this.state||5===this.state||this.$o()}},{key:"$o",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Uo()}},{key:"stop",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.state=0,this.Qo.reset()}},{key:"Go",value:function(){var e=this;this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(function(){return e.zo()})))}},{key:"jo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$o()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.ko&&(this.ko.cancel(),this.ko=null)}},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"close",value:function(){var e=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==t?this.Qo.reset():n&&n.code===$u.RESOURCE_EXHAUSTED?(Bu(n.toString()),Bu("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===$u.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Zt(t,2),i=r[0],a=r[1];e.Lo===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new Yu($u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.e_(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.qo=n.ii.enqueueAfterDelay(n.Bo,1e4,(function(){return n.$o()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.e_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Uo",value:function(){var e=this;this.state=5,this.Qo.Mo(Bt(zt().mark((function t(){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"e_",value:function(e){return qu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Zo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Lo===e?n():(qu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),tp=function(e){nn(n,e);var t=an(n);function n(e,r,i,a,o,s){var u;return un(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return ln(n,[{key:"t_",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ku()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Gu(void 0===t||"string"==typeof t),Hc.fromBase64String(t||"")):(Gu(void 0===t||t instanceof Uint8Array),Hc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?$u.UNKNOWN:uf(e.code);return new Yu(t,e.message||"")}(o);n=new bf(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=jf(e,u.document.name),l=Df(u.document.updateTime),h=u.document.createTime?Df(u.document.createTime):hc.min(),f=new ml({mapValue:{fields:u.document.fields}}),d=gl.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new kf(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=jf(e,m.document),g=m.readTime?Df(m.readTime):hc.min(),k=gl.newNoDocument(y,g),_=m.removedTargetIds||[];n=new kf([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=jf(e,b.document),E=b.removedTargetIds||[];n=new kf([],E,w,null)}else{if(!("filter"in t))return Ku();t.filter;var S=t.filter;S.targetId;var x=S.count,C=void 0===x?0:x,T=S.unchangedNames,I=new of(C,T),N=S.targetId;n=new _f(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return hc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?hc.min():t.readTime?Df(t.readTime):hc.min()}(e);return this.listener.n_(t,n)}},{key:"r_",value:function(e){var t={};t.database=zf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Hl(r)?{documents:Hf(e,r)}:{query:Kf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Af(e,t.resumeToken);var i=Pf(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(hc.min())>0){n.readTime=Rf(e,t.snapshotVersion.toTimestamp());var a=Pf(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ku()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.jo(t)}},{key:"i_",value:function(e){var t={};t.database=zf(this.serializer),t.removeTarget=e,this.jo(t)}}]),n}(ep),np=function(e){nn(n,e);var t=an(n);function n(e,r,i,a,o,s){var u;return un(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.s_=!1,u}return ln(n,[{key:"o_",get:function(){return this.s_}},{key:"start",value:function(){this.s_=!1,this.lastStreamToken=void 0,Qt(Gt(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.s_&&this.__([])}},{key:"t_",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Gu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();var t=function(e,t){return e&&e.length>0?(Gu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Df(e.updateTime):Df(t);return n.isEqual(hc.min())&&(n=Df(t)),new jh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Df(e.commitTime);return this.listener.a_(n,t)}return Gu(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}},{key:"c_",value:function(){var e={};e.database=zf(this.serializer),this.jo(e)}},{key:"__",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Wf(t.serializer,e)}))};this.jo(n)}}]),n}(ep),rp=function(e){nn(n,e);var t=an(n);function n(e,r,i,a){var o;return un(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.l_=!1,o}return ln(n,[{key:"h_",value:function(){if(this.l_)throw new Yu($u.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Ro",value:function(e,t,n){var r=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Zt(i,2),o=a[0],s=a[1];return r.connection.Ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$u.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Yu($u.UNKNOWN,e.toString())}))}},{key:"po",value:function(e,t,n,r){var i=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Zt(a,2),s=o[0],u=o[1];return i.connection.po(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$u.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Yu($u.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.l_=!0}}]),n}(ln((function e(){un(this,e)})));var ip=function(){function e(t,n){un(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}return ln(e,[{key:"d_",value:function(){var e=this;0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.T_=null,e.R_("Backend didn't respond within 10 seconds."),e.A_("Offline"),Promise.resolve()})))}},{key:"V_",value:function(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.A_("Offline")))}},{key:"set",value:function(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}},{key:"A_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"R_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.E_?(Bu(t),this.E_=!1):qu("OnlineStateTracker",t)}},{key:"m_",value:function(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}]),e}(),ap=ln((function e(t,n,r,i,a){var o=this;un(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=a,this.w_.Ys((function(e){r.enqueueAndForget(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mp(o),!e.t0){e.next=5;break}return qu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Qu(t)).p_.add(4),e.next=4,up(n);case 4:return n.S_.set("Unknown"),n.p_.delete(4),e.next=8,op(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.S_=new ip(r,i)}));function op(e){return sp.apply(this,arguments)}function sp(){return sp=Bt(zt().mark((function e(t){var n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mp(t)){e.next=18;break}n=tn(t.y_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),sp.apply(this,arguments)}function up(e){return cp.apply(this,arguments)}function cp(){return cp=Bt(zt().mark((function e(t){var n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=tn(t.y_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),cp.apply(this,arguments)}function lp(e,t){var n=Qu(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),vp(n)?pp(n):Hp(n).$o()&&fp(n,t))}function hp(e,t){var n=Qu(e),r=Hp(n);n.g_.delete(t),r.$o()&&dp(n,t),0===n.g_.size&&(r.$o()?r.Go():mp(n)&&n.S_.set("Unknown"))}function fp(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(hc.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hp(e).r_(t)}function dp(e,t){e.b_.Be(t),Hp(e).i_(t)}function pp(e){e.b_=new Ef({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.g_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),Hp(e).start(),e.S_.d_()}function vp(e){return mp(e)&&!Hp(e).Ko()&&e.g_.size>0}function mp(e){return 0===Qu(e).p_.size}function yp(e){e.b_=void 0}function gp(e){return kp.apply(this,arguments)}function kp(){return kp=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.g_.forEach((function(e,n){fp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),kp.apply(this,arguments)}function _p(e,t){return bp.apply(this,arguments)}function bp(){return bp=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yp(t),vp(t)?(t.S_.V_(n),pp(t)):t.S_.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function wp(e,t,n){return Ep.apply(this,arguments)}function Ep(){return Ep=Bt(zt().mark((function e(t,n,r){var i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.S_.set("Online"),!(n instanceof bf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Bt(zt().mark((function e(t,n){var r,i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=tn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.g_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.g_.delete(o),t.b_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),qu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Sp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof kf?t.b_.We(n):n instanceof _f?t.b_.Ze(n):t.b_.je(n),r.isEqual(hc.min())){e.next=29;break}return e.prev=14,e.next=17,Ad(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.b_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.g_.get(r);i&&e.g_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.g_.get(t);if(r){e.g_.set(t,r.withResumeToken(Hc.EMPTY_BYTE_STRING,r.snapshotVersion)),dp(e,t);var i=new rd(r.target,t,n,r.sequenceNumber);fp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),qu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Sp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ep.apply(this,arguments)}function Sp(e,t,n){return xp.apply(this,arguments)}function xp(){return xp=Bt(zt().mark((function e(t,n,r){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tc(n)){e.next=2;break}throw n;case 2:return t.p_.add(1),e.next=5,up(t);case 5:t.S_.set("Offline"),r||(r=function(){return Ad(t.localStore)}),t.asyncQueue.enqueueRetryable(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.p_.delete(1),e.next=6,op(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Cp(e,t){return t().catch((function(n){return Sp(e,n,t)}))}function Tp(e){return Ip.apply(this,arguments)}function Ip(){return Ip=Bt(zt().mark((function e(t){var n,r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Qu(t),r=Kp(n),i=n.f_.length>0?n.f_[n.f_.length-1].batchId:-1;case 2:if(!Np(n)){e.next=19;break}return e.prev=3,e.next=6,Ld(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.f_.length&&r.Go(),e.abrupt("break",19);case 10:i=a.batchId,Pp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Sp(n,e.t0);case 17:e.next=2;break;case 19:Rp(n)&&Ap(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ip.apply(this,arguments)}function Np(e){return mp(e)&&e.f_.length<10}function Pp(e,t){e.f_.push(t);var n=Kp(e);n.$o()&&n.o_&&n.__(t.mutations)}function Rp(e){return mp(e)&&!Kp(e).Ko()&&e.f_.length>0}function Ap(e){Kp(e).start()}function Op(e){return Dp.apply(this,arguments)}function Dp(){return Dp=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Kp(t).c_();case 1:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Lp(e){return Mp.apply(this,arguments)}function Mp(){return Mp=Bt(zt().mark((function e(t){var n,r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Kp(t),r=tn(t.f_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.__(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e,t,n){return jp.apply(this,arguments)}function jp(){return jp=Bt(zt().mark((function e(t,n,r){var i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.f_.shift(),a=rf.from(i,n,r),e.next=3,Cp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Tp(t);case 5:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function Up(e,t){return Vp.apply(this,arguments)}function Vp(){return Vp=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Kp(t).o_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return sf(e)&&e!==$u.ABORTED}(n.code)){e.next=7;break}return r=t.f_.shift(),Kp(t).Wo(),e.next=5,Cp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Tp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Rp(t)&&Ap(t);case 5:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function zp(e,t){return qp.apply(this,arguments)}function qp(){return qp=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Qu(t)).asyncQueue.verifyOperationInProgress(),qu("RemoteStore","RemoteStore received new credentials"),i=mp(r),r.p_.add(3),e.next=6,up(r);case 6:return i&&r.S_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.p_.delete(3),e.next=12,op(r);case 12:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Bp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qu(t),!n){e.next=7;break}return r.p_.delete(2),e.next=5,op(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.p_.add(2),e.next=12,up(r);case 12:r.S_.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Hp(e){return e.D_||(e.D_=function(e,t,n){var r=Qu(e);return r.h_(),new tp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:gp.bind(null,e),uo:_p.bind(null,e),n_:wp.bind(null,e)}),e.y_.push(function(){var t=Bt(zt().mark((function t(n){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.D_.Wo(),vp(e)?pp(e):e.S_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.D_.stop();case 6:yp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.D_}function Kp(e){return e.v_||(e.v_=function(e,t,n){var r=Qu(e);return r.h_(),new np(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Op.bind(null,e),uo:Up.bind(null,e),u_:Lp.bind(null,e),a_:Fp.bind(null,e)}),e.y_.push(function(){var t=Bt(zt().mark((function t(n){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.v_.Wo(),t.next=4,Tp(e);case 4:t.next=9;break;case 6:return t.next=8,e.v_.stop();case 8:e.f_.length>0&&(qu("RemoteStore","Stopping write stream with ".concat(e.f_.length," pending writes")),e.f_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}var Gp=function(){function e(t,n,r,i,a){un(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ln(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yu($u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Qp(e,t){if(Bu("AsyncQueue","".concat(t,": ").concat(e)),Tc(e))return new Yu($u.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $p=function(){function e(t){un(this,e),this.comparator=t?function(e,n){return t(e,n)||mc.comparator(e.key,n.key)}:function(e,t){return mc.comparator(e.key,t.key)},this.keyedMap=dh(),this.sortedSet=new jc(this.comparator)}return ln(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Yp=function(){function e(){un(this,e),this.C_=new jc(mc.comparator)}return ln(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):Ku():this.C_=this.C_.insert(t,e)}},{key:"F_",value:function(){var e=[];return this.C_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Xp=function(){function e(t,n,r,i,a,o,s,u,c){un(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return ln(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,$p.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Jp=ln((function e(){un(this,e),this.M_=void 0,this.listeners=[]})),Zp=ln((function e(){un(this,e),this.queries=new ch((function(e){return rh(e)}),nh),this.onlineState="Unknown",this.x_=new Set}));function ev(e,t){return tv.apply(this,arguments)}function tv(){return tv=Bt(zt().mark((function e(t,n){var r,i,a,o,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Jp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.M_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Qp(e.t0,"Initialization of query '".concat(ih(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.O_(r.onlineState),o.M_&&n.N_(o.M_)&&ov(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),tv.apply(this,arguments)}function nv(e,t){return rv.apply(this,arguments)}function rv(){return rv=Bt(zt().mark((function e(t,n){var r,i,a,o,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),rv.apply(this,arguments)}function iv(e,t){var n,r=Qu(e),i=!1,a=tn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=tn(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.N_(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.M_=o}}}catch(h){a.e(h)}finally{a.f()}i&&ov(r)}function av(e,t,n){var r=Qu(e),i=r.queries.get(t);if(i){var a,o=tn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function ov(e){e.x_.forEach((function(e){e.next()}))}var sv=function(){function e(t,n,r){un(this,e),this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}return ln(e,[{key:"N_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=tn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Xp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.L_?this.q_(e)&&(this.B_.next(e),a=!0):this.Q_(e,this.onlineState)&&(this.K_(e),a=!0),this.k_=e,a}},{key:"onError",value:function(e){this.B_.error(e)}},{key:"O_",value:function(e){this.onlineState=e;var t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}},{key:"Q_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"K_",value:function(e){e=Xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}]),e}();var uv=ln((function e(t){un(this,e),this.key=t})),cv=ln((function e(t){un(this,e),this.key=t})),lv=function(){function e(t,n){un(this,e),this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=_h(),this.mutatedKeys=_h(),this.ta=sh(t),this.na=new $p(this.ta)}return ln(e,[{key:"ra",get:function(){return this.Z_}},{key:"ia",value:function(e,t){var n=this,r=t?t.sa:new Yp,i=t?t.na:this.na,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=ah(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.oa(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.ta(h,u)>0||c&&n.ta(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{na:o,sa:r,zi:s,mutatedKeys:a}}},{key:"oa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;var a=e.sa.F_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ku()}};return n(e)-n(t)}(e.type,t.type)||r.ta(e.doc,t.doc)})),this._a(n);var o=t?this.aa():[],s=0===this.ea.size&&this.current?1:0,u=s!==this.X_;return this.X_=s,0!==a.length||u?{snapshot:new Xp(this.query,e.na,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}},{key:"O_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new Yp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}},{key:"ca",value:function(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}},{key:"_a",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Z_=t.Z_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Z_=t.Z_.delete(e)})),this.current=e.current)}},{key:"aa",value:function(){var e=this;if(!this.current)return[];var t=this.ea;this.ea=_h(),this.na.forEach((function(t){e.ca(t.key)&&(e.ea=e.ea.add(t.key))}));var n=[];return t.forEach((function(t){e.ea.has(t)||n.push(new cv(t))})),this.ea.forEach((function(e){t.has(e)||n.push(new uv(e))})),n}},{key:"la",value:function(e){this.Z_=e.ss,this.ea=_h();var t=this.ia(e.documents);return this.applyChanges(t,!0)}},{key:"ha",value:function(){return Xp.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}]),e}(),hv=ln((function e(t,n,r){un(this,e),this.query=t,this.targetId=n,this.view=r})),fv=ln((function e(t){un(this,e),this.key=t,this.Pa=!1})),dv=function(){function e(t,n,r,i,a,o){un(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new ch((function(e){return rh(e)}),nh),this.Ea=new Map,this.da=new Set,this.Aa=new jc(mc.comparator),this.Ra=new Map,this.Va=new md,this.ma={},this.fa=new Map,this.ga=ld.On(),this.onlineState="Unknown",this.pa=void 0}return ln(e,[{key:"isPrimaryClient",get:function(){return!0===this.pa}}]),e}();function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=Bt(zt().mark((function e(t,n){var r,i,a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bv(t),!(o=r.Ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ha(),e.next=15;break;case 6:return e.next=8,Md(r.localStore,eh(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,mv(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&lp(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function mv(e,t,n,r,i){return yv.apply(this,arguments)}function yv(){return yv=Bt(zt().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ya=function(e,n,r){return function(){var e=Bt(zt().mark((function e(t,n,r,i){var a,o,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ia(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Ud(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ia(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Lv(t,n.targetId,s.ua),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ud(t.localStore,n,!0);case 3:return o=e.sent,s=new lv(n,o.ss),u=s.ia(o.documents),c=gf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),Lv(t,r,l.ua),h=new hv(n,r,s),e.abrupt("return",(t.Ta.set(n,h),t.Ea.has(r)?t.Ea.get(r).push(n):t.Ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return kv=Bt(zt().mark((function e(t,n){var r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qu(t),i=r.Ta.get(n),!((a=r.Ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ea.set(i.targetId,a.filter((function(e){return!nh(e,n)}))),void r.Ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Fd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hp(r.remoteStore,i.targetId),Ov(r,i.targetId)})).catch(Sc);case 9:e.next=14;break;case 11:return Ov(r,i.targetId),e.next=14,Fd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function _v(e,t,n){return bv.apply(this,arguments)}function bv(){return bv=Bt(zt().mark((function e(t,n,r){var i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Qu(e),a=lc.now(),o=t.reduce((function(e,t){return e.add(t.key)}),_h());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=hh(),u=_h();return i.Xi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=tn(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Hh(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Qh(c.key,l,yl(l.value.mapValue),Uh.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ph(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ma[e.currentUser.toKey()];r||(r=new jc(uc)),r=r.insert(t,n),e.ma[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,jv(i,a.changes);case 9:return e.next=11,Tp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Qp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),bv.apply(this,arguments)}function wv(e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qu(t),e.prev=1,e.next=4,Od(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ra.get(t);n&&(Gu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Pa=!0:e.modifiedDocuments.size>0?Gu(n.Pa):e.removedDocuments.size>0&&(Gu(n.Pa),n.Pa=!1))})),e.next=8,jv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sc(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ev.apply(this,arguments)}function Sv(e,t,n){var r=Qu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ta.forEach((function(e,n){var r=n.view.O_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Qu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=tn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.O_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ov(n)}(r.eventManager,t),i.length&&r.Ia.n_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function xv(e,t,n){return Cv.apply(this,arguments)}function Cv(){return Cv=Bt(zt().mark((function e(t,n,r){var i,a,o,s,u,c;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Qu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ra.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new jc(mc.comparator)).insert(o,gl.newNoDocument(o,hc.min())),u=_h().add(o),c=new yf(hc.min(),new Map,new jc(uc),s,u),e.next=9,wv(i,c);case 9:i.Aa=i.Aa.remove(o),i.Ra.delete(n),Fv(i),e.next=16;break;case 14:return e.next=16,Fd(i.localStore,n,!1).then((function(){return Ov(i,n,r)})).catch(Sc);case 16:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Tv(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=Bt(zt().mark((function e(t,n){var r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qu(t),i=n.batch.batchId,e.prev=1,e.next=4,Rd(r.localStore,n);case 4:return a=e.sent,Av(r,i,null),Rv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,jv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Iv.apply(this,arguments)}function Nv(e,t,n){return Pv.apply(this,arguments)}function Pv(){return Pv=Bt(zt().mark((function e(t,n,r){var i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qu(t),e.prev=1,e.next=4,function(e,t){var n=Qu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Gu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Av(i,n,r),Rv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,jv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Pv.apply(this,arguments)}function Rv(e,t){(e.fa.get(t)||[]).forEach((function(e){e.resolve()})),e.fa.delete(t)}function Av(e,t,n){var r=Qu(e),i=r.ma[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ma[r.currentUser.toKey()]=i}}function Ov(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=tn(e.Ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ta.delete(a),n&&e.Ia.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((function(t){e.Va.containsKey(t)||Dv(e,t)}))}function Dv(e,t){e.da.delete(t.path.canonicalString());var n=e.Aa.get(t);null!==n&&(hp(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),Fv(e))}function Lv(e,t,n){var r,i=tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof uv?(e.Va.addReference(a.key,t),Mv(e,a)):a instanceof cv?(qu("SyncEngine","Document no longer in limbo: "+a.key),e.Va.removeReference(a.key,t),e.Va.containsKey(a.key)||Dv(e,a.key)):Ku()}}catch(o){i.e(o)}finally{i.f()}}function Mv(e,t){var n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(qu("SyncEngine","New document in limbo: "+n),e.da.add(r),Fv(e))}function Fv(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){var t=e.da.values().next().value;e.da.delete(t);var n=new mc(dc.fromString(t)),r=e.ga.next();e.Ra.set(r,new fv(n)),e.Aa=e.Aa.insert(n,r),lp(e.remoteStore,new rd(eh(Ql(n.path)),r,"TargetPurposeLimboResolution",Ic.ae))}}function jv(e,t,n){return Uv.apply(this,arguments)}function Uv(){return Uv=Bt(zt().mark((function e(t,n,r){var i,a,o,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Qu(t),a=[],o=[],s=[],e.t0=i.Ta.isEmpty(),e.t0){e.next=9;break}return i.Ta.forEach((function(e,t){s.push(i.ya(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=xd.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Ia.n_(a),e.next=9,function(){var e=Bt(zt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Cc.forEach(n,(function(t){return Cc.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Cc.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Tc(e.t0)){e.next=10;break}throw e.t0;case 10:qu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=tn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}function Vv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Qu(t)).currentUser.isEqual(n)){e.next=11;break}return qu("SyncEngine","User change. New user:",n.toKey()),e.next=5,Nd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.fa.forEach((function(e){e.forEach((function(e){e.reject(new Yu($u.CANCELLED,t))}))})),e.fa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,jv(r,i.ts);case 11:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function qv(e,t){var n=Qu(e),r=n.Ra.get(t);if(r&&r.Pa)return _h().add(r.key);var i=_h(),a=n.Ea.get(t);if(!a)return i;var o,s=tn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Ta.get(u);i=i.unionWith(c.view.ra)}}catch(l){s.e(l)}finally{s.f()}return i}function Bv(e){var t=Qu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xv.bind(null,t),t.Ia.n_=iv.bind(null,t.eventManager),t.Ia.wa=av.bind(null,t.eventManager),t}function Wv(e){var t=Qu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nv.bind(null,t),t}var Hv=function(){function e(){un(this,e),this.synchronizeTabs=!1}return ln(e,[{key:"initialize",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Jd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Id(this.persistence,new Cd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new wd(Sd.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new qd}},{key:"terminate",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Kv=function(){function e(){un(this,e)}return ln(e,[{key:"initialize",value:function(){var e=Bt(zt().mark((function e(t,n){var r=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Sv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Vv.bind(null,this.syncEngine),e.next=12,Bp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Zp}},{key:"createDatastore",value:function(e){var t=Jd(e.databaseInfo.databaseId),n=function(e){return new Yd(e)}(e.databaseInfo);return function(e,t,n,r){return new rp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new ap(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Sv(t.syncEngine,e,0)}),Wd.v()?new Wd:new Bd)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new dv(e,t,n,r,i,a);return o&&(s.pa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qu(t),qu("RemoteStore","RemoteStore shutting down."),n.p_.add(5),e.next=5,up(n);case 5:n.w_.shutdown(),n.S_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Gv=function(){function e(t){un(this,e),this.observer=t,this.muted=!1}return ln(e,[{key:"next",value:function(e){this.observer.next&&this.Da(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Da(this.observer.error,e):Bu("Uncaught Error in snapshot listener:",e.toString())}},{key:"va",value:function(){this.muted=!0}},{key:"Da",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Qv=function(){function e(t,n,r,i){var a=this;un(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ju.UNAUTHENTICATED,this.clientId=sc.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return qu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ln(e,[{key:"getConfiguration",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Yu($u.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Bt(zt().mark((function n(){var r;return zt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Qp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $v(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),qu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Nd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Xv(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,em(t);case 3:return r=e.sent,qu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return zp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return zp(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e){return"FirebaseError"===e.name?e.code===$u.FAILED_PRECONDITION||e.code===$u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function em(e){return tm.apply(this,arguments)}function tm(){return tm=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return qu("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,$v(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Zv(n=e.t0)){e.next=13;break}throw n;case 13:return Wu("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,$v(t,new Hv);case 16:e.next=21;break;case 18:return qu("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,$v(t,new Hv);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),tm.apply(this,arguments)}function nm(e){return rm.apply(this,arguments)}function rm(){return rm=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return qu("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Xv(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return qu("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Xv(t,new Kv);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}function im(e){return nm(e).then((function(e){return e.syncEngine}))}function am(e){return om.apply(this,arguments)}function om(){return om=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=pv.bind(null,n.syncEngine),r.onUnlisten=gv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function sm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xu;return e.asyncQueue.enqueueAndForget(Bt(zt().mark((function i(){return zt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gv({next:function(a){t.enqueueAndForget((function(){return nv(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Yu($u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Yu($u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sv(Ql(n.path),a,{includeMetadataChanges:!0,U_:!0});return ev(e,o)},i.next=3,am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function um(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xu;return e.asyncQueue.enqueueAndForget(Bt(zt().mark((function i(){return zt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gv({next:function(n){t.enqueueAndForget((function(){return nv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Yu($u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sv(n,a,{includeMetadataChanges:!0,U_:!0});return ev(e,o)},i.next=3,am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function cm(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var lm=new Map;function hm(e,t,n){if(!n)throw new Yu($u.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fm(e){if(!mc.isDocumentKey(e))throw new Yu($u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dm(e){if(mc.isDocumentKey(e))throw new Yu($u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function pm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ku()}function vm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yu($u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pm(e);throw new Yu($u.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var mm=function(){function e(t){var n,r;if(un(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Yu($u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Yu($u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Yu($u.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cm(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Yu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Yu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Yu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return ln(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ym=function(){function e(t,n,r,i){un(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1}return ln(e,[{key:"app",get:function(){if(!this._app)throw new Yu($u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Yu($u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zu;switch(e.type){case"firstParty":return new rc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Yu($u.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=lm.get(e);t&&(qu("ComponentProvider","Removing Datastore"),lm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function gm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=vm(e,ym))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Wu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=ju.MOCK_USER;else{s=Rn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Yu($u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ju(c)}e._authCredentials=new ec(new Ju(s,u))}}var km=function(){function e(t,n,r){un(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ln(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),_m=function(){function e(t,n,r){un(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ln(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),bm=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a;return un(this,n),(a=t.call(this,e,r,Ql(i)))._path=i,a.type="collection",a}return ln(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new _m(this.firestore,null,new mc(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(km);function wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),hm("collection","path",t),e instanceof ym){var a=dc.fromString.apply(dc,[t].concat(r));return dm(a),new bm(e,null,a)}if(!(e instanceof _m||e instanceof bm))throw new Yu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(dc.fromString.apply(dc,[t].concat(r)));return dm(o),new bm(e.firestore,null,o)}function Em(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),1===arguments.length&&(t=sc.V()),hm("doc","path",t),e instanceof ym){var a=dc.fromString.apply(dc,[t].concat(r));return fm(a),new _m(e,null,new mc(a))}if(!(e instanceof _m||e instanceof bm))throw new Yu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(dc.fromString.apply(dc,[t].concat(r)));return fm(o),new _m(e.firestore,e instanceof bm?e.converter:null,new mc(o))}var Sm=function(){function e(){var t=this;un(this,e),this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new Zd(this,"async_queue_retry"),this.Za=function(){var e=Xd();e&&qu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Qo.Oo()};var n=Xd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Za)}return ln(e,[{key:"isShuttingDown",get:function(){return this.Ga}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xa(),this.eu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;var t=Xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xa(),this.Ga)return new Promise((function(){}));var n=new Xu;return this.eu((function(){return t.Ga&&t.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Wa.push(e),t.tu()}))}},{key:"tu",value:function(){var e=Bt(zt().mark((function e(){var t=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Wa.length){e.next=14;break}return e.prev=1,e.next=4,this.Wa[0]();case 4:this.Wa.shift(),this.Qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Tc(e.t0)){e.next=12;break}throw e.t0;case 12:qu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Wa.length>0&&this.Qo.Mo((function(){return t.tu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){var t=this,n=this.Ua.then((function(){return t.Ha=!0,e().catch((function(e){t.ja=e,t.Ha=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ha=!1,e}))}));return this.Ua=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);var i=Gp.createAndSchedule(this,e,t,n,(function(e){return r.nu(e)}));return this.za.push(i),i}},{key:"Xa",value:function(){this.ja&&Ku()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ru",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ua,e.next=3,t;case 3:if(t!==this.Ua){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(e){var t,n=tn(this.za);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"su",value:function(e){var t=this;return this.ru().then((function(){t.za.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=tn(t.za);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ru()}))}},{key:"ou",value:function(e){this.Ya.push(e)}},{key:"nu",value:function(e){var t=this.za.indexOf(e);this.za.splice(t,1)}}]),e}();var xm=function(e){nn(n,e);var t=an(n);function n(e,r,i,a){var o;return un(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Sm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return ln(n,[{key:"_terminate",value:function(){return this._firestoreClient||Tm(this),this._firestoreClient.terminate()}}]),n}(ym);function Cm(e){return e._firestoreClient||Tm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Tm(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Zc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,cm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Qv(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Im=function(){function e(t){un(this,e),this._byteString=t}return ln(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Hc.fromBase64String(t))}catch(t){throw new Yu($u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Hc.fromUint8Array(t))}}]),e}(),Nm=function(){function e(){un(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Yu($u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vc(n)}return ln(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Pm=ln((function e(t){un(this,e),this._methodName=t})),Rm=function(){function e(t,n){if(un(this,e),!isFinite(t)||t<-90||t>90)throw new Yu($u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Yu($u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ln(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return uc(this._lat,e._lat)||uc(this._long,e._long)}}]),e}(),Am=/^__.*__$/,Om=function(){function e(t,n,r){un(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ln(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Qh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}]),e}(),Dm=function(){function e(t,n,r){un(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ln(e,[{key:"toMutation",value:function(e,t){return new Qh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Lm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ku()}}var Mm=function(){function e(t,n,r,i,a,o){un(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this._u(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ln(e,[{key:"path",get:function(){return this.settings.path}},{key:"au",get:function(){return this.settings.au}},{key:"uu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"cu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r.hu(e),r}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r._u(),r}},{key:"Iu",value:function(e){return this.uu({path:void 0,lu:!0})}},{key:"Tu",value:function(e){return Ym(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"_u",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.hu(this.path.get(e))}},{key:"hu",value:function(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(Lm(this.au)&&Am.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}]),e}(),Fm=function(){function e(t,n,r){un(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Jd(t)}return ln(e,[{key:"Au",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mm({au:e,methodName:t,du:n,path:vc.emptyPath(),lu:!1,Eu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function jm(e){var t=e._freezeSettings(),n=Jd(e._databaseId);return new Fm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Um(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Au(a.merge||a.mergeFields?2:0,t,n,i);Km("Data must be an object, but it was:",o,r);var s,u,c=Wm(r,o);if(a.merge)s=new Bc(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=tn(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=Gm(t,l.value,n);if(!o.contains(d))throw new Yu($u.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Xm(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new Bc(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Om(new ml(c),s,u)}var Vm=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.au)throw 1===e.au?e.Tu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Tu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Pm);function zm(e,t,n,r){var i=e.Au(1,t,n);Km("Data must be an object, but it was:",i,r);var a=[],o=ml.empty();Mc(r,(function(e,r){var s=$m(t,e,n);r=rr(r);var u=i.Pu(s);if(r instanceof Vm)a.push(s);else{var c=Bm(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Bc(a);return new Dm(o,s,i.fieldTransforms)}function qm(e,t,n,r,i,a){var o=e.Au(1,t,n),s=[Gm(t,r,n)],u=[i];if(a.length%2!=0)throw new Yu($u.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Gm(t,a[c])),u.push(a[c+1]);for(var l=[],h=ml.empty(),f=s.length-1;f>=0;--f)if(!Xm(l,s[f])){var d=s[f],p=u[f];p=rr(p);var v=o.Pu(d);if(p instanceof Vm)l.push(d);else{var m=Bm(p,v);null!=m&&(l.push(d),h.set(d,m))}}var y=new Bc(l);return new Dm(h,y,o.fieldTransforms)}function Bm(e,t){if(Hm(e=rr(e)))return Km("Unsupported field value:",t,e),Wm(e,t);if(e instanceof Pm)return function(e,t){if(!Lm(t.au))throw t.Tu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=tn(e);try{for(a.s();!(n=a.n()).done;){var o=Bm(n.value,t.Iu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=rr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=lc.fromDate(e);return{timestampValue:Rf(t.serializer,n)}}if(e instanceof lc){var r=new lc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rf(t.serializer,r)}}if(e instanceof Rm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Im)return{bytesValue:Af(t.serializer,e._byteString)};if(e instanceof _m){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Tu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Lf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu("Unsupported field value: ".concat(pm(e)))}(e,t)}function Wm(e,t){var n={};return Fc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mc(e,(function(e,r){var i=Bm(r,t.cu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Hm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lc||e instanceof Rm||e instanceof Im||e instanceof _m||e instanceof Pm)}function Km(e,t,n){if(!Hm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=pm(n);throw"an object"===r?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function Gm(e,t,n){if((t=rr(t))instanceof Nm)return t._internalPath;if("string"==typeof t)return $m(e,t);throw Ym("Field path arguments must be of type string or ",e,!1,void 0,n)}var Qm=new RegExp("[~\\*/\\[\\]]");function $m(e,t,n){if(t.search(Qm)>=0)throw Ym("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Kt(Nm,sn(t.split(".")))._internalPath}catch(q){throw Ym("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ym(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Yu($u.INVALID_ARGUMENT,s+e+u)}function Xm(e,t){return e.some((function(e){return e.isEqual(t)}))}var Jm=function(){function e(t,n,r,i,a){un(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ln(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new _m(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Zm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ey("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Zm=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"data",value:function(){return Qt(Gt(n.prototype),"data",this).call(this)}}]),n}(Jm);function ey(e,t){return"string"==typeof t?$m(e,t):t instanceof Nm?t._internalPath:t._delegate._internalPath}function ty(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Yu($u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ny=function(){function e(){un(this,e)}return ln(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($c(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ku()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Mc(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Rm(Qc(e.latitude),Qc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Xc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gc(e);return new lc(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=dc.fromString(e);Gu(nd(n));var r=new el(n.get(1),n.get(3)),i=new mc(n.popFirst(5));return r.isEqual(t)||Bu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ry(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var iy=function(){function e(t,n){un(this,e),this.hasPendingWrites=t,this.fromCache=n}return ln(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ay=function(e){nn(n,e);var t=an(n);function n(e,r,i,a,o,s){var u;return un(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return ln(n,[{key:"exists",value:function(){return Qt(Gt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new oy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ey("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Jm),oy=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qt(Gt(n.prototype),"data",this).call(this,e)}}]),n}(ay),sy=function(){function e(t,n,r,i){un(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new iy(i.hasPendingWrites,i.fromCache),this.query=r}return ln(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new oy(n._firestore,n._userDataWriter,r.key,r,new iy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Yu($u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new oy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new oy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:uy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function uy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ku()}}function cy(e){e=vm(e,_m);var t=vm(e.firestore,xm);return sm(Cm(t),e._key).then((function(n){return my(t,e,n)}))}var ly=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).firestore=e,r}return ln(n,[{key:"convertBytes",value:function(e){return new Im(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new _m(this.firestore,null,t)}}]),n}(ny);function hy(e){e=vm(e,km);var t=vm(e.firestore,xm),n=Cm(t),r=new ly(t);return ty(e._query),um(n,e._query).then((function(n){return new sy(t,r,e,n)}))}function fy(e,t,n){e=vm(e,_m);var r=vm(e.firestore,xm),i=ry(e.converter,t,n);return vy(r,[Um(jm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Uh.none())])}function dy(e,t,n){e=vm(e,_m);for(var r=vm(e.firestore,xm),i=jm(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return vy(r,[("string"==typeof(t=rr(t))||t instanceof Nm?qm(i,"updateDoc",e._key,t,n,o):zm(i,"updateDoc",e._key,t)).toMutation(e._key,Uh.exists(!0))])}function py(e){return vy(vm(e.firestore,xm),[new ef(e._key,Uh.none())])}function vy(e,t){return function(e,t){var n=new Xu;return e.asyncQueue.enqueueAndForget(Bt(zt().mark((function r(){return zt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=_v,r.next=3,im(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Cm(e),t)}function my(e,t,n){var r=n.docs.get(t._key),i=new ly(e);return new ay(e,i,t._key,r,new iy(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Uu=e}($r),Wr(new ir("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new xm(new tc(e.getProvider("auth-internal")),new ac(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yu($u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Jr(Fu,"4.0.0",e),Jr(Fu,"4.0.0","esm2017")}();Jr("firebase","10.0.0","app");var yy="@firebase/database",gy="1.0.0",ky="";var _y=function(){function e(t){un(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ln(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zn(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Vn(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),by=function(){function e(){un(this,e),this.cache_={},this.isInMemoryStorage=!0}return ln(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Bn(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),wy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new _y(t)}}catch(n){}return new by},Ey=wy("localStorage"),Sy=wy("sessionStorage"),xy=new vr("@firebase/database"),Cy=function(){var e=1;return function(){return e++}}(),Ty=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,pn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Jn;n.update(t);var r=n.digest();return yn.encodeByteArray(r)},Iy=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?zn(r):r,t+=" "}return t},Ny=null,Py=!0,Ry=function(e,t){pn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(xy.logLevel=ur.VERBOSE,Ny=xy.log.bind(xy),t&&Sy.set("logging_enabled",!0)):"function"===typeof e?Ny=e:(Ny=null,Sy.remove("logging_enabled"))},Ay=function(){if(!0===Py&&(Py=!1,null===Ny&&!0===Sy.get("logging_enabled")&&Ry(!0)),Ny){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Iy.apply(null,t);Ny(r)}},Oy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ay.apply(void 0,[e].concat(n))}},Dy=function(){var e="FIREBASE INTERNAL ERROR: "+Iy.apply(void 0,arguments);xy.error(e)},Ly=function(){var e="FIREBASE FATAL ERROR: ".concat(Iy.apply(void 0,arguments));throw xy.error(e),new Error(e)},My=function(){var e="FIREBASE WARNING: "+Iy.apply(void 0,arguments);xy.warn(e)},Fy=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jy="[MIN_NAME]",Uy="[MAX_NAME]",Vy=function(e,t){if(e===t)return 0;if(e===jy||t===Uy)return-1;if(t===jy||e===Uy)return 1;var n=Qy(e),r=Qy(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},zy=function(e,t){return e===t?0:e<t?-1:1},qy=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+zn(t))},By=function e(t){if("object"!==typeof t||null===t)return zn(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=zn(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Wy=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Hy(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ky=function(e){pn(!Fy(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Gy=new RegExp("^-?(0*)\\d{1,10}$"),Qy=function(e){if(Gy.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},$y=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw My("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Yy=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Xy=function(){function e(t,n){var r=this;un(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ln(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){My('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Jy=function(){function e(t,n,r){var i=this;un(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ln(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ay("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',My(e)}}]),e}(),Zy=function(){function e(t){un(this,e),this.accessToken=t}return ln(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Zy.OWNER="owner";var eg="5",tg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ng="ac",rg="websocket",ig="long_polling",ag=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];un(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ey.get("host:"+t)||this._host}return ln(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ey.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function og(e,t,n){var r;if(pn("string"===typeof t,"typeof type must == string"),pn("object"===typeof n,"typeof params must == object"),t===rg)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ig)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Hy(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var sg=function(){function e(){un(this,e),this.counters_={}}return ln(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Bn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return wn(this.counters_)}}]),e}(),ug={},cg={};function lg(e){var t=e.toString();return ug[t]||(ug[t]=new sg),ug[t]}var hg=function(){function e(t){un(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ln(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&$y((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),fg="start",dg=function(){function e(t,n,r,i,a,o,s){var u=this;un(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Oy(t),this.stats_=lg(n),this.urlFn=function(e){return u.appCheckToken&&(e[ng]=u.appCheckToken),og(n,ig,e)}}return ln(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ln()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new pg((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===fg)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[fg]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=eg,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[ng]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&tg.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=zn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=kn(t),r=Wy(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ln()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=zn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ln()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),pg=function(){function e(t,n,r,i){if(un(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ln())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Cy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Ay("frame writing exception"),s.stack&&Ay(s.stack),Ay(s)}}}return ln(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ln()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ay("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ay("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),vg=null;"undefined"!==typeof MozWebSocket?vg=MozWebSocket:"undefined"!==typeof WebSocket&&(vg=WebSocket);var mg=function(){function e(t,n,r,i,a,o,s){un(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Oy(this.connId),this.stats_=lg(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return ln(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ey.set("previous_websocket_failure",!0);try{var r;if(Ln()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(eg,"/").concat(ky,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBAZE_API_KEY:"AIzaSyDcAXN1g3Ofl4FsPZGiQSQq4q2QaUmt_Co",REACT_APP_FIREBAZE_APP_ID:"1:1029433028060:web:355fc0e820eb8221987319",REACT_APP_FIREBAZE_AUTH_DOMAIN:"reservation-app-57c2d.firebaseapp.com",REACT_APP_FIREBAZE_MESSAGING_SENDER_ID:"1029433028060",REACT_APP_FIREBAZE_PROJECT_ID:"reservation-app-57c2d",REACT_APP_FIREBAZE_STORAGE_BUCKET:"reservation-app-57c2d.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new vg(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ey.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Vn(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(pn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=zn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Wy(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=eg,!Ln()&&"undefined"!==typeof location&&location.hostname&&tg.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[ng]=r),i&&(a.p=i),og(e,rg,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==vg&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ey.isInMemoryStorage||!0===Ey.get("previous_websocket_failure")}}]),e}();mg.responsesRequiredToBeHealthy=2,mg.healthyTimeout=3e4;var yg=function(){function e(t){un(this,e),this.initTransports_(t)}return ln(e,[{key:"initTransports_",value:function(t){var n=mg&&mg.isAvailable(),r=n&&!mg.previouslyFailed();if(t.webSocketOnly&&(n||My("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[mg];else{var i,a=this.transports_=[],o=tn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[dg,mg]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();yg.globalTransportInitialized_=!1;var gg=function(){function e(t,n,r,i,a,o,s,u,c,l){un(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Oy("c:"+this.id+":"),this.transportManager_=new yg(n),this.log_("Connection created"),this.start_()}return ln(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yy((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=qy("t",e),n=qy("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=qy("t",e),n=qy("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=qy("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Dy("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dy("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),eg!==n&&My("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yy((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yy((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ey.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),kg=function(){function e(){un(this,e)}return ln(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),_g=function(){function e(t){un(this,e),this.allowedEvents_=t,this.listeners_={},pn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ln(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=sn(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){pn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),bg=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||On()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ln(n,[{key:"getInitialEvent",value:function(e){return pn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(_g),wg=32,Eg=768,Sg=function(){function e(t,n){if(un(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ln(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function xg(){return new Sg("")}function Cg(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Tg(e){return e.pieces_.length-e.pieceNum_}function Ig(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Sg(e.pieces_,t)}function Ng(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Pg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Rg(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Sg(t,0)}function Ag(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Sg)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Sg(n,0)}function Og(e){return e.pieceNum_>=e.pieces_.length}function Dg(e,t){var n=Cg(e),r=Cg(t);if(null===n)return t;if(n===r)return Dg(Ig(e),Ig(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Lg(e,t){if(Tg(e)!==Tg(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Mg(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Tg(e)>Tg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Fg=ln((function e(t,n){un(this,e),this.errorPrefix_=n,this.parts_=Pg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=nr(this.parts_[r]);jg(this)}));function jg(e){if(e.byteLength_>Eg)throw new Error(e.errorPrefix_+"has a key path longer than "+Eg+" bytes ("+e.byteLength_+").");if(e.parts_.length>wg)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wg+") or object contains a cycle "+Ug(e))}function Ug(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Vg=function(e){nn(n,e);var t=an(n);function n(){var e,r,i;return un(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ln(n,[{key:"getInitialEvent",value:function(e){return pn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(_g),zg=1e3,qg=function(e){nn(n,e);var t=an(n);function n(e,r,i,a,o,s,u,c){var l;if(un(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Oy("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=zg,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ln())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Vg.getInstance().on("visible",l.onVisible_,rn(l)),-1===e.host.indexOf("fblocal")&&bg.getInstance().on("online",l.onOnline_,rn(l)),l}return ln(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(zn(i)),pn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Pn,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),pn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),pn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=qn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=qn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),pn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+zn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Dy("Unrecognized action received from server: "+zn(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;pn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zg),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Bt(zt().mark((function e(){var t,r,i,a,o,s,u,c,l,h,f,d,p,v,m=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){pn(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=Zt(f,2),p=d[0],v=d[1],s?Ay("getToken() completed but was canceled"):(Ay("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new gg(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){My(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&My(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ay("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ay("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Hn(this.interruptReasons_)&&(this.reconnectDelay_=zg,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return By(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Sg(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ay("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ay("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=tn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=tn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ln()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ky.replace(/\./g,"-")]=1,On()?e["framework.cordova"]=1:Dn()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=bg.getInstance().currentlyOnline();return Hn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Bn(e,"w")){var n=Wn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();My("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(kg);qg.nextPersistentConnectionId_=0,qg.nextConnectionId_=0;var Bg,Wg=function(){function e(t,n){un(this,e),this.name=t,this.node=n}return ln(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Hg=function(){function e(){un(this,e)}return ln(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Wg(jy,e),r=new Wg(jy,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Wg.MIN}}]),e}(),Kg=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"compare",value:function(e,t){return Vy(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw vn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Wg.MIN}},{key:"maxPost",value:function(){return new Wg(Uy,Bg)}},{key:"makePost",value:function(e,t){return pn("string"===typeof e,"KeyIndex indexValue must always be a string."),new Wg(e,Bg)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Bg},set:function(e){Bg=e}}]),n}(Hg),Gg=new Kg,Qg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;un(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ln(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),$g=function(){function e(t,n,r,i,a){un(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Jg.EMPTY_NODE,this.right=null!=a?a:Jg.EMPTY_NODE}return ln(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Jg.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Jg.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();$g.RED=!0,$g.BLACK=!1;var Yg,Xg=function(){function e(){un(this,e)}return ln(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new $g(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Jg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;un(this,e),this.comparator_=t,this.root_=n}return ln(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,$g.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$g.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Qg(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Qg(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Qg(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Qg(this.root_,null,this.comparator_,!0,e)}}]),e}();function Zg(e,t){return Vy(e.name,t.name)}function ek(e,t){return Vy(e,t)}Jg.EMPTY_NODE=new Xg;var tk,nk,rk,ik=function(e){return"number"===typeof e?"number:"+Ky(e):"string:"+e},ak=function(e){if(e.isLeafNode()){var t=e.val();pn("string"===typeof t||"number"===typeof t||"object"===typeof t&&Bn(t,".sv"),"Priority must be a string or number.")}else pn(e===Yg||e.isEmpty(),"priority of unexpected type.");pn(e===Yg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ok=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;un(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,pn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ak(this.priorityNode_)}return ln(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Og(t)?this:".priority"===Cg(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Cg(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(pn(".priority"!==r||1===Tg(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ig(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ik(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ky(this.value_):this.value_,this.lazyHash_=Ty(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(pn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return pn(i>=0,"Unknown leaf type: "+n),pn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return tk},set:function(e){tk=e}}]),e}();ok.VALUE_TYPE_ORDER=["object","boolean","number","string"];var sk,uk,ck=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Vy(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Wg.MIN}},{key:"maxPost",value:function(){return new Wg(Uy,new ok("[PRIORITY-POST]",rk))}},{key:"makePost",value:function(e,t){var n=nk(e);return new Wg(t,new ok("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Hg),lk=new ck,hk=Math.log(2),fk=function(){function e(t){un(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/hk,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ln(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),dk=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new $g(o,a.node,$g.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new $g(o,a.node,$g.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new $g(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,$g.BLACK):(s(h,$g.BLACK),s(h,$g.RED))}return a}(new fk(e.length));return new Jg(r||t,a)},pk={},vk=function(){function e(t,n){un(this,e),this.indexes_=t,this.indexSet_=n}return ln(e,[{key:"get",value:function(e){var t=Wn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Jg?t:null}},{key:"hasIndex",value:function(e){return Bn(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){pn(t!==Gg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Wg.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?dk(i,t.getCompare()):pk;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Kn(this.indexes_,(function(e,i){var a=Wn(r.indexSet_,i);if(pn(a,"Missing index implementation for "+i),e===pk){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Wg.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),dk(o,a.getCompare())}return pk}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Wg(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Kn(this.indexes_,(function(e){if(e===pk)return e;var r=n.get(t.name);return r?e.remove(new Wg(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return pn(pk&&lk,"ChildrenNode.ts has not been loaded"),sk=sk||new e({".priority":pk},{".priority":lk})}}]),e}(),mk=function(){function e(t,n,r){un(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ak(this.priorityNode_),this.children_.isEmpty()&&pn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ln(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||uk}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?uk:t}},{key:"getChild",value:function(e){var t=Cg(e);return null===t?this:this.getImmediateChild(t).getChild(Ig(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(pn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Wg(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?uk:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Cg(e);if(null===n)return t;pn(".priority"!==Cg(e)||1===Tg(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ig(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(lk,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ik(this.getPriority().val())+":"),this.forEachChild(lk,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ty(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Wg(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Wg(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Wg(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Wg.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Wg.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yk?-1:0}},{key:"withIndex",value:function(t){if(t===Gg||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Gg||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(lk),r=t.getIterator(lk),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Gg?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return uk||(uk=new e(new Jg(ek),null,vk.Default))}}]),e}();mk.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var yk=new(function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.call(this,new Jg(ek),mk.EMPTY_NODE,vk.Default)}return ln(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return mk.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(mk));Object.defineProperties(Wg,{MIN:{value:new Wg(jy,mk.EMPTY_NODE)},MAX:{value:new Wg(Uy,yk)}}),Kg.__EMPTY_NODE=mk.EMPTY_NODE,ok.__childrenNodeConstructor=mk,Yg=yk,function(e){rk=e}(yk);var gk=!0;function kk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return mk.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),pn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new ok(e,kk(t));if(e instanceof Array||!gk){var n=mk.EMPTY_NODE;return Hy(e,(function(t,r){if(Bn(e,t)&&"."!==t.substring(0,1)){var i=kk(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(kk(t))}var r=[],i=!1;if(Hy(e,(function(e,t){if("."!==e.substring(0,1)){var n=kk(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Wg(e,n)))}})),0===r.length)return mk.EMPTY_NODE;var a=dk(r,Zg,(function(e){return e.name}),ek);if(i){var o=dk(r,lk.getCompare());return new mk(a,kk(t),new vk({".priority":o},{".priority":lk}))}return new mk(a,kk(t),vk.Default)}!function(e){nk=e}(kk);var _k=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this)).indexPath_=e,pn(!Og(e)&&".priority"!==Cg(e),"Can't create PathIndex with empty path or .priority key"),r}return ln(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Vy(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=kk(e),r=mk.EMPTY_NODE.updateChild(this.indexPath_,n);return new Wg(t,r)}},{key:"maxPost",value:function(){var e=mk.EMPTY_NODE.updateChild(this.indexPath_,yk);return new Wg(Uy,e)}},{key:"toString",value:function(){return Pg(this.indexPath_,0).join("/")}}]),n}(Hg),bk=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Vy(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Wg.MIN}},{key:"maxPost",value:function(){return Wg.MAX}},{key:"makePost",value:function(e,t){var n=kk(e);return new Wg(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Hg),wk=new bk;function Ek(e){return{type:"value",snapshotNode:e}}function Sk(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function xk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ck(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Tk=function(){function e(t){un(this,e),this.index_=t}return ln(e,[{key:"updateChild",value:function(e,t,n,r,i,a){pn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(xk(t,o)):pn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Sk(t,n)):a.trackChildChange(Ck(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(lk,(function(e,r){t.hasChild(e)||n.trackChildChange(xk(e,r))})),t.isLeafNode()||t.forEachChild(lk,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ck(t,r,i))}else n.trackChildChange(Sk(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?mk.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Ik=function(){function e(t){un(this,e),this.indexedFilter_=new Tk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return ln(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Wg(t,n))||(n=mk.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=mk.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(mk.EMPTY_NODE);var i=this;return t.forEachChild(lk,(function(e,t){i.matches(new Wg(e,t))||(r=r.updateImmediateChild(e,mk.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Nk=function(){function e(t){var n=this;un(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Ik(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return ln(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Wg(t,n))||(n=mk.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=mk.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=mk.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(mk.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,mk.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;pn(s.numChildren()===this.limit_,"");var u=new Wg(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ck(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(xk(t,h));var p=s.updateImmediateChild(t,mk.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Sk(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(xk(c.name,c.node)),i.trackChildChange(Sk(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,mk.EMPTY_NODE)):e}}]),e}(),Pk=function(){function e(){un(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lk}return ln(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return pn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return pn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jy}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return pn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return pn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uy}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return pn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===lk}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Rk(e){var t,n={};if(e.isDefault())return n;if(e.index_===lk?t="$priority":e.index_===wk?t="$value":e.index_===Gg?t="$key":(pn(e.index_ instanceof _k,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=zn(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=zn(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+zn(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=zn(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+zn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Ak(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==lk&&(t.i=e.index_.toString()),t}var Ok=function(e){nn(n,e);var t=an(n);function n(e,r,i,a){var o;return un(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Oy("p:rest:"),o.listens_={},o}return ln(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Rk(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Wn(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Rk(e._queryParams),r=e._path.toString(),i=new Pn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Zt(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+$n(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Vn(c.responseText)}catch(n){My("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&My("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(pn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(kg),Dk=function(){function e(){un(this,e),this.rootNode_=mk.EMPTY_NODE}return ln(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Lk(){return{value:null,children:new Map}}function Mk(e,t,n){if(Og(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Cg(t);e.children.has(r)||e.children.set(r,Lk()),Mk(e.children.get(r),t=Ig(t),n)}}function Fk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Fk(r,new Sg(t.toString()+"/"+e),n)}))}var jk,Uk=function(){function e(t){un(this,e),this.collection_=t,this.last_=null}return ln(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hy(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Vk=function(){function e(t,n){un(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Uk(t);var r=1e4+2e4*Math.random();Yy(this.reportStats_.bind(this),Math.floor(r))}return ln(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Hy(t,(function(t,i){i>0&&Bn(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Yy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function zk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jk||(jk={}));var qk,Bk=function(){function e(t,n,r){un(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=jk.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ln(e,[{key:"operationForChild",value:function(t){if(Og(this.path)){if(null!=this.affectedTree.value)return pn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Sg(t));return new e(xg(),n,this.revert)}return pn(Cg(this.path)===t,"operationForChild called for unrelated child."),new e(Ig(this.path),this.affectedTree,this.revert)}}]),e}(),Wk=function(){function e(t,n){un(this,e),this.source=t,this.path=n,this.type=jk.LISTEN_COMPLETE}return ln(e,[{key:"operationForChild",value:function(t){return Og(this.path)?new e(this.source,xg()):new e(this.source,Ig(this.path))}}]),e}(),Hk=function(){function e(t,n,r){un(this,e),this.source=t,this.path=n,this.snap=r,this.type=jk.OVERWRITE}return ln(e,[{key:"operationForChild",value:function(t){return Og(this.path)?new e(this.source,xg(),this.snap.getImmediateChild(t)):new e(this.source,Ig(this.path),this.snap)}}]),e}(),Kk=function(){function e(t,n,r){un(this,e),this.source=t,this.path=n,this.children=r,this.type=jk.MERGE}return ln(e,[{key:"operationForChild",value:function(t){if(Og(this.path)){var n=this.children.subtree(new Sg(t));return n.isEmpty()?null:n.value?new Hk(this.source,xg(),n.value):new e(this.source,xg(),n)}return pn(Cg(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ig(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Gk=function(){function e(t,n,r){un(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ln(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Og(e))return this.isFullyInitialized()&&!this.filtered_;var t=Cg(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Qk=ln((function e(t){un(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function $k(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw vn("Should only compare child_ events.");var r=new Wg(t.childName,t.snapshotNode),i=new Wg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Yk(e,t){return{eventCache:e,serverCache:t}}function Xk(e,t,n,r){return Yk(new Gk(t,n,r),e.serverCache)}function Jk(e,t,n,r){return Yk(e.eventCache,new Gk(t,n,r))}function Zk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function e_(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var t_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(qk||(qk=new Jg(zy)),qk);un(this,e),this.value=t,this.children=n}return ln(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:xg(),value:this.value};if(Og(e))return null;var n=Cg(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ig(e),t);return null!=i?{path:Ag(new Sg(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Og(t))return this;var n=Cg(t),r=this.children.get(n);return null!==r?r.subtree(Ig(t)):new e(null)}},{key:"set",value:function(t,n){if(Og(t))return new e(n,this.children);var r=Cg(t),i=(this.children.get(r)||new e(null)).set(Ig(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Og(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Cg(t),r=this.children.get(n);if(r){var i,a=r.remove(Ig(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Og(e))return this.value;var t=Cg(e),n=this.children.get(t);return n?n.get(Ig(e)):null}},{key:"setTree",value:function(t,n){if(Og(t))return n;var r,i=Cg(t),a=(this.children.get(i)||new e(null)).setTree(Ig(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(xg(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ag(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,xg(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Og(e))return null;var i=Cg(e),a=this.children.get(i);return a?a.findOnPath_(Ig(e),Ag(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,xg(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Og(t))return this;this.value&&r(n,this.value);var i=Cg(t),a=this.children.get(i);return a?a.foreachOnPath_(Ig(t),Ag(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(xg(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Ag(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Hy(t,(function(e,t){n=n.set(new Sg(e),t)})),n}}]),e}(),n_=function(){function e(t){un(this,e),this.writeTree_=t}return ln(e,null,[{key:"empty",value:function(){return new e(new t_(null))}}]),e}();function r_(e,t,n){if(Og(t))return new n_(new t_(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Dg(i,t);return a=a.updateChild(o,n),new n_(e.writeTree_.set(i,a))}var s=new t_(n),u=e.writeTree_.setTree(t,s);return new n_(u)}function i_(e,t,n){var r=e;return Hy(n,(function(e,n){r=r_(r,Ag(t,e),n)})),r}function a_(e,t){if(Og(t))return n_.empty();var n=e.writeTree_.setTree(t,new t_(null));return new n_(n)}function o_(e,t){return null!=s_(e,t)}function s_(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Dg(n.path,t)):null}function u_(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(lk,(function(e,n){t.push(new Wg(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Wg(e,n.value))})),t}function c_(e,t){if(Og(t))return e;var n=s_(e,t);return new n_(null!=n?new t_(n):e.writeTree_.subtree(t))}function l_(e){return e.writeTree_.isEmpty()}function h_(e,t){return f_(xg(),e.writeTree_,t)}function f_(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(pn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=f_(Ag(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ag(e,".priority"),r)),n}function d_(e,t){return C_(t,e)}function p_(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));pn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&v_(s,r.path)?i=!1:Mg(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=y_(e.allWrites,m_,xg()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=a_(e.visibleWrites,r.path):Hy(r.children,(function(t){e.visibleWrites=a_(e.visibleWrites,Ag(r.path,t))}));return!0}return!1}function v_(e,t){if(e.snap)return Mg(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Mg(Ag(e.path,n),t))return!0;return!1}function m_(e){return e.visible}function y_(e,t,n){for(var r=n_.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Mg(n,o)?r=r_(r,s=Dg(n,o),a.snap):Mg(o,n)&&(s=Dg(o,n),r=r_(r,xg(),a.snap.getChild(s)));else{if(!a.children)throw vn("WriteRecord should have .snap or .children");if(Mg(n,o))r=i_(r,s=Dg(n,o),a.children);else if(Mg(o,n))if(Og(s=Dg(o,n)))r=i_(r,xg(),a.children);else{var u=Wn(a.children,Cg(s));if(u){var c=u.getChild(Ig(s));r=r_(r,xg(),c)}}}}}return r}function g_(e,t,n,r,i){if(r||i){var a=c_(e.visibleWrites,t);if(!i&&l_(a))return n;if(i||null!=n||o_(a,xg())){return h_(y_(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Mg(e.path,t)||Mg(t,e.path))}),t),n||mk.EMPTY_NODE)}return null}var o=s_(e.visibleWrites,t);if(null!=o)return o;var s=c_(e.visibleWrites,t);return l_(s)?n:null!=n||o_(s,xg())?h_(s,n||mk.EMPTY_NODE):null}function k_(e,t,n,r){return g_(e.writeTree,e.treePath,t,n,r)}function __(e,t){return function(e,t,n){var r=mk.EMPTY_NODE,i=s_(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(lk,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=c_(e.visibleWrites,t);return n.forEachChild(lk,(function(e,t){var n=h_(c_(a,new Sg(e)),t);r=r.updateImmediateChild(e,n)})),u_(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return u_(c_(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function b_(e,t,n,r){return function(e,t,n,r,i){pn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Ag(t,n);if(o_(e.visibleWrites,a))return null;var o=c_(e.visibleWrites,a);return l_(o)?i.getChild(n):h_(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function w_(e,t){return function(e,t){return s_(e.visibleWrites,t)}(e.writeTree,Ag(e.treePath,t))}function E_(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=c_(e.visibleWrites,t),c=s_(u,xg());if(null!=c)s=c;else{if(null==n)return[];s=h_(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function S_(e,t,n){return function(e,t,n,r){var i=Ag(t,n),a=s_(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?h_(c_(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function x_(e,t){return C_(Ag(e.treePath,t),e.writeTree)}function C_(e,t){return{treePath:e,writeTree:t}}var T_=function(){function e(){un(this,e),this.changeMap=new Map}return ln(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;pn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),pn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ck(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,xk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Sk(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw vn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ck(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),I_=new(function(){function e(){un(this,e)}return ln(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),N_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;un(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ln(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Gk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return S_(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:e_(this.viewCache_),i=E_(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function P_(e,t,n,r,i){var a,o,s=new T_;if(n.type===jk.OVERWRITE){var u=n;u.source.fromUser?a=O_(e,t,u.path,u.snap,r,i,s):(pn(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Og(u.path),a=A_(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===jk.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Ag(n,r);D_(t,Cg(c))&&(s=O_(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Ag(n,r);D_(t,Cg(c))||(s=O_(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(pn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=M_(e,t,c.path,c.children,r,i,o,s))}else if(n.type===jk.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=w_(r,n))return t;var s,u=new N_(r,t,i),c=t.eventCache.getNode();if(Og(n)||".priority"===Cg(n)){var l;if(t.serverCache.isFullyInitialized())l=k_(r,e_(t));else{var h=t.serverCache.getNode();pn(h instanceof mk,"serverChildren would be complete if leaf node"),l=__(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=Cg(n),d=S_(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Ig(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,mk.EMPTY_NODE,Ig(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=k_(r,e_(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=w_(r,xg()),Xk(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=w_(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Og(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return A_(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Og(n)){var c=new t_(null);return u.getNode().forEachChild(Gg,(function(e,t){c=c.set(new Sg(e),t)})),M_(e,t,n,c,i,a,s,o)}return t}var l=new t_(null);return r.foreach((function(e,t){var r=Ag(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),M_(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==jk.LISTEN_COMPLETE)throw vn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Jk(t,a.getNode(),a.isFullyInitialized()||Og(n),a.isFiltered());return R_(e,o,n,r,I_,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Zk(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ek(Zk(t)))}}(t,a,h),{viewCache:a,changes:h}}function R_(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=w_(r,n))return t;if(Og(n))if(pn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=e_(t),l=__(r,c instanceof mk?c:mk.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=k_(r,e_(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Cg(n);if(".priority"===f){pn(1===Tg(n),"Can't have a priority with additional path components");var d=u.getNode(),p=b_(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Ig(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=b_(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=S_(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return Xk(t,o,u.isFullyInitialized()||Og(n),e.filter.filtersNodes())}function A_(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Og(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Cg(n);if(!c.isCompleteForPath(n)&&Tg(n)>1)return t;var d=Ig(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,I_,null)}var v=Jk(t,u,c.isFullyInitialized()||Og(n),l.filtersNodes());return R_(e,v,n,i,new N_(i,v,a),s)}function O_(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new N_(i,t,a);if(Og(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Xk(t,u,!0,e.filter.filtersNodes());else{var h=Cg(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Xk(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Ig(n),p=c.getNode().getImmediateChild(h);if(Og(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Ng(d)&&v.getChild(Rg(d)).isEmpty()?v:v.updateChild(d,r):mk.EMPTY_NODE}if(p.equals(f))s=t;else s=Xk(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function D_(e,t){return e.eventCache.isCompleteForChild(t)}function L_(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function M_(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Og(n)?r:new t_(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=L_(0,t.serverCache.getNode().getImmediateChild(n),r);c=A_(e,c,new Sg(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=L_(0,t.serverCache.getNode().getImmediateChild(n),r);c=A_(e,c,new Sg(n),h,i,a,o,s)}})),c}var F_,j_=function(){function e(t,n){un(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Tk(i.getIndex()),o=(r=i).loadsAllData()?new Tk(r.getIndex()):r.hasLimit()?new Nk(r):new Ik(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(mk.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(mk.EMPTY_NODE,u.getNode(),null),h=new Gk(c,s.isFullyInitialized(),a.filtersNodes()),f=new Gk(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Yk(f,h),this.eventGenerator_=new Qk(this.query_)}return ln(e,[{key:"query",get:function(){return this.query_}}]),e}();function U_(e,t){var n=e_(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Og(t)&&!n.getImmediateChild(Cg(t)).isEmpty())?n.getChild(t):null}function V_(e){return 0===e.eventRegistrations_.length}function z_(e,t,n){var r=[];if(n){pn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function q_(e,t,n,r){t.type===jk.MERGE&&null!==t.source.queryId&&(pn(e_(e.viewCache_),"We should always have a full cache before handling merges"),pn(Zk(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=P_(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,pn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),pn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),pn(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,B_(e,s.changes,s.viewCache.eventCache.getNode(),null)}function B_(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),$k(e,i,"child_removed",t,r,n),$k(e,i,"child_added",t,r,n),$k(e,i,"child_moved",a,r,n),$k(e,i,"child_changed",t,r,n),$k(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var W_,H_=ln((function e(){un(this,e),this.views=new Map}));function K_(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return pn(null!=a,"SyncTree gave us an op for an invalid query."),q_(a,t,n,r)}var o,s=[],u=tn(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(q_(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function G_(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=k_(n,i?r:null),u=!1;s?u=!0:r instanceof mk?(s=__(n,r),u=!1):(s=mk.EMPTY_NODE,u=!1);var c=Yk(new Gk(s,u,!1),new Gk(r,i,!1));return new j_(t,c)}return o}function Q_(e,t,n,r,i,a){var o=G_(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(lk,(function(e,t){r.push(Sk(e,t))})),n.isFullyInitialized()&&r.push(Ek(n.getNode())),B_(e,r,n.getNode(),t)}(o,n)}function $_(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=eb(e);if("default"===i){var u,c=tn(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=Zt(u.value,2),h=l[0],f=l[1];o=o.concat(z_(f,n,r)),V_(f)&&(e.views.delete(h),f.query._queryParams.loadsAllData()||a.push(f.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(z_(d,n,r)),V_(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return s&&!eb(e)&&a.push(new(pn(F_,"Reference.ts has not been loaded"),F_)(t._repo,t._path)),{removed:a,events:o}}function Y_(e){var t,n=[],r=tn(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function X_(e,t){var n,r=null,i=tn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||U_(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function J_(e,t){if(t._queryParams.loadsAllData())return tb(e);var n=t._queryIdentifier;return e.views.get(n)}function Z_(e,t){return null!=J_(e,t)}function eb(e){return null!=tb(e)}function tb(e){var t,n=tn(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var nb=1,rb=ln((function e(t){un(this,e),this.listenProvider_=t,this.syncPointTree_=new t_(null),this.pendingWriteTree_={visibleWrites:n_.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function ib(e,t,n,r,i){return function(e,t,n,r,i){pn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=r_(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?hb(e,new Hk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ab(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(p_(e.pendingWriteTree_,t)){var i=new t_(null);return null!=r.snap?i=i.set(xg(),!0):Hy(r.children,(function(e){i=i.set(new Sg(e),!0)})),hb(e,new Bk(r.path,i,n))}return[]}function ob(e,t,n){return hb(e,new Hk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function sb(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||Z_(o,t))){var u=$_(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return eb(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&eb(t))return[tb(t)];var r=[];return t&&(r=Y_(t)),Hy(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],m=v.query,y=pb(e,v);e.listenProvider_.startListening(_b(m),vb(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(_b(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(mb(t));e.listenProvider_.stopListening(_b(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=mb(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function ub(e,t,n,r){var i=yb(e,r);if(null!=i){var a=gb(i),o=a.path,s=a.queryId,u=Dg(o,t);return kb(e,o,new Hk(zk(s),u,n))}return[]}function cb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Dg(e,i);a=a||X_(t,n),o=o||eb(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||eb(u),a=a||X_(u,xg())):(u=new H_,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=mk.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=X_(t,xg());n&&(a=a.updateImmediateChild(e,n))})));var c=Z_(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=mb(t);pn(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=nb++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=Q_(u,t,n,d_(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var d=J_(u,t);f=f.concat(function(e,t,n){var r=t._path,i=vb(e,t),a=pb(e,n),o=e.listenProvider_.startListening(_b(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)pn(!eb(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Og(e)&&t&&eb(t))return[tb(t).query];var r=[];return t&&(r=r.concat(Y_(t).map((function(e){return e.query})))),Hy(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(_b(l),vb(e,l))}return o}(e,t,d))}return f}function lb(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=X_(n,Dg(e,t));if(r)return r}));return g_(r,t,i,n,!0)}function hb(e,t){return fb(t,e.syncPointTree_,null,d_(e.pendingWriteTree_,xg()))}function fb(e,t,n,r){if(Og(e.path))return db(e,t,n,r);var i=t.get(xg());null==n&&null!=i&&(n=X_(i,xg()));var a=[],o=Cg(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=x_(r,o);a=a.concat(fb(s,u,c,l))}return i&&(a=a.concat(K_(i,e,r,n))),a}function db(e,t,n,r){var i=t.get(xg());null==n&&null!=i&&(n=X_(i,xg()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=x_(r,t),u=e.operationForChild(t);u&&(a=a.concat(db(u,i,o,s)))})),i&&(a=a.concat(K_(i,e,r,n))),a}function pb(e,t){var n=t.query,r=vb(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||mk.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=yb(e,n);if(r){var i=gb(r),a=i.path,o=i.queryId,s=Dg(a,t);return kb(e,a,new Wk(zk(o),s))}return[]}(e,n._path,r):function(e,t){return hb(e,new Wk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return sb(e,n,null,i)}}}function vb(e,t){var n=mb(t);return e.queryToTagMap.get(n)}function mb(e){return e._path.toString()+"$"+e._queryIdentifier}function yb(e,t){return e.tagToQueryMap.get(t)}function gb(e){var t=e.indexOf("$");return pn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Sg(e.substr(0,t))}}function kb(e,t,n){var r=e.syncPointTree_.get(t);return pn(r,"Missing sync point for query tag that we're tracking"),K_(r,n,d_(e.pendingWriteTree_,t),null)}function _b(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(pn(W_,"Reference.ts has not been loaded"),W_)(e._repo,e._path):e}var bb=function(){function e(t){un(this,e),this.node_=t}return ln(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),wb=function(){function e(t,n){un(this,e),this.syncTree_=t,this.path_=n}return ln(e,[{key:"getImmediateChild",value:function(t){var n=Ag(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return lb(this.syncTree_,this.path_)}}]),e}(),Eb=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Sb=function(e,t,n){return e&&"object"===typeof e?(pn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xb(e[".sv"],t,n):"object"===typeof e[".sv"]?Cb(e[".sv"],t):void pn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xb=function(e,t,n){if("timestamp"===e)return n.timestamp;pn(!1,"Unexpected server value: "+e)},Cb=function(e,t,n){e.hasOwnProperty("increment")||pn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&pn(!1,"Unexpected increment value: "+r);var i=t.node();if(pn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Tb=function(e,t,n,r){return Nb(t,new wb(n,e),r)},Ib=function(e,t,n){return Nb(e,new bb(t),n)};function Nb(e,t,n){var r,i=e.getPriority().val(),a=Sb(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Sb(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new ok(s,kk(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new ok(a))),u.forEachChild(lk,(function(e,i){var a=Nb(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Pb=ln((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};un(this,e),this.name=t,this.parent=n,this.node=r}));function Rb(e,t){for(var n=t instanceof Sg?t:new Sg(t),r=e,i=Cg(n);null!==i;){var a=Wn(r.node.children,i)||{children:{},childCount:0};r=new Pb(i,r,a),i=Cg(n=Ig(n))}return r}function Ab(e){return e.node.value}function Ob(e,t){e.node.value=t,jb(e)}function Db(e){return e.node.childCount>0}function Lb(e,t){Hy(e.node.children,(function(n,r){t(new Pb(n,e,r))}))}function Mb(e,t,n,r){n&&!r&&t(e),Lb(e,(function(e){Mb(e,t,!0,r)})),n&&r&&t(e)}function Fb(e){return new Sg(null===e.parent?e.name:Fb(e.parent)+"/"+e.name)}function jb(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Ab(e)&&!Db(e)}(n),i=Bn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,jb(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,jb(e))}(e.parent,e.name,e)}var Ub=/[\[\].#$\/\u0000-\u001F\u007F]/,Vb=/[\[\].#$\u0000-\u001F\u007F]/,zb=10485760,qb=function(e){return"string"===typeof e&&0!==e.length&&!Ub.test(e)},Bb=function(e){return"string"===typeof e&&0!==e.length&&!Vb.test(e)},Wb=function(e,t,n,r){r&&void 0===t||Hb(tr(e,"value"),t,n)},Hb=function e(t,n,r){var i=r instanceof Sg?new Fg(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ug(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ug(i)+" with contents = "+n.toString());if(Fy(n))throw new Error(t+"contains "+n.toString()+" "+Ug(i));if("string"===typeof n&&n.length>zb/3&&nr(n)>zb)throw new Error(t+"contains a string greater than "+zb+" utf8 bytes "+Ug(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Hy(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!qb(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ug(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=nr(u),jg(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=nr(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ug(i)+" in addition to actual children.")}},Kb=function(e,t,n,r){if((!r||void 0!==n)&&!Bb(n))throw new Error(tr(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Gb=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kb(e,t,n,r)},Qb=function(e,t){if(".info"===Cg(t))throw new Error(e+" failed = Can't modify data under /.info/")},$b=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!qb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Bb(e)}(n))throw new Error(tr(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Yb=ln((function e(){un(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Xb(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Lg(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Jb(e,t,n){Xb(e,n),ew(e,(function(e){return Lg(e,t)}))}function Zb(e,t,n){Xb(e,n),ew(e,(function(e){return Mg(e,t)||Mg(t,e)}))}function ew(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(tw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function tw(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ny&&Ay("event: "+n.toString()),$y(r)}}}var nw="repo_interrupt",rw=25,iw=function(){function e(t,n,r,i){un(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lk(),this.transactionQueueTree_=new Pb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ln(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function aw(e,t,n){if(e.stats_=lg(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ok(e.repoInfo_,(function(t,n,r,i){uw(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return cw(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new qg(e.repoInfo_,t,(function(t,n,r,i){uw(e,t,n,r,i)}),(function(t){cw(e,t)}),(function(t){!function(e,t){Hy(t,(function(t,n){lw(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return cg[n]||(cg[n]=t()),cg[n]}(e.repoInfo_,(function(){return new Vk(e.stats_,e.server_)})),e.infoData_=new Dk,e.infoSyncTree_=new rb({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=ob(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),lw(e,"connected",!1),e.serverSyncTree_=new rb({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Zb(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ow(e){var t=e.infoData_.getNode(new Sg(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sw(e){return Eb({timestamp:ow(e)})}function uw(e,t,n,r,i){e.dataUpdateCount++;var a=new Sg(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Kn(n,(function(e){return kk(e)}));o=function(e,t,n,r){var i=yb(e,r);if(i){var a=gb(i),o=a.path,s=a.queryId,u=Dg(o,t),c=t_.fromObject(n);return kb(e,o,new Kk(zk(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=kk(n);o=ub(e.serverSyncTree_,a,u,i)}else if(r){var c=Kn(n,(function(e){return kk(e)}));o=function(e,t,n){var r=t_.fromObject(n);return hb(e,new Kk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=kk(n);o=ob(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=kw(e,a)),Zb(e.eventQueue_,h,o)}function cw(e,t){lw(e,"connected",t),!1===t&&function(e){vw(e,"onDisconnectEvents");var t=sw(e),n=Lk();Fk(e.onDisconnect_,xg(),(function(r,i){var a=Tb(r,i,e.serverSyncTree_,t);Mk(n,r,a)}));var r=[];Fk(n,xg(),(function(t,n){r=r.concat(ob(e.serverSyncTree_,t,n));var i=Sw(e,t);kw(e,i)})),e.onDisconnect_=Lk(),Zb(e.eventQueue_,xg(),r)}(e)}function lw(e,t,n){var r=new Sg("/.info/"+t),i=kk(n);e.infoData_.updateSnapshot(r,i);var a=ob(e.infoSyncTree_,r,i);Zb(e.eventQueue_,r,a)}function hw(e){return e.nextWriteId_++}function fw(e,t,n,r,i){vw(e,"set",{path:t.toString(),value:n,priority:r});var a=sw(e),o=kk(n,r),s=lb(e.serverSyncTree_,t),u=Ib(o,s,a),c=hw(e),l=ib(e.serverSyncTree_,t,u,c,!0);Xb(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||My("set at "+t+" failed: "+n);var o=ab(e.serverSyncTree_,c,!a);Zb(e.eventQueue_,t,o),mw(e,i,n,r)}));var h=Sw(e,t);kw(e,h),Zb(e.eventQueue_,h,[])}function dw(e,t,n){var r;r=".info"===Cg(t._path)?sb(e.infoSyncTree_,t,n):sb(e.serverSyncTree_,t,n),Jb(e.eventQueue_,t._path,r)}function pw(e){e.persistentConnection_&&e.persistentConnection_.interrupt(nw)}function vw(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ay.apply(void 0,[t].concat(r))}function mw(e,t,n,r){t&&$y((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function yw(e,t,n){return lb(e.serverSyncTree_,t,n)||mk.EMPTY_NODE}function gw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ew(e,t),Ab(t)){var n=bw(e,t);pn(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=yw(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];pn(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Dg(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){vw(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(ab(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Ew(e,Rb(e.transactionQueueTree_,t)),gw(e,e.transactionQueueTree_),Zb(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)$y(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{My("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}kw(e,t)}}),o)}(e,Fb(t),n)}else Db(t)&&Lb(t,(function(t){gw(e,t)}))}function kw(e,t){var n=_w(e,t),r=Fb(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=Dg(n,c.path),h=!1;if(pn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(ab(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=rw)h=!0,s="maxretry",i=i.concat(ab(e.serverSyncTree_,c.currentWriteId,!0));else{var f=yw(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Hb("transaction failed: Data returned ",d,c.path);var p=kk(d);"object"===typeof d&&null!=d&&Bn(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,m=sw(e),y=Ib(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=hw(e),o.splice(o.indexOf(v),1),i=(i=i.concat(ib(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(ab(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(ab(e.serverSyncTree_,c.currentWriteId,!0))}Zb(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);Ew(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)$y(r[c]);gw(e,e.transactionQueueTree_)}(e,bw(e,n),r),r}function _w(e,t){var n,r=e.transactionQueueTree_;for(n=Cg(t);null!==n&&void 0===Ab(r);)r=Rb(r,n),n=Cg(t=Ig(t));return r}function bw(e,t){var n=[];return ww(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ww(e,t,n){var r=Ab(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Lb(t,(function(t){ww(e,t,n)}))}function Ew(e,t){var n=Ab(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ob(t,n.length>0?n:void 0)}Lb(t,(function(t){Ew(e,t)}))}function Sw(e,t){var n=Fb(_w(e,t)),r=Rb(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){xw(e,t)})),xw(e,r),Mb(r,(function(t){xw(e,t)})),n}function xw(e,t){var n=Ab(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(pn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(pn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ab(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ob(t,void 0):n.length=a+1,Zb(e.eventQueue_,Fb(t),i);for(var s=0;s<r.length;s++)$y(r[s])}}var Cw=function(e,t){var n=Tw(e),r=n.namespace;"firebase.com"===n.domain&&Ly(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ly("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&My("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ag(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Sg(n.pathString)}},Tw=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=tn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):My("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Iw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nw=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){un(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return ln(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+zn(this.snapshot.exportVal())}}]),e}()),Pw=function(){function e(t,n,r){un(this,e),this.eventRegistration=t,this.error=n,this.path=r}return ln(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Rw=function(){function e(t,n){un(this,e),this.snapshotCallback=t,this.cancelCallback=n}return ln(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return pn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Aw=function(){function e(t,n,r,i){un(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ln(e,[{key:"key",get:function(){return Og(this._path)?null:Ng(this._path)}},{key:"ref",get:function(){return new Ow(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Ak(this._queryParams),t=By(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Ak(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=rr(t))instanceof e))return!1;var n=this._repo===t._repo,r=Lg(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Ow=function(e){nn(n,e);var t=an(n);function n(e,r){return un(this,n),t.call(this,e,r,new Pk,!1)}return ln(n,[{key:"parent",get:function(){var e=Rg(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Aw),Dw=function(){function e(t,n,r){un(this,e),this._node=t,this.ref=n,this._index=r}return ln(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Sg(t),r=Mw(this.ref,t);return new e(this._node.getChild(n),r,lk)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Mw(n.ref,r),lk))}))}},{key:"hasChild",value:function(e){var t=new Sg(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Lw(e,t){return(e=rr(e))._checkNotDeleted("ref"),void 0!==t?Mw(e._root,t):e._root}function Mw(e,t){return null===Cg((e=rr(e))._path)?Gb("child","path",t,!1):Kb("child","path",t,!1),new Ow(e._repo,Ag(e._path,t))}function Fw(e){return Qb("remove",e._path),jw(e,null)}function jw(e,t){e=rr(e),Qb("set",e._path),Wb("set",t,e._path,!1);var n=new Pn;return fw(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}var Uw=function(){function e(t){un(this,e),this.callbackContext=t}return ln(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Nw("value",this,new Dw(e.snapshotNode,new Ow(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Pw(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Vw=function(){function e(t,n){un(this,e),this.eventType=t,this.callbackContext=n}return ln(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Pw(this,e,t):null}},{key:"createEvent",value:function(e,t){pn(null!=e.childName,"Child events should have a childName.");var n=Mw(new Ow(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Nw(e.type,this,new Dw(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function zw(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){dw(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Rw(n,a||void 0),c="value"===t?new Uw(u):new Vw(t,u);return function(e,t,n){var r;r=".info"===Cg(t._path)?cb(e.infoSyncTree_,t,n):cb(e.serverSyncTree_,t,n),Jb(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return dw(e._repo,e,c)}}function qw(e,t,n,r){return zw(e,"value",t,n,r)}!function(e){pn(!F_,"__referenceConstructor has already been defined"),F_=e}(Ow),function(e){pn(!W_,"__referenceConstructor has already been defined"),W_=e}(Ow);var Bw="FIREBASE_DATABASE_EMULATOR_HOST",Ww={},Hw=!1;function Kw(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ly("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ay("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Cw(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBAZE_API_KEY:"AIzaSyDcAXN1g3Ofl4FsPZGiQSQq4q2QaUmt_Co",REACT_APP_FIREBAZE_APP_ID:"1:1029433028060:web:355fc0e820eb8221987319",REACT_APP_FIREBAZE_AUTH_DOMAIN:"reservation-app-57c2d.firebaseapp.com",REACT_APP_FIREBAZE_MESSAGING_SENDER_ID:"1029433028060",REACT_APP_FIREBAZE_PROJECT_ID:"reservation-app-57c2d",REACT_APP_FIREBAZE_STORAGE_BUCKET:"reservation-app-57c2d.appspot.com"}[Bw]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Cw(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Zy(Zy.OWNER):new Jy(e.name,e.options,t);$b("Invalid Firebase Database URL",s),Og(s.path)||Ly("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Ww[t.name];i||(i={},Ww[t.name]=i);var a=i[e.toURLString()];a&&Ly("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new iw(e,Hw,n,r),i[e.toURLString()]=a,a}(u,e,l,new Xy(e.name,n));return new Gw(h,e)}var Gw=function(){function e(t,n){un(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ln(e,[{key:"_repo",get:function(){return this._instanceStarted||(aw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Ow(this._repo,xg())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Ww[t];n&&n[e.key]===e||Ly("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),pw(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ly("Cannot call "+e+" on a deleted database.")}}]),e}();function Qw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=rr(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ly("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ly('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Zy(Zy.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Rn(r.mockUserToken,e.app.options.projectId);a=new Zy(o)}!function(e,t,n,r){e.repoInfo_=new ag("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}qg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},qg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){ky=e}($r),Wr(new ir("database",(function(e,t){var n=t.instanceIdentifier;return Kw(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Jr(yy,gy,e),Jr(yy,gy,"esm2017")}();function $w(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Yw;function Xw(){return c({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Jw=Xw,Zw=new jn("auth","Firebase",Xw()),eE=new vr("@firebase/auth");function tE(e){if(eE.logLevel<=ur.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eE.warn.apply(eE,["Auth (".concat($r,"): ").concat(e)].concat(n))}}function nE(e){if(eE.logLevel<=ur.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eE.error.apply(eE,["Auth (".concat($r,"): ").concat(e)].concat(n))}}function rE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw oE.apply(void 0,[e].concat(n))}function iE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oE.apply(void 0,[e].concat(n))}function aE(e,t,n){var r=Object.assign(Object.assign({},Jw()),c({},t,n));return new jn("auth","Firebase",r).create(t,{appName:e.name})}function oE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=sn(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(sn(o)))}return Zw.create.apply(Zw,[e].concat(n))}function sE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw oE.apply(void 0,[t].concat(r))}}function uE(e){var t="INTERNAL ASSERTION FAILED: "+e;throw nE(t),new Error(t)}function cE(e,t){e||uE(t)}function lE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hE(){return"http:"===fE()||"https:"===fE()}function fE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function dE(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hE()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var pE=function(){function e(t,n){un(this,e),this.shortDelay=t,this.longDelay=n,cE(n>t,"Short delay should be less than long delay!"),this.isMobile=On()||Dn()}return ln(e,[{key:"get",value:function(){return dE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function vE(e,t){cE(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var mE=function(){function e(){un(this,e)}return ln(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void uE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void uE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void uE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),yE=(c(Yw={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),c(Yw,"MISSING_CUSTOM_TOKEN","internal-error"),c(Yw,"INVALID_IDENTIFIER","invalid-email"),c(Yw,"MISSING_CONTINUE_URI","internal-error"),c(Yw,"INVALID_PASSWORD","wrong-password"),c(Yw,"MISSING_PASSWORD","missing-password"),c(Yw,"EMAIL_EXISTS","email-already-in-use"),c(Yw,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),c(Yw,"INVALID_IDP_RESPONSE","invalid-credential"),c(Yw,"INVALID_PENDING_TOKEN","invalid-credential"),c(Yw,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),c(Yw,"MISSING_REQ_TYPE","internal-error"),c(Yw,"EMAIL_NOT_FOUND","user-not-found"),c(Yw,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),c(Yw,"EXPIRED_OOB_CODE","expired-action-code"),c(Yw,"INVALID_OOB_CODE","invalid-action-code"),c(Yw,"MISSING_OOB_CODE","internal-error"),c(Yw,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),c(Yw,"INVALID_ID_TOKEN","invalid-user-token"),c(Yw,"TOKEN_EXPIRED","user-token-expired"),c(Yw,"USER_NOT_FOUND","user-token-expired"),c(Yw,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),c(Yw,"INVALID_CODE","invalid-verification-code"),c(Yw,"INVALID_SESSION_INFO","invalid-verification-id"),c(Yw,"INVALID_TEMPORARY_PROOF","invalid-credential"),c(Yw,"MISSING_SESSION_INFO","missing-verification-id"),c(Yw,"SESSION_EXPIRED","code-expired"),c(Yw,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),c(Yw,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),c(Yw,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),c(Yw,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),c(Yw,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),c(Yw,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),c(Yw,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),c(Yw,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),c(Yw,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),c(Yw,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),c(Yw,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),c(Yw,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),c(Yw,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),c(Yw,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),c(Yw,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),c(Yw,"MISSING_CLIENT_TYPE","missing-client-type"),c(Yw,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),c(Yw,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),c(Yw,"INVALID_REQ_TYPE","invalid-req-type"),Yw),gE=new pE(3e4,6e4);function kE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function _E(e,t,n,r){return bE.apply(this,arguments)}function bE(){return bE=Bt(zt().mark((function e(t,n,r,i){var a,o=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",wE(t,a,Bt(zt().mark((function e(){var a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=$n(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",mE.fetch()(CE(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function wE(e,t,n){return EE.apply(this,arguments)}function EE(){return EE=Bt(zt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},yE),n),e.prev=2,a=new TE(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw IE(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=Zt(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw IE(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw IE(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw IE(t,"user-disabled",s);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw aE(t,d,f);case 34:rE(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Fn)){e.next=41;break}throw e.t0;case 41:rE(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),EE.apply(this,arguments)}function SE(e,t,n,r){return xE.apply(this,arguments)}function xE(){return xE=Bt(zt().mark((function e(t,n,r,i){var a,o,s=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,_E(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&rE(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function CE(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?vE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var TE=function(){function e(t){var n=this;un(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(iE(n.auth,"network-request-failed"))}),gE.get())}))}return ln(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function IE(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=iE(e,t,r);return i.customData._tokenResponse=n,i}function NE(e,t){return PE.apply(this,arguments)}function PE(){return PE=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),PE.apply(this,arguments)}function RE(e,t){return AE.apply(this,arguments)}function AE(){return AE=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),AE.apply(this,arguments)}function OE(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function DE(){return DE=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=rr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,sE((a=ME(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:OE(LE(a.auth_time)),issuedAtTime:OE(LE(a.iat)),expirationTime:OE(LE(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function LE(e){return 1e3*Number(e)}function ME(e){var t=Zt(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return nE("JWT malformed, contained fewer than 3 sections"),null;try{var a=bn(r);return a?JSON.parse(a):(nE("Failed to decode base64 JWT payload"),null)}catch(o){return nE("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function FE(e,t){return jE.apply(this,arguments)}function jE(){return jE=Bt(zt().mark((function e(t,n){var r=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Fn&&UE(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),jE.apply(this,arguments)}function UE(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var VE=function(){function e(t){un(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ln(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Bt(zt().mark((function t(){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),zE=function(){function e(t,n){un(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ln(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=OE(this.lastLoginAt),this.creationTime=OE(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function qE(e){return BE.apply(this,arguments)}function BE(){return BE=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,FE(t,RE(r,{idToken:i}));case 6:sE(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=$w(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=HE(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new zE(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),BE.apply(this,arguments)}function WE(){return(WE=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rr(t),e.next=3,qE(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HE(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(sn(n),sn(t))}function KE(e,t){return GE.apply(this,arguments)}function GE(){return GE=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wE(t,{},Bt(zt().mark((function e(){var r,i,a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$n({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=CE(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",mE.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}var QE=function(){function e(){un(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ln(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){sE(e.idToken,"internal-error"),sE("undefined"!==typeof e.idToken,"internal-error"),sE("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ME(e);return sE(t,"internal-error"),sE("undefined"!==typeof t.exp,"internal-error"),sE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Bt(zt().mark((function e(t){var n,r=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],sE(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Bt(zt().mark((function e(t,n){var r,i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KE(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return uE("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(sE("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(sE("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(sE("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function $E(e,t){sE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var YE=function(){function e(t){un(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$w(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?sn(a.providerData):[],this.metadata=new zE(a.createdAt||void 0,a.lastLoginAt||void 0)}return ln(e,[{key:"getIdToken",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FE(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(sE(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return DE.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return WE.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(sE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){sE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,qE(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,FE(this,NE(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,b=n.isAnonymous,w=n.providerData,E=n.stsTokenManager;sE(k&&E,t,"internal-error");var S=QE.fromJSON(this.name,E);sE("string"===typeof k,t,"internal-error"),$E(h,t.name),$E(f,t.name),sE("boolean"===typeof _,t,"internal-error"),sE("boolean"===typeof b,t,"internal-error"),$E(d,t.name),$E(p,t.name),$E(v,t.name),$E(m,t.name),$E(y,t.name),$E(g,t.name);var x=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return w&&Array.isArray(w)&&(x.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(x._redirectEventId=m),x}},{key:"_fromIdTokenResponse",value:function(){var t=Bt(zt().mark((function t(n,r){var i,a,o,s=arguments;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new QE).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,qE(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),XE=new Map;function JE(e){cE(e instanceof Function,"Expected a class definition");var t=XE.get(e);return t?(cE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,XE.set(e,t),t)}var ZE=function(){function e(){un(this,e),this.type="NONE",this.storage={}}return ln(e,[{key:"_isAvailable",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ZE.type="NONE";var eS=ZE;function tS(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var nS=function(){function e(t,n,r){un(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=tS(this.userKey,a.apiKey,o),this.fullPersistenceKey=tS("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ln(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?YE._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Bt(zt().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(JE(eS),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||JE(eS),s=tS(i,n.config.apiKey,n.name),u=null,c=tn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=YE._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function rS(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cS(t))return"Blackberry";if(lS(t))return"Webos";if(aS(t))return"Safari";if((t.includes("chrome/")||oS(t))&&!t.includes("edge/"))return"Chrome";if(uS(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function iS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/firefox\//i.test(e)}function aS(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:An()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/crios\//i.test(e)}function sS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/iemobile/i.test(e)}function uS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/android/i.test(e)}function cS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/blackberry/i.test(e)}function lS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/webos/i.test(e)}function hS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fS(){return function(){var e=An();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function dS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();return hS(e)||uS(e)||lS(e)||cS(e)||/windows phone/i.test(e)||sS(e)}function pS(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rS(An());break;case"Worker":t="".concat(rS(An()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($r,"/").concat(r)}function vS(e,t){return mS.apply(this,arguments)}function mS(){return mS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"GET","/v2/recaptchaConfig",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}function yS(e){return void 0!==e&&void 0!==e.enterprise}var gS=ln((function e(t){if(un(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function kS(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=iE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function _S(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var bS=function(){function e(t){un(this,e),this.type="recaptcha-enterprise",this.auth=CS(t)}return ln(e,[{key:"verify",value:function(){var e=Bt(zt().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;yS(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Bt(zt().mark((function e(n,r){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vS(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new gS(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&yS(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));kS("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wS(e,t,n){return ES.apply(this,arguments)}function ES(){return ES=Bt(zt().mark((function e(t,n,r){var i,a,o,s,u=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new bS(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),ES.apply(this,arguments)}var SS=function(){function e(t){un(this,e),this.auth=t,this.queue=[]}return ln(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=tn(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=tn(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(ae){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xS=function(){function e(t,n,r,i){un(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TS(this),this.idTokenSubscription=new TS(this),this.beforeStateQueue=new SS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return ln(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=JE(t)),this._initializationPromise=this.queue(Bt(zt().mark((function r(){var i,a;return zt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,nS.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return sE(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qE(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?rr(t):null)&&sE(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Bt(zt().mark((function e(t){var n,r=this,i=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&sE(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Bt(zt().mark((function n(){return zt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(JE(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Bt(zt().mark((function e(){var t,n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vS(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new gS(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new bS(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new jn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return sE(n=t&&JE(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,nS.create(this,[JE(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Bt(zt().mark((function e(t){var n=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return sE(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return sE(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Bt(zt().mark((function e(){var t,n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Bt(zt().mark((function e(){var t,n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&tE("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function CS(e){return rr(e)}var TS=function(){function e(t){var n=this;un(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new Zn(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return ln(e,[{key:"next",get:function(){return sE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function IS(e,t,n){var r=CS(e);sE(r._canInitEmulator,r,"emulator-config-failed"),sE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=NS(t),o=function(e){var t=NS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:PS(r.substr(a.length+1))}}var o=Zt(r.split(":"),2);return{host:o[0],port:PS(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function NS(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function PS(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var RS=function(){function e(t,n){un(this,e),this.providerId=t,this.signInMethod=n}return ln(e,[{key:"toJSON",value:function(){return uE("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return uE("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return uE("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return uE("not implemented")}}]),e}();function AS(e,t){return OS.apply(this,arguments)}function OS(){return OS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t){return LS.apply(this,arguments)}function LS(){return LS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithPassword",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e,t){return FS.apply(this,arguments)}function FS(){return FS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithEmailLink",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),FS.apply(this,arguments)}function jS(e,t){return US.apply(this,arguments)}function US(){return US=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithEmailLink",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),US.apply(this,arguments)}var VS=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return un(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ln(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,wS(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",DS(t,i));case 11:return e.abrupt("return",DS(t,r).catch(function(){var e=Bt(zt().mark((function e(n){var i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,wS(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",DS(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",MS(t,{email:this._email,oobCode:this._password}));case 13:rE(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",AS(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",jS(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:rE(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(RS);function zS(e,t){return qS.apply(this,arguments)}function qS(){return qS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithIdp",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}var BS=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ln(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return zS(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,zS(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,zS(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$n(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rE("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$w(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(RS);function WS(e,t){return HS.apply(this,arguments)}function HS(){return HS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"POST","/v1/accounts:sendVerificationCode",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function KS(){return KS=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithPhoneNumber",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function GS(){return GS=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SE(t,"POST","/v1/accounts:signInWithPhoneNumber",kE(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw IE(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),GS.apply(this,arguments)}var QS=c({},"USER_NOT_FOUND","user-not-found");function $S(){return $S=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",SE(t,"POST","/v1/accounts:signInWithPhoneNumber",kE(t,r),QS));case 2:case"end":return e.stop()}}),e)}))),$S.apply(this,arguments)}var YS=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ln(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return KS.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return GS.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return $S.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(RS);var XS=function(){function e(t){var n,r,i,a,o,s;un(this,e);var u=Yn(Xn(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);sE(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return ln(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Yn(Xn(e)).link,n=t?Yn(Xn(t)).deep_link_id:null,r=Yn(Xn(e)).deep_link_id;return(r?Yn(Xn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var JS=function(){function e(){un(this,e),this.providerId=e.PROVIDER_ID}return ln(e,null,[{key:"credential",value:function(e,t){return VS._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=XS.parseLink(t);return sE(n,"argument-error"),VS._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();JS.PROVIDER_ID="password",JS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",JS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ZS=function(){function e(t){un(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ln(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ex=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ln(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return sn(this.scopes)}}]),n}(ZS),tx=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.call(this,"facebook.com")}return ln(n,null,[{key:"credential",value:function(e){return BS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ex);tx.FACEBOOK_SIGN_IN_METHOD="facebook.com",tx.PROVIDER_ID="facebook.com";var nx=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ln(n,null,[{key:"credential",value:function(e,t){return BS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ex);nx.GOOGLE_SIGN_IN_METHOD="google.com",nx.PROVIDER_ID="google.com";var rx=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.call(this,"github.com")}return ln(n,null,[{key:"credential",value:function(e){return BS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ex);rx.GITHUB_SIGN_IN_METHOD="github.com",rx.PROVIDER_ID="github.com";var ix=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.call(this,"twitter.com")}return ln(n,null,[{key:"credential",value:function(e,t){return BS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ex);function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SE(t,"POST","/v1/accounts:signUp",kE(t,n)));case 1:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}ix.TWITTER_SIGN_IN_METHOD="twitter.com",ix.PROVIDER_ID="twitter.com";var sx=function(){function e(t){un(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ln(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Bt(zt().mark((function t(n,r,i){var a,o,s,u,c=arguments;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,YE._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=ux(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Bt(zt().mark((function t(n,r,i){var a;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ux(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ux(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var cx=function(e){nn(n,e);var t=an(n);function n(e,r,i,a){var o,s;return un(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(rn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ln(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Fn);function lx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw cx._fromErrorAndOperation(e,n,t,r);throw n}))}function hx(e,t){return fx.apply(this,arguments)}function fx(){return fx=Bt(zt().mark((function e(t,n){var r,i,a=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=FE,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",sx._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=Bt(zt().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,FE(t,lx(i,a,n,t),r);case 6:return sE((o=e.sent).idToken,i,"internal-error"),sE(s=ME(o.idToken),i,"internal-error"),u=s.sub,sE(t.uid===u,i,"user-mismatch"),e.abrupt("return",sx._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&rE(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),px.apply(this,arguments)}function vx(e,t){return mx.apply(this,arguments)}function mx(){return mx=Bt(zt().mark((function e(t,n){var r,i,a,o,s=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,lx(t,i,n);case 4:return a=e.sent,e.next=7,sx._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function yx(e,t){return gx.apply(this,arguments)}function gx(){return gx=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vx(CS(t),n));case 1:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e,t){return _x.apply(this,arguments)}function _x(){return(_x=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dx(rr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bx(){return bx=Bt(zt().mark((function e(t,n,r){var i,a,o,s,u,c,l;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=CS(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,wS(a,o,"signUpPassword");case 5:u=e.sent,s=ax(a,u),e.next=10;break;case 9:s=ax(a,o).catch(function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,wS(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",ax(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,sx._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function wx(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Sx(e,t){return xx.apply(this,arguments)}function xx(){return(xx=Bt(zt().mark((function e(t,n){var r,i,a,o,s,u,c;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=rr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,FE(a,wx(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cx(e,t){return Ix(rr(e),t,null)}function Tx(e,t){return Ix(rr(e),null,t)}function Ix(e,t,n){return Nx.apply(this,arguments)}function Nx(){return Nx=Bt(zt().mark((function e(t,n,r){var i,a,o,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,FE(t,AS(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Px(e,t){return _E(e,"POST","/v2/accounts/mfaEnrollment:start",kE(e,t))}function Rx(e,t){return _E(e,"POST","/v2/accounts/mfaEnrollment:start",kE(e,t))}function Ax(e,t){return _E(e,"POST","/v2/accounts/mfaEnrollment:finalize",kE(e,t))}new WeakMap;var Ox="__sak",Dx=function(){function e(t,n){un(this,e),this.storageRetriever=t,this.type=n}return ln(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ox,"1"),this.storage.removeItem(Ox),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Lx=function(e){nn(n,e);var t=an(n);function n(){var e;return un(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=An();return aS(e)||hS(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=dS(),e._shouldAllowMigration=!0,e}return ln(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);fS()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Bt(zt().mark((function e(t,r){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt(Gt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Bt(zt().mark((function e(t){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt(Gt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt(Gt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Dx);Lx.type="LOCAL";var Mx=Lx,Fx=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ln(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Dx);Fx.type="SESSION";var jx=Fx;function Ux(e){return Promise.all(e.map(function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Vx=function(){function e(t){un(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ln(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u,c;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ux(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function zx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vx.receivers=[];var qx=function(){function e(t){un(this,e),this.target=t,this.handlers=new Set}return ln(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Bt(zt().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=zx("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Bx(){return window}function Wx(e){Bx().location.href=e}function Hx(){return"undefined"!==typeof Bx().WorkerGlobalScope&&"function"===typeof Bx().importScripts}function Kx(){return Gx.apply(this,arguments)}function Gx(){return(Gx=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Qx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var $x="firebaseLocalStorageDb",Yx="firebaseLocalStorage",Xx="fbase_key",Jx=function(){function e(t){un(this,e),this.request=t}return ln(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Zx(e,t){return e.transaction([Yx],t?"readwrite":"readonly").objectStore(Yx)}function eC(){var e=indexedDB.deleteDatabase($x);return new Jx(e).toPromise()}function tC(){var e=indexedDB.open($x,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Yx,{keyPath:Xx})}catch(r){n(r)}})),e.addEventListener("success",Bt(zt().mark((function n(){var r;return zt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Yx)){n.next=12;break}return r.close(),n.next=5,eC();case 5:return n.t0=t,n.next=8,tC();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function nC(e,t,n){return rC.apply(this,arguments)}function rC(){return rC=Bt(zt().mark((function e(t,n,r){var i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zx(t,!0).put((c(i={},Xx,n),c(i,"value",r),i)),e.abrupt("return",new Jx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),rC.apply(this,arguments)}function iC(e,t){return aC.apply(this,arguments)}function aC(){return aC=Bt(zt().mark((function e(t,n){var r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zx(t,!1).get(n),e.next=3,new Jx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),aC.apply(this,arguments)}function oC(e,t){var n=Zx(e,!0).delete(t);return new Jx(n).toPromise()}var sC=function(){function e(){un(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ln(e,[{key:"_openDb",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,tC();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Bt(zt().mark((function e(){var t=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Vx._getInstance(Hx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Bt(zt().mark((function e(n,r){var i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Bt(zt().mark((function e(t,n){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Bt(zt().mark((function e(){var t,n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new qx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Qx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tC();case 5:return t=e.sent,e.next=8,nC(t,Ox,"1");case 8:return e.next=10,oC(t,Ox);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Bt(zt().mark((function e(t){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Bt(zt().mark((function e(t,n){var r=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return nC(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return iC(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Bt(zt().mark((function e(t){var n=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return oC(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Bt(zt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Zx(e,!1).getAll();return new Jx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=tn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Bt(zt().mark((function t(){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();sC.type="LOCAL";var uC=sC;function cC(e,t){return _E(e,"POST","/v2/accounts/mfaSignIn:start",kE(e,t))}function lC(e,t){return _E(e,"POST","/v2/accounts/mfaSignIn:finalize",kE(e,t))}_S("rcb"),new pE(3e4,6e4);var hC="recaptcha";function fC(e,t,n){return dC.apply(this,arguments)}function dC(){return dC=Bt(zt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,sE("string"===typeof a,t,"argument-error"),sE(r.type===hC,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return sE("enroll"===s.type,t,"internal-error"),e.next=13,Px(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return sE("signin"===s.type,t,"internal-error"),sE(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,cC(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,WS(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),dC.apply(this,arguments)}var pC=function(){function e(t){un(this,e),this.providerId=e.PROVIDER_ID,this.auth=CS(t)}return ln(e,[{key:"verifyPhoneNumber",value:function(e,t){return fC(this.auth,e,rr(t))}}],[{key:"credential",value:function(e,t){return YS._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?YS._fromTokenResponse(n,r):null}}]),e}();function vC(e,t){return t?JE(t):(sE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pC.PROVIDER_ID="phone",pC.PHONE_SIGN_IN_METHOD="phone";var mC=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ln(n,[{key:"_getIdTokenResponse",value:function(e){return zS(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return zS(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return zS(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(RS);function yC(e){return vx(e.auth,new mC(e),e.bypassAuthState)}function gC(e){var t=e.auth,n=e.user;return sE(n,t,"internal-error"),dx(n,new mC(e),e.bypassAuthState)}function kC(e){return _C.apply(this,arguments)}function _C(){return _C=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,sE(r=t.user,n,"internal-error"),e.abrupt("return",hx(r,new mC(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),_C.apply(this,arguments)}var bC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];un(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ln(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Bt(zt().mark((function t(n,r){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i,a,o,s,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return kC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:rE(this.auth,"internal-error")}}},{key:"resolve",value:function(e){cE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){cE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),wC=new pE(2e3,1e4);var EC=function(e){nn(n,e);var t=an(n);function n(e,r,i,a,o){var s;return un(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=rn(s),s}return ln(n,[{key:"executeNotNull",value:function(){var e=Bt(zt().mark((function e(){var t;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return sE(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Bt(zt().mark((function e(){var t,n=this;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cE(1===this.filter.length,"Popup operations only handle one event"),t=zx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(iE(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(iE(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(iE(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,wC.get())}()}}]),n}(bC);EC.currentPopupAction=null;var SC="pendingRedirect",xC=new Map,CC=function(e){nn(n,e);var t=an(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return un(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ln(n,[{key:"execute",value:function(){var e=Bt(zt().mark((function e(){var t,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xC.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,TC(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Qt(Gt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:xC.set(this.auth._key(),t);case 21:return this.bypassAuthState||xC.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Bt(zt().mark((function e(t){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Qt(Gt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Qt(Gt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Bt(zt().mark((function e(){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bC);function TC(e,t){return IC.apply(this,arguments)}function IC(){return IC=Bt(zt().mark((function e(t,n){var r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=RC(n),i=PC(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),IC.apply(this,arguments)}function NC(e,t){xC.set(e._key(),t)}function PC(e){return JE(e._redirectPersistence)}function RC(e){return tS(SC,e.config.apiKey,e.name)}function AC(e,t){return OC.apply(this,arguments)}function OC(){return OC=Bt(zt().mark((function e(t,n){var r,i,a,o,s,u=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=CS(t),a=vC(i,n),o=new CC(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),OC.apply(this,arguments)}var DC=function(){function e(t){un(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ln(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!MC(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(iE(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LC(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(LC(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function LC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function MC(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function FC(e){return jC.apply(this,arguments)}function jC(){return jC=Bt(zt().mark((function e(t){var n,r=arguments;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",_E(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jC.apply(this,arguments)}var UC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;function zC(){return zC=Bt(zt().mark((function e(t){var n,r,i,a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,FC(t);case 4:n=e.sent,r=n.authorizedDomains,i=tn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!qC(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:rE(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),zC.apply(this,arguments)}function qC(e){var t=lE(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!VC.test(r))return!1;if(UC.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var BC=new pE(3e4,6e4);function WC(){var e=Bx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=sn(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var HC=null;function KC(e){return HC=HC||function(e){return new Promise((function(t,n){var r,i,a;function o(){WC(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){WC(),n(iE(e,"network-request-failed"))},timeout:BC.get()})}if(null===(i=null===(r=Bx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Bx().gapi)||void 0===a?void 0:a.load)){var s=_S("iframefcb");return Bx()[s]=function(){gapi.load?o():n(iE(e,"network-request-failed"))},kS("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw HC=null,e}))}(e),HC}var GC=new pE(5e3,15e3),QC="__/auth/iframe",$C="emulator/auth/iframe",YC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JC(e){var t=e.config;sE(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?vE(t,$C):"https://".concat(e.config.authDomain,"/").concat(QC),r={apiKey:t.apiKey,appName:e.name,v:$r},i=XC.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat($n(r).slice(1))}function ZC(e){return eT.apply(this,arguments)}function eT(){return eT=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KC(t);case 2:return n=e.sent,sE(r=Bx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:JC(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YC,dontclear:!0},(function(e){return new Promise(function(){var n=Bt(zt().mark((function n(r,i){var a,o,s;return zt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Bx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=iE(t,"network-request-failed"),o=Bx().setTimeout((function(){i(a)}),GC.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}var tT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nT=function(){function e(t){un(this,e),this.window=t,this.associatedEvent=null}return ln(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function rT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},tT),{width:r.toString(),height:i.toString(),top:a,left:o}),c=An().toLowerCase();n&&(s=oS(c)?"_blank":n),iS(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=Zt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return hS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:An())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new nT(null);var h=window.open(t||"",s,l);sE(h,e,"popup-blocked");try{h.focus()}catch(f){}return new nT(h)}var iT="__/auth/handler",aT="emulator/auth/handler",oT=encodeURIComponent("fac");function sT(e,t,n,r,i,a){return uT.apply(this,arguments)}function uT(){return uT=Bt(zt().mark((function e(t,n,r,i,a,o){var s,u,c,l,h,f,d,p,v,m,y,g,k;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sE(t.config.authDomain,t,"auth-domain-config-required"),sE(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:$r,eventId:a},n instanceof ZS)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Hn(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)l=Zt(c[u],2),h=l[0],f=l[1],s[h]=f;for(n instanceof ex&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=d.join(",")),t.tenantId&&(s.tid=t.tenantId),p=s,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(oT,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(cT(t),"?").concat($n(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),uT.apply(this,arguments)}function cT(e){var t=e.config;return t.emulator?vE(t,aT):"https://".concat(t.authDomain,"/").concat(iT)}var lT="webStorageSupport",hT=function(){function e(){un(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jx,this._completeRedirectFn=AC,this._overrideRedirectResult=NC}return ln(e,[{key:"_openPopup",value:function(){var e=Bt(zt().mark((function e(t,n,r,i){var a,o;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cE(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,sT(t,n,r,lE(),i);case 3:return o=e.sent,e.abrupt("return",rT(t,o,zx()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Bt(zt().mark((function e(t,n,r,i){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,sT(t,n,r,lE(),i);case 4:return Wx(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(cE(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Bt(zt().mark((function e(t){var n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZC(t);case 2:return n=e.sent,r=new DC(t),n.register("authEvent",(function(e){return sE(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lT,{type:lT},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lT];void 0!==i&&t(!!i),rE(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zC.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return dS()||aS()||hS()}}]),e}(),fT=hT,dT=function(){function e(t){un(this,e),this.factorId=t}return ln(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return uE("unexpected MultiFactorSessionType")}}}]),e}(),pT=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this,"phone")).credential=e,r}return ln(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return _E(e,"POST","/v2/accounts/mfaEnrollment:finalize",kE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return _E(e,"POST","/v2/accounts/mfaSignIn:finalize",kE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(dT);(function(){function e(){un(this,e)}return ln(e,null,[{key:"assertion",value:function(e){return pT._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var vT=function(){function e(){un(this,e)}return ln(e,null,[{key:"assertionForEnrollment",value:function(e,t){return mT._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return mT._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Bt(zt().mark((function e(t){var n,r,i;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sE("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Rx(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",yT._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();vT.FACTOR_ID="totp";var mT=function(e){nn(n,e);var t=an(n);function n(e,r,i){var a;return un(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return ln(n,[{key:"_finalizeEnroll",value:function(){var e=Bt(zt().mark((function e(t,n,r){return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sE("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ax(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sE(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",lC(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(dT),yT=function(){function e(t,n,r,i,a,o,s){un(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return ln(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(gT(e)||gT(t))&&(r=!0),r&&(gT(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),gT(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function gT(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var kT="@firebase/auth",_T="1.0.0",bT=function(){function e(t){un(this,e),this.auth=t,this.internalListeners=new Map}return ln(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Bt(zt().mark((function e(t){var n;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){sE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var wT,ET=Nn("authIdTokenMaxAge")||300,ST=null;wT="Browser",Wr(new ir("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;sE(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:wT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(wT)},l=new xS(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(JE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Wr(new ir("auth-internal",(function(e){return function(e){return new bT(e)}(CS(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(kT,_T,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wT)),Jr(kT,_T,"esm2017");var xT,CT=Yr({apiKey:"AIzaSyDcAXN1g3Ofl4FsPZGiQSQq4q2QaUmt_Co",authDomain:"reservation-app-57c2d.firebaseapp.com",projectId:"reservation-app-57c2d",storageBucket:"reservation-app-57c2d.appspot.com",messagingSenderId:"1029433028060",appId:"1:1029433028060:web:355fc0e820eb8221987319"}),TT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr(),t=Hr(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=Hr(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Gn(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;rE(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:fT,persistence:[uC,Mx,jx]}),i=Nn("authTokenSyncURL");if(i){var a=(n=i,function(){var e=Bt(zt().mark((function e(t){var r,i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>ET)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,ST!==a){e.next=12;break}return e.abrupt("return");case 12:return ST=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){rr(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){rr(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=Cn("auth");return o&&IS(r,"http://".concat(o)),r}(),IT=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Hr("object"==typeof e?e:Xr(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=Tn("firestore");i&&gm.apply(void 0,[r].concat(sn(i)))}return r}(CT),NT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr(),t=arguments.length>1?arguments[1]:void 0,n=Hr(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=Tn("database");r&&Qw.apply(void 0,[n].concat(sn(r)))}return n}(CT),PT=function(e,t){var n=e.day.toString().length<2?"0".concat(e.day):e.day,r=e.month.toString().length<2?"0".concat(e.month):e.month;return"".concat(n).concat(t).concat(r).concat(t).concat(e.year)},RT=gt("reservs/getMyReservs",Bt(zt().mark((function e(){var t,n,r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hy(wm(IT,"".concat(TT.currentUser.uid)));case 3:return t=e.sent,n=[],r=[],t.forEach((function(e){var t,i=PT(e.data().date,"-").split("-").reverse().join("-"),a=e.data().time.from,o=new Date("".concat(i,"T").concat(a.hours,":").concat(a.minutes,":00")),s=new Date;t=!((s-o)/36e5>=-1);var u=R(R({},e.data()),{},{editable:t});o<s?r.push(u):n.push(u)})),e.abrupt("return",{dataCurr:n,dataArchive:r});case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),AT=gt("reservs/deleteMyReservs",function(){var e=Bt(zt().mark((function e(t,n){var r;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.prev=1,e.next=4,py(Em(IT,"".concat(TT.currentUser.uid),t));case 4:r(LT({id:t})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),OT=ft({name:"myReserv",initialState:{myReserv:{currReserv:[],archive:[]},status:null,error:null},reducers:{setMyReserv:function(e,t){return e.currReserv.push(t.payload),e},deleteReserv:function(e,t){e.myReserv.currReserv=e.myReserv.currReserv.filter((function(e){return e.id!==t.payload.id}))}},extraReducers:function(e){e.addCase(RT.fulfilled,(function(e,t){e.status="resolved",e.myReserv.currReserv=t.payload.dataCurr,e.myReserv.archive=t.payload.dataArchive})).addCase(RT.pending,(function(e){e.status="loading",e.error=null}))}}),DT=OT.actions,LT=(DT.setMyReserv,DT.deleteReserv),MT=OT.reducer,FT=ft({name:"dataRef",initialState:{dataRef:""},reducers:{setDataRef:function(e,t){e.dataRef=t.payload.dataRef}}}),jT=FT.actions.setDataRef,UT=function(e){var t,n=ct(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,u=r.devTools,c=void 0===u||u,l=r.preloadedState,h=void 0===l?void 0:l,f=r.enhancers,d=void 0===f?void 0:f;if("function"===typeof a)t=a;else{if(!at(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=j(a)}var p=s;"function"===typeof p&&(p=p(n));var v=V.apply(void 0,p),m=U;c&&(m=it(tt({trace:!1},"object"===typeof c&&c)));var y=new st(v),g=y;return Array.isArray(d)?g=Ge([v],d):"function"===typeof d&&(g=d(y)),F(t,h,m.apply(void 0,g))}({reducer:j({user:Nt,reserv:Vt,myReserv:MT,dataRef:FT.reducer})});function VT(){return VT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VT.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(xT||(xT={}));var zT,qT="popstate";function BT(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function WT(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function HT(e,t){return{usr:e.state,key:e.key,idx:t}}function KT(e,t,n,r){return void 0===n&&(n=null),VT({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?QT(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function GT(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function QT(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function $T(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=xT.Pop,h=null,f=d();function d(){return(c.state||{idx:null}).idx}function p(){l=xT.Pop;var e=d(),t=null==e?null:e-f;f=e,h&&h({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:GT(e);return BT(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,c.replaceState(VT({},c.state,{idx:f}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(qT,p),h=e,function(){o.removeEventListener(qT,p),h=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=xT.Push;var r=KT(m.location,e,t);n&&n(r,e);var i=HT(r,f=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(Dy){if(Dy instanceof DOMException&&"DataCloneError"===Dy.name)throw Dy;o.location.assign(a)}u&&h&&h({action:l,location:m.location,delta:1})},replace:function(e,t){l=xT.Replace;var r=KT(m.location,e,t);n&&n(r,e);var i=HT(r,f=d()),a=m.createHref(r);c.replaceState(i,"",a),u&&h&&h({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(zT||(zT={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function YT(e,t,n){void 0===n&&(n="/");var r=lI(("string"===typeof t?QT(t):t).pathname||"/",n);if(null==r)return null;var i=XT(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=sI(i[o],cI(r));return a}function XT(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(BT(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=pI([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(BT(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),XT(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:oI(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=tn(JT(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function JT(e){var t=e.split("/");if(0===t.length)return[];var n,r=$t(n=t)||on(n)||Xt(n)||Jt(),i=r[0],a=r.slice(1),o=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===a.length)return o?[s,""]:[s];var u=JT(a.join("/")),c=[];return c.push.apply(c,sn(u.map((function(e){return""===e?s:[s,e].join("/")})))),o&&c.push.apply(c,sn(u)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ZT=/^:\w+$/,eI=3,tI=2,nI=1,rI=10,iI=-2,aI=function(e){return"*"===e};function oI(e,t){var n=e.split("/"),r=n.length;return n.some(aI)&&(r+=iI),t&&(r+=tI),n.filter((function(e){return!aI(e)})).reduce((function(e,t){return e+(ZT.test(t)?eI:""===t?nI:rI)}),r)}function sI(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=uI({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:pI([i,l.pathname]),pathnameBase:vI(pI([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=pI([i,l.pathnameBase]))}return a}function uI(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);WT("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=Zt(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Dy){return WT(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Dy+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function cI(e){try{return decodeURI(e)}catch(Dy){return WT(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Dy+")."),e}}function lI(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function hI(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function fI(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function dI(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=QT(e):(BT(!(i=VT({},e)).pathname||!i.pathname.includes("?"),hI("?","pathname","search",i)),BT(!i.pathname||!i.pathname.includes("#"),hI("#","pathname","hash",i)),BT(!i.search||!i.search.includes("#"),hI("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?QT(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:mI(a),hash:yI(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var pI=function(e){return e.join("/").replace(/\/\/+/g,"/")},vI=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},mI=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},yI=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},gI=function(e){nn(n,e);var t=an(n);function n(){return un(this,n),t.apply(this,arguments)}return ln(n)}(en(Error));function kI(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var _I=["post","put","patch","delete"],bI=(new Set(_I),["get"].concat(_I));new Set(bI),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function wI(){return wI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wI.apply(this,arguments)}var EI=l.createContext(null);var SI=l.createContext(null);var xI=l.createContext(null);var CI=l.createContext(null);var TI=l.createContext(null);var II=l.createContext({outlet:null,matches:[],isDataRoute:!1});var NI=l.createContext(null);function PI(){return null!=l.useContext(TI)}function RI(){return PI()||BT(!1),l.useContext(TI).location}function AI(e){l.useContext(CI).static||l.useLayoutEffect(e)}function OI(){return l.useContext(II).isDataRoute?function(){var e=HI(UI.UseNavigateStable).router,t=GI(VI.UseNavigateStable),n=l.useRef(!1);AI((function(){n.current=!0}));var r=l.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,wI({fromRouteId:t},i)))}),[e,t]);return r}():function(){PI()||BT(!1);var e=l.useContext(EI),t=l.useContext(CI),n=t.basename,r=t.navigator,i=l.useContext(II).matches,a=RI().pathname,o=JSON.stringify(fI(i).map((function(e){return e.pathnameBase}))),s=l.useRef(!1);return AI((function(){s.current=!0})),l.useCallback((function(t,i){if(void 0===i&&(i={}),s.current)if("number"!==typeof t){var u=dI(t,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==n&&(u.pathname="/"===u.pathname?n:pI([n,u.pathname])),(i.replace?r.replace:r.push)(u,i.state,i)}else r.go(t)}),[n,r,o,a,e])}()}var DI=l.createContext(null);function LI(){var e=l.useContext(II).matches,t=e[e.length-1];return t?t.params:{}}function MI(e,t){var n=(void 0===t?{}:t).relative,r=l.useContext(II).matches,i=RI().pathname,a=JSON.stringify(fI(r).map((function(e){return e.pathnameBase})));return l.useMemo((function(){return dI(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function FI(e,t,n){PI()||BT(!1);var r,i=l.useContext(CI).navigator,a=l.useContext(II).matches,o=a[a.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,RI());if(t){var h,f="string"===typeof t?QT(t):t;"/"===u||(null==(h=f.pathname)?void 0:h.startsWith(u))||BT(!1),r=f}else r=c;var d=r.pathname||"/",p=YT(e,{pathname:"/"===u?d:d.slice(u.length)||"/"});var v=WI(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:pI([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:pI([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,n);return t&&v?l.createElement(TI.Provider,{value:{location:wI({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:xT.Pop}},v):v}function jI(){var e=function(){var e,t=l.useContext(NI),n=KI(VI.UseRouteError),r=GI(VI.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=kI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:i},n):null,null)}var UI,VI,zI=l.createElement(jI,null),qI=function(e){nn(n,e);var t=an(n);function n(e){var r;return un(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return ln(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?l.createElement(II.Provider,{value:this.props.routeContext},l.createElement(NI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(l.Component);function BI(e){var t=e.routeContext,n=e.match,r=e.children,i=l.useContext(EI);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(II.Provider,{value:t},r)}function WI(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}var a=e,o=null==(r=n)?void 0:r.errors;if(null!=o){var s=a.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));s>=0||BT(!1),a=a.slice(0,Math.min(a.length,s+1))}return a.reduceRight((function(e,r,i){var s=r.route.id?null==o?void 0:o[r.route.id]:null,u=null;n&&(u=r.route.errorElement||zI);var c=t.concat(a.slice(0,i+1)),h=function(){var t;return t=s?u:r.route.Component?l.createElement(r.route.Component,null):r.route.element?r.route.element:e,l.createElement(BI,{match:r,routeContext:{outlet:e,matches:c,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?l.createElement(qI,{location:n.location,revalidation:n.revalidation,component:u,error:s,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}function HI(e){var t=l.useContext(EI);return t||BT(!1),t}function KI(e){var t=l.useContext(SI);return t||BT(!1),t}function GI(e){var t=function(e){var t=l.useContext(II);return t||BT(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||BT(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(UI||(UI={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(VI||(VI={}));var QI;h.startTransition;function $I(e){var t=e.to,n=e.replace,r=e.state,i=e.relative;PI()||BT(!1);var a=l.useContext(II).matches,o=RI().pathname,s=OI(),u=dI(t,fI(a).map((function(e){return e.pathnameBase})),o,"path"===i),c=JSON.stringify(u);return l.useEffect((function(){return s(JSON.parse(c),{replace:n,state:r,relative:i})}),[s,c,i,n,r]),null}function YI(e){return function(e){var t=l.useContext(II).outlet;return t?l.createElement(DI.Provider,{value:e},t):t}(e.context)}function XI(e){BT(!1)}function JI(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,s=void 0===o?xT.Pop:o,u=e.navigator,c=e.static,h=void 0!==c&&c;PI()&&BT(!1);var f=n.replace(/^\/*/,"/"),d=l.useMemo((function(){return{basename:f,navigator:u,static:h}}),[f,u,h]);"string"===typeof a&&(a=QT(a));var p=a,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,_=void 0===k?"":k,b=p.state,w=void 0===b?null:b,E=p.key,S=void 0===E?"default":E,x=l.useMemo((function(){var e=lI(m,f);return null==e?null:{location:{pathname:e,search:g,hash:_,state:w,key:S},navigationType:s}}),[f,m,g,_,w,S,s]);return null==x?null:l.createElement(CI.Provider,{value:d},l.createElement(TI.Provider,{children:i,value:x}))}function ZI(e){var t=e.children,n=e.location;return FI(tN(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(QI||(QI={}));var eN=new Promise((function(){}));l.Component;function tN(e,t){void 0===t&&(t=[]);var n=[];return l.Children.forEach(e,(function(e,r){if(l.isValidElement(e)){var i=[].concat(sn(t),[r]);if(e.type!==l.Fragment){e.type!==XI&&BT(!1),e.props.index&&e.props.children&&BT(!1);var a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=tN(e.props.children,i)),n.push(a)}else n.push.apply(n,tN(e.props.children,i))}})),n}function nN(){return nN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nN.apply(this,arguments)}function rN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var iN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var aN=h.startTransition;function oN(e){var t,n=e.basename,r=e.children,i=e.future,a=e.window,o=l.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),$T((function(e,t){var n=QT(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return KT("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:GT(t))}),(function(e,t){WT("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var s=o.current,u=Zt(l.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1],f=(i||{}).v7_startTransition,d=l.useCallback((function(e){f&&aN?aN((function(){return h(e)})):h(e)}),[h,f]);return l.useLayoutEffect((function(){return s.listen(d)}),[s,d]),l.createElement(JI,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:s})}var sN="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,uN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=l.forwardRef((function(e,t){var n,r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,h=e.preventScrollReset,f=rN(e,iN),d=l.useContext(CI).basename,p=!1;if("string"===typeof c&&uN.test(c)&&(n=c,sN))try{var v=new URL(window.location.href),m=c.startsWith("//")?new URL(v.protocol+c):new URL(c),y=lI(m.pathname,d);m.origin===v.origin&&null!=y?c=y+m.search+m.hash:p=!0}catch(_){}var g=function(e,t){var n=(void 0===t?{}:t).relative;PI()||BT(!1);var r=l.useContext(CI),i=r.basename,a=r.navigator,o=MI(e,{relative:n}),s=o.hash,u=o.pathname,c=o.search,h=u;return"/"!==i&&(h="/"===u?i:pI([i,u])),a.createHref({pathname:h,search:c,hash:s})}(c,{relative:i}),k=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,a=n.state,o=n.preventScrollReset,s=n.relative,u=OI(),c=RI(),h=MI(e,{relative:s});return l.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==i?i:GT(c)===GT(h);u(e,{replace:n,state:a,preventScrollReset:o,relative:s})}}),[c,u,h,i,a,r,e,o,s])}(c,{replace:o,state:s,target:u,preventScrollReset:h,relative:i});return l.createElement("a",nN({},f,{href:n||g,onClick:p||a?r:function(e){r&&r(e),e.defaultPrevented||k(e)},ref:t,target:u}))}));var lN,hN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(lN||(lN={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(hN||(hN={}));var fN=n(184),dN=function(){return(0,fN.jsx)("div",{className:"loader__wrapper",children:(0,fN.jsx)("div",{className:"spin-loader"})})},pN=function(){var e=N(),t=Zt((0,l.useState)(),2),n=t[0],r=t[1];return function(e,t,n,r){rr(e).onAuthStateChanged(t,n,r)}(TT,(function(t){t?(e(xt({email:t.email,token:t.accessToken,id:t.uid,name:t.displayName})),r(!0)):r(!1)})),void 0===n?(0,fN.jsx)(dN,{}):n?(0,fN.jsx)(YI,{}):n?void 0:(0,fN.jsx)($I,{to:"/login"})},vN=function(){return(0,fN.jsxs)("div",{children:[(0,fN.jsx)("h3",{className:"noreserv__title title",children:"Unfortunately, you don't have a reservation yet"}),(0,fN.jsx)(cN,{className:"noreserv__btn btn btn-filled",to:"/newreserv",children:"+ new reservation"})]})},mN=function(e){var t=e.reservs,n=N();return(0,fN.jsx)("div",{children:t.map((function(e){return(0,fN.jsxs)("div",{className:"main-reserv__card glass",children:[(0,fN.jsx)("h4",{className:"main-reserv__title",children:PT(e.date,".")}),(0,fN.jsxs)("p",{className:"main-reserv__text",children:["Time: ",e.time.from.hours,":",e.time.from.minutes," - ",e.time.to.hours,":",e.time.to.minutes]}),(0,fN.jsxs)("p",{className:"main-reserv__text",children:["Amount: ",e.amount," person",e.amount>1?"s":""]}),(0,fN.jsxs)("p",{className:"main-reserv__text",children:["Table: number ",e.table]}),e.editable?(0,fN.jsxs)("div",{className:"main-reserv__btns",children:[(0,fN.jsx)(cN,{className:"main-reserv__btn btn btn-outlined",to:"/newreserv/".concat(e.id),children:"EDIT"}),(0,fN.jsx)("button",{className:"main-reserv__btn btn btn-outlined",onClick:function(){!function(e){n(AT(e)),n(LT({id:e}))}(e.id)},children:"DELETE"})]}):""]},e.id)}))})},yN=function(){var e=N(),t=_((function(e){return e.myReserv}));return(0,l.useEffect)((function(){e(Ut()),e(RT())}),[]),(0,fN.jsxs)(fN.Fragment,{children:["loading"==t.status&&(0,fN.jsx)(dN,{}),(0,fN.jsxs)("div",{className:"main__wrapper",children:[(0,fN.jsx)("h2",{className:"main__title title",children:"My bookings"}),t.myReserv.currReserv.length>0?(0,fN.jsx)(mN,{reservs:t.myReserv.currReserv}):(0,fN.jsx)(vN,{})]})]})};function gN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}for(var kN,_N=["errorMessage","errors","label","onChange"],bN=function(e){var t=e.errorMessage,n=e.errors,r=e.label,i=e.onChange,a=gN(e,_N);return(0,fN.jsxs)("div",{className:"form__input",children:[(0,fN.jsx)("label",{htmlFor:"".concat(a.id),children:r}),(0,fN.jsx)("input",R({className:"form-input ".concat(n[a.id]?"invalid":""),onChange:i},a)),(0,fN.jsx)("span",{className:"form-error",style:{display:n[a.id]?"inline-block":"none"},children:t})]})},wN=function(e){var t=e.title,n=e.subtitle,r=e.btnText,i=e.question,a=e.path,o=e.linkText,s=e.handleForm,u=e.errors,h=Zt((0,l.useState)({name:"",email:"",password:""}),2),f=h[0],d=h[1],p=function(e){d(R(R({},f),{},c({},e.target.id,e.target.value)))},v=[{id:"email",type:"email",placeholder:"Email",errorMessage:"/login"==a?"Enter correct value":"User not found"},{id:"password",type:"password",placeholder:"Password",errorMessage:"/login"==a?"Password should be more than 6 characters":"Wrong password"}];return"/login"==a&&v.unshift({id:"name",type:"text",placeholder:"Name",errorMessage:"Enter correct value"}),(0,fN.jsx)("div",{className:"form__wrapper",children:(0,fN.jsxs)("form",{onSubmit:function(e){s(e,f.email,f.password,f.name)},className:"form__card glass",children:[(0,fN.jsx)("h3",{className:"form__title title",children:t}),(0,fN.jsx)("p",{className:"form__subtitle",children:n}),v.map((function(e){return(0,fN.jsx)(bN,R(R({label:""},e),{},{value:f[e.id],onChange:p,errors:u}),e.id)})),(0,fN.jsx)("button",{className:"form__btn btn btn-filled",children:r}),(0,fN.jsxs)("p",{className:"form__question",children:[i," ",(0,fN.jsx)(cN,{to:a,className:"form__link",children:o})]})]})})},EN=function(){var e=N(),t=OI(),n=Zt((0,l.useState)({email:!1,password:!1}),2),r=n[0],i=n[1];return(0,fN.jsx)(wN,{title:"Sign in",subtitle:"Please enter your login and password!",btnText:"Login",question:"Do not have an account?",path:"/register",linkText:"Register here",handleForm:function(n,r,a){n.preventDefault(),function(e,t,n){return yx(rr(e),JS.credential(t,n))}(TT,r,a).then((function(t){e(xt({email:t.user.email,token:t.user.accessToken,id:t.user.uid,name:t.user.displayName}))})).then((function(){t("/")})).catch((function(e){var t=e.code;"auth/user-not-found"==t?i({email:!0,password:!1}):"auth/wrong-password"==t&&i({email:!1,password:!0})}))},errors:r})},SN=function(e){var t={};return e.email&&/\S+@\S+\.\S+/.test(e.email)?t.email=!1:t.email=!0,e.name?t.name=!1:t.name=!0,e.password?e.password.length<6?t.password=!0:t.password=!1:t.password=!0,e.currPassword?t.currPassword=!1:t.currPassword=!0,t},xN=function(){var e=N(),t=OI(),n=Zt((0,l.useState)({}),2),r=n[0],i=n[1];return(0,fN.jsx)(wN,{title:"Sign up",subtitle:"Register from here to access",btnText:"Register",question:"Have already an account?",path:"/login",linkText:"Login here",handleForm:function(n,r,a,o){n.preventDefault();var s=SN({email:r,password:a,name:o});i(s),s.email||s.name||s.password||function(e,t,n){return bx.apply(this,arguments)}(TT,r,a).then((function(){Sx(TT.currentUser,{displayName:o}).then((function(){e(xt({email:TT.currentUser.email,token:TT.currentUser.accessToken,id:TT.currentUser.uid,name:TT.currentUser.displayName}))})).then((function(){t("/")}))}))},errors:r})},CN=function(e,t){(0,l.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t()},r=function(e){27===e.keyCode&&t()};return document.addEventListener("mousedown",n),document.addEventListener("keydown",r),function(){document.removeEventListener("mousedown",n),document.removeEventListener("keydown",r)}}),[e,t])},TN=function(){var e=Zt((0,l.useState)(!1),2),t=e[0],n=e[1],r=Zt((0,l.useState)(!1),2),i=r[0],a=r[1],o=(0,l.useRef)(null);CN(o,(function(){a(!1)}));var s=N(),u=_((function(e){return e.user.name})),c=[{text:"My Bookings",path:"/"},{text:"New Reservation",path:"/newreserv"},{text:"Archive",path:"/archive"}].map((function(e){return(0,fN.jsx)("li",{className:"list-item",onClick:function(){n(!1)},children:(0,fN.jsx)(cN,{to:e.path,children:e.text})},e.text)}));return(0,fN.jsxs)("div",{className:"nav__row",children:[(0,fN.jsx)("ul",{className:"menu__list menu__list-left ".concat(t?"menu__list-left--active":""),children:c}),(0,fN.jsxs)("button",{className:"burger ".concat(t?"burger--active":""),onClick:function(){n((function(e){return!e}))},children:[(0,fN.jsx)("div",{}),(0,fN.jsx)("div",{}),(0,fN.jsx)("div",{})]}),(0,fN.jsxs)("ul",{className:"menu__list menu__list-right",children:[(0,fN.jsx)("div",{className:"text-white",children:u}),(0,fN.jsxs)("div",{ref:o,className:"menu__dropdown list-item  ".concat(i?"menu__dropdown--active":""),onClick:function(){a((function(e){return!e}))},children:[(0,fN.jsx)("i",{className:"fa fa-user","aria-hidden":"true"}),(0,fN.jsx)("i",{className:" fa fa-chevron-down"}),(0,fN.jsx)("ul",{className:"menu__sublist sublist",children:(0,fN.jsxs)("div",{className:"sublist__wrapper",children:[(0,fN.jsx)("li",{className:"sublist-item",children:(0,fN.jsx)(cN,{to:"/edit-profile",children:"Edit profile"})}),(0,fN.jsx)("li",{className:"sublist-item",onClick:function(){!function(e){rr(e).signOut()}(TT),s(Ct())},children:(0,fN.jsx)(cN,{children:"Logout"})})]})})]})]})]})},IN=function(e){for(var t=e.page,n=["Date","Time","Table"],r=[],i=0;i<3;i++)r.push((0,fN.jsxs)("div",{className:"row__block ".concat(i==t?"row__block--active":""),children:[(0,fN.jsx)("p",{className:"circle reserv__number",children:i+1}),(0,fN.jsx)("p",{className:"reserv__text",children:n[i]})]},n[i]));return(0,fN.jsxs)("div",{className:"reserv__wrapper",children:[(0,fN.jsx)("h2",{className:"reserv__title title",children:"Select"}),(0,fN.jsx)("div",{className:"reserv__row",children:r})]})},NN=function(){var e,t=new Date,n=_((function(e){return e.reserv.date})),r=new Date(n.year,n.month-1,n.day),i=LI().id;e=i?r:t;var a=Zt((0,l.useState)(e),2),o=a[0],s=a[1],u=N();(0,l.useEffect)((function(){(n.month<1&&null!==n.month||n.month>12&&null!==n.month)&&(t=new Date(n.year,n.month-1,(new Date).getDate()),u(Ot({key:"year",value:t.getFullYear()})),u(Ot({key:"month",value:t.getMonth()+1})))}),[n.month]),(0,l.useEffect)((function(){i||u(At({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()}))}),[]);var c=[];return function(){for(var e=new Date(n.year,n.month-1,1).getDay(),t=new Date(n.year,n.month,0).getDate(),r=new Date(n.year,n.month-1,t).getDay(),i=new Date(n.year,n.month-1,0).getDate(),a=e;a>0;a--)c.push((0,fN.jsx)("li",{className:"date-inactive",children:i-a+1},"last".concat(a)));for(var l=function(e){var t=new Date(n.year,n.month-1,e);c.push((0,fN.jsx)("li",{className:o.toString().slice(0,16)==t.toString().slice(0,16)?"date-active":"",onClick:function(){!function(e,t){u(Ot({key:"day",value:t})),s(e)}(t,e)},children:e},"curr".concat(e)))},h=1;h<=t;h++)l(h);for(var f=r;f<6;f++)c.push((0,fN.jsx)("li",{className:"date-inactive",children:f-r+1},"next".concat(f)))}(),(0,fN.jsxs)("div",{className:"calendar__card glass",children:[(0,fN.jsxs)("div",{className:"calendar__title",children:[(0,fN.jsxs)("p",{className:"calendar__curr-date",children:[["","January","February","March","April","May","June","July","August","September","October","November","December"][n.month]," ",n.year]}),(0,fN.jsxs)("div",{className:"calendar__icons",children:[(0,fN.jsx)("i",{id:"prev",className:"fa-solid fa-chevron-left",onClick:function(){u(Ot({key:"month",value:n.month-1}))}}),(0,fN.jsx)("i",{id:"next",className:"fa-solid fa-chevron-right",onClick:function(){u(Ot({key:"month",value:n.month+1}))}})]})]}),(0,fN.jsxs)("div",{className:"calendar",children:[(0,fN.jsxs)("ul",{className:"weeks",children:[(0,fN.jsx)("li",{children:"Sun"}),(0,fN.jsx)("li",{children:"Mon"}),(0,fN.jsx)("li",{children:"Tue"}),(0,fN.jsx)("li",{children:"Wed"}),(0,fN.jsx)("li",{children:"Thu"}),(0,fN.jsx)("li",{children:"Fri"}),(0,fN.jsx)("li",{children:"Sat"})]}),(0,fN.jsx)("ul",{className:"days",children:c})]})]})},PN=function(e){for(var t=e.invalid,n=Zt((0,l.useState)(null),2),r=n[0],i=n[1],a=_((function(e){return e.reserv.time})),o=N(),s=[],u=[],c=[],h=[],f=function(){i(null)},d=function(e,t,n){o(Lt({range:n,key:e,value:t})),f()},p=function(e){s.push((0,fN.jsx)("div",{className:"sublist__number",onClick:function(){d("hours",e,"from")},children:e},e))},v=12;v<24;v++)p(v);for(var m=function(){var e=y<10?"0".concat(y):y;u.push((0,fN.jsx)("div",{className:"sublist__number",onClick:function(){d("minutes",e,"from")},children:e},y))},y=0;y<60;y++)m();for(var g=function(e){c.push((0,fN.jsx)("div",{className:"sublist__number",onClick:function(){d("hours",e,"to")},children:e},e))},k=12;k<24;k++)g(k);for(var b=function(){var e=w<10?"0".concat(w):w;h.push((0,fN.jsx)("div",{className:"sublist__number",onClick:function(){d("minutes",e,"to")},children:e},w))},w=0;w<60;w++)b();for(var E=[],S=(0,l.useRef)(),x=function(e){var n=e%2==0,o=t.includes(e);E.push((0,fN.jsxs)("div",{className:"time__dropdown",children:[(0,fN.jsx)("input",{type:"text",className:"time__input ".concat(o?"time-invalid":""),placeholder:n?"MM":"HH",value:e<3?a.from[n?"minutes":"hours"]:a.to[n?"minutes":"hours"],readOnly:!0,id:e,onClick:function(){i(e)}}),(0,fN.jsx)("div",{className:"sublist time__sublist ".concat(e==r?"time__sublist--active":""),children:(0,fN.jsx)("div",{className:"sublist__number-wrapper",children:e<3?n?u:s:n?h:c})})]}))},C=1;C<5;C++)x(C);return CN(S,f),(0,fN.jsxs)("div",{className:"time",children:[(0,fN.jsx)("h3",{className:"time__title",children:"Time available for selection from 12:00 to 23:59"}),(0,fN.jsxs)("div",{className:"time__inner",ref:S,children:[(0,fN.jsxs)("div",{className:"time__wrapper",children:[(0,fN.jsx)("p",{className:"time__text",children:"From"}),(0,fN.jsxs)("div",{className:"time__block",children:[E[0],(0,fN.jsx)("p",{className:"time__separator",children:":"}),E[1]]})]}),(0,fN.jsxs)("div",{className:"time__wrapper",children:[(0,fN.jsx)("p",{className:"time__text",children:"To"}),(0,fN.jsxs)("div",{className:"time__block",children:[E[2],(0,fN.jsx)("p",{className:"time__separator",children:":"}),E[3]]})]})]})]})},RN=256,AN=[];RN--;)AN[RN]=(RN+256).toString(16).substring(1);function ON(e){var t=0,n=e||11;if(!kN||RN+n>512)for(kN="",RN=0;t<256;t++)kN+=AN[256*Math.random()|0];return kN.substring(RN,RN+++n)}var DN="#d0a149",LN="rgba(255,255,255,.3)",MN=function(e){var t=e.number,n=e.seats,r=e.closeModal,i=LI().id,a=OI(),o=Zt((0,l.useState)(!1),2),s=o[0],u=o[1],c=Zt((0,l.useState)(!1),2),h=c[0],f=c[1],d=Zt((0,l.useState)(!1),2),p=d[0],v=d[1],m=_((function(e){return e.reserv})),y=_((function(e){return e.reserv.time.from})),g=_((function(e){return e.reserv.amount})),k=_((function(e){return e.dataRef.dataRef})),b=N();(0,l.useEffect)((function(){b(Ft({amount:n})),b(jt({comment:null}))}),[]);var w=(0,l.useRef)();CN(w,r);for(var E=function(){f(!0),setTimeout((function(){f(!1)}),3e3)},S=[],x=function(e){var t=e<=g?["fa-solid",DN,"auto"]:["fa-regular",LN,"none"];S.push((0,fN.jsxs)("div",{className:"amount__icon",onClick:e<=n?function(){b(Ft({amount:e}))}:E,children:[(0,fN.jsx)("i",{className:"fa-user ".concat(t[0]),style:{color:t[1]}}),(0,fN.jsx)("p",{className:"amount__number",style:{color:t[1]},children:10==e?"10+":e})]},e))},C=1;C<11;C++)x(C);var T=function(){var e=Bt(zt().mark((function e(t){var n,r,o,u;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v(!0),n="".concat(m.time.from.hours,":").concat(m.time.from.minutes),r="".concat(m.time.to.hours,":").concat(m.time.to.minutes),o=ON(),!i){e.next=12;break}return e.next=8,dy(Em(IT,"".concat(TT.currentUser.uid),"".concat(i)),R({},m));case 8:return e.next=10,Fw(Lw(NT,k));case 10:e.next=14;break;case 12:return e.next=14,fy(Em(IT,"".concat(TT.currentUser.uid),"".concat(o)),R({id:o},m));case 14:return u=PT(m.date,"-"),e.next=17,jw(Lw(NT,"tables/"+m.table+"/reservations/"+u+"/"+n+"-"+r),{userName:TT.currentUser.displayName,email:TT.currentUser.email,amount:g,comment:s});case 17:v(!1),a("/");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,fN.jsx)("div",{className:"modal__wrapper",children:(0,fN.jsxs)("form",{className:"modal__card glass",ref:w,onSubmit:function(e){T(e)},children:[(0,fN.jsxs)("h2",{className:"modal__title",children:["Table ",t]}),(0,fN.jsx)("button",{className:"close-btn",onClick:function(){r(!1)}}),(0,fN.jsxs)("div",{className:"modal__info",children:[(0,fN.jsxs)("div",{className:"modal__block",children:[(0,fN.jsx)("p",{className:"modal__block-text",children:"Date"}),(0,fN.jsxs)("p",{className:"modal__block-value",children:[PT(m.date,"."),(0,fN.jsx)("span",{className:"fa fa-calendar","aria-hidden":"true"})]})]}),(0,fN.jsxs)("div",{className:"modal__block",children:[(0,fN.jsx)("p",{className:"modal__block-text",children:"Time"}),(0,fN.jsxs)("p",{className:"modal__block-value",children:["".concat(y.hours,":").concat(y.minutes)," ",(0,fN.jsx)("span",{className:"fa-solid fa-clock"})]})]})]}),(0,fN.jsxs)("div",{className:"amount",children:[(0,fN.jsx)("p",{className:"amount__text",children:"Select the number of persons"}),(0,fN.jsx)("div",{className:"amount__icon-wrapper",children:S}),(0,fN.jsx)("p",{className:"amount__warning",style:{opacity:h?"1":"0"},children:"Number more than available seats"})]}),(0,fN.jsx)("button",{type:"button",className:"modal__comment",onClick:function(){u((function(e){return!e}))},children:"+ add comment"}),s?(0,fN.jsx)("textarea",{rows:"3",className:"modal__text",onChange:function(e){b(jt({comment:e.target.value}))}}):"",(0,fN.jsx)("button",{className:"modal__btn btn btn-filled",disabled:p,children:p?"Loading":"Make reservation"})]})})},FN=function(){var e=Zt((0,l.useState)(!1),2),t=e[0],n=e[1],r=Zt((0,l.useState)(""),2),i=r[0],a=r[1],o=Zt((0,l.useState)(!0),2),s=o[0],u=o[1],c=Zt((0,l.useState)(null),2),h=c[0],f=c[1],d=N(),p=_((function(e){return e.reserv.date})),v=_((function(e){return e.reserv.time})),m={start:"".concat(v.from.hours,":").concat(v.from.minutes),end:"".concat(v.to.hours,":").concat(v.to.minutes)},y=Zt((0,l.useState)([]),2),g=y[0],k=y[1];(0,l.useEffect)((function(){qw(Lw(NT,"tables"),(function(e){u(!1);var t=e.val();null!==t&&k(t)}))}),[]);var b=g.map((function(e){var r,i=[];if(e.reservations){var o=PT(p,"-");if(e.reservations[o])Object.keys(e.reservations[o]).forEach((function(e){var t=e.split("-"),n={start:t[0],end:t[1]};i.push(n)}))}if(i!==[]){r=function(e){for(var t=0;t<i.length;t++){var n=i[t],r=new Date("2023-01-01 ".concat(n.start)),a=new Date("2023-01-01 ".concat(n.end)),o=new Date("2023-01-01 ".concat(e.start)),s=new Date("2023-01-01 ".concat(e.end));if(o>=r&&o<a||s>r&&s<=a||o<=r&&s>=a)return!1}return!0}(m)}else r=!0;var s=e.seats/2,u=2,c="30vh",l="60%",v="0 5%";e.seats<4&&(c="20vh"),e.seats>4&&(s=e.seats/2+1,c="80%",v="0"),e.seats>=8&&(s=2,u=e.seats/2+1,v="5% 0",c="60%",l="85%");for(var y=[],g=0;g<e.seats;g++){var k=(0,fN.jsx)("div",{className:"seat"},g);e.seats>4&&e.seats<7&&(g==e.seats-1&&(k=(0,fN.jsx)("div",{className:"seat",style:{gridColumn:"".concat(s," / -1"),gridRow:"1 / -1"}},g)),g==e.seats-2&&(k=(0,fN.jsx)("div",{className:"seat",style:{gridColumn:"1 / 2",gridRow:"1 / -1"}},g))),e.seats>7&&(g==e.seats-1&&(k=(0,fN.jsx)("div",{className:"seat",style:{gridColumn:"1 / -1",gridRow:"1 / 2"}},g)),g==e.seats-2&&(k=(0,fN.jsx)("div",{className:"seat",style:{gridColumn:"1 / -1",gridRow:"".concat(u," / -1")}},g))),y.push(k)}var _="".concat(e.number);return(0,fN.jsxs)("div",{className:"table ".concat(r?"table-available":""),style:{margin:"".concat(v)},onClick:function(){r?function(e,r){d(Mt({table:e})),n(!t),a({number:e,seats:r,closeModal:n})}(e.number,e.seats):function(e){f(e),setTimeout((function(){f(null)}),3e3)}(e.number)},children:[(0,fN.jsx)("div",{className:"text-not-avail ".concat(e.number==h?"text-not-avail--active":""),children:"This table isn't available for select"}),(0,fN.jsx)("div",{className:" seats__wrapper",style:{gridTemplateColumns:"repeat(".concat(s,", minmax(5vh, 10vh)"),gridTemplateRows:"repeat(".concat(u,", minmax(5vh, 10vh)"),"--before-content":'"'.concat(_,'"'),"--width":"".concat(c),"--height":"".concat(l)},children:y})]},"table".concat(e.number))}));return(0,fN.jsxs)(fN.Fragment,{children:[s&&(0,fN.jsx)(dN,{}),(0,fN.jsxs)("div",{className:"tables",children:[(0,fN.jsx)("div",{className:"tables__wrapper",children:g!==[]?b:""}),t?(0,fN.jsx)(MN,{number:i.number,seats:i.seats,closeModal:i.closeModal}):""]})]})},jN=function(){var e=LI().id,t=Zt((0,l.useState)(e),2),n=t[0],r=t[1],i=_((function(e){return e.reserv.time})),a=[i.from.hours,i.from.minutes,i.to.hours,i.to.minutes],o=Zt((0,l.useState)([]),2),s=o[0],u=o[1],c=N(),h=function(){var t=Bt(zt().mark((function t(){var n,i,a,o;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cy(Em(IT,"".concat(TT.currentUser.uid),"".concat(e)));case 2:(n=t.sent).exists()&&(i=n.data().date,a=n.data().time,c(At(i)),c(Dt(a)),o="tables/"+n.data().table+"/reservations/"+PT(i,"-")+"/"+"".concat(a.from.hours,":").concat(a.from.minutes)+"-"+"".concat(a.to.hours,":").concat(a.to.minutes),c(jT({dataRef:o})),r(!1));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){e&&h()}),[]);var f=Zt((0,l.useState)(0),2),d=f[0],p=f[1],v=[(0,fN.jsx)(NN,{}),(0,fN.jsx)(PN,{invalid:s}),(0,fN.jsx)(FN,{})],m=OI();return n?(0,fN.jsx)(dN,{}):(0,fN.jsxs)("div",{children:[(0,fN.jsx)(IN,{page:d}),-1==d?m("/"):v[d],2==d?"":(0,fN.jsxs)("div",{className:"new-reserv__btns",children:[(0,fN.jsx)("button",{className:"new-reserv__btn btn btn-outlined",onClick:function(){p(d-1)},children:"Prev"}),(0,fN.jsx)("button",{className:"new-reserv__btn btn btn-outlined",onClick:function(){if(1==d){var e=[];a.forEach((function(t,n){t||e.push(n+1)})),u(e),0==e.length&&p(d+1)}else 1!==d&&p(d+1)},children:"Next"})]})]})},UN=function(){var e=_((function(e){return e.user})),t=OI(),n=N(),r=Zt((0,l.useState)({name:e.name,email:e.email,currPassword:"",password:""}),2),i=r[0],a=r[1],o=function(e){a(R(R({},i),{},c({},e.target.id,e.target.value)))},s=Zt((0,l.useState)({name:!1,email:!1,password:!1,currPassword:!1}),2),u=s[0],h=s[1],f=Zt((0,l.useState)(!1),2),d=f[0],p=f[1];return(0,fN.jsx)("form",{className:"edit__wrapper",onSubmit:function(r){!function(r){r.preventDefault();var a=SN({email:i.email,password:i.password,name:i.name,currPassword:i.currPassword});if(i.name!==e.name&&(h(R(R({},a),{},{email:!1,password:!1,currPassword:!1})),a.name||(p(!0),Sx(TT.currentUser,{displayName:i.name}).then((function(){var e=i.name;n(Tt({name:e}))})).then((function(){p(!1)})))),i.email!==e.email||i.password){var o=i.email;if(i.currPassword){var s=JS.credential(e.email,i.currPassword);kx(TT.currentUser,s).then((function(){i.password&&o!==e.email?(h(a),a.password||a.email||(p(!0),Cx(TT.currentUser,o).then((function(){n(It({email:o})),Tx(TT.currentUser,i.password).then((function(){p(!1),t("/")}))})))):o!==e.email?(h(R(R({},a),{},{password:!1})),a.email||(p(!0),Cx(TT.currentUser,o).then((function(){n(It({email:o})),p(!1),t("/")})))):i.password&&(h(a),a.password||(p(!0),Tx(TT.currentUser,i.password).then((function(){p(!1),t("/")}))))})).catch((function(e){"auth/wrong-password"==e.code&&h(R(R({},a),{},{currPassword:!0,password:!1}))}))}else i.password?h(a):h(R(R({},a),{},{password:!1}))}}(r)},children:(0,fN.jsxs)("div",{className:"edit__card glass",children:[(0,fN.jsx)("h3",{className:"edit__title title",children:"Profile info"}),[{id:"name",type:"text",placeholder:"Name",errorMessage:"Enter correct value",label:"Name"},{id:"email",type:"email",placeholder:"Email",errorMessage:"Enter correct value",label:"Email"},{id:"currPassword",type:"password",placeholder:"Current password",errorMessage:"If you want to save change, please enter your correct current password",label:"Enter your current password"},{id:"password",type:"password",placeholder:"New password",errorMessage:"Password should be more than 6 characters",label:"Set new password"}].map((function(e){return(0,fN.jsx)(bN,R(R({},e),{},{value:i[e.id],onChange:o,errors:u}),e.id)})),(0,fN.jsxs)("div",{className:"edit__btns",children:[(0,fN.jsx)(cN,{className:"edit__btn btn-cancel",to:"/",children:"Cancel"}),(0,fN.jsx)("button",{className:"edit__btn btn btn-filled",disabled:d,children:d?"LOADING":"SAVE"})]})]})})},VN=function(){var e=N(),t=_((function(e){return e.myReserv}));return(0,l.useEffect)((function(){e(RT())}),[]),(0,fN.jsxs)(fN.Fragment,{children:["loading"==t.status&&(0,fN.jsx)(dN,{}),(0,fN.jsxs)("div",{className:"archive__wrapper",children:[(0,fN.jsx)("h2",{className:"archive__title title",children:"Archive bookings"}),t.myReserv.archive.length<1?"":(0,fN.jsx)(mN,{reservs:t.myReserv.archive})]})]})},zN=function(){function e(){return(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(TN,{}),(0,fN.jsx)(YI,{})]})}return(0,fN.jsx)("div",{className:"container",children:(0,fN.jsx)(oN,{children:(0,fN.jsxs)(ZI,{children:[(0,fN.jsx)(XI,{path:"/login",element:(0,fN.jsx)(EN,{})}),(0,fN.jsx)(XI,{path:"/register",element:(0,fN.jsx)(xN,{})}),(0,fN.jsx)(XI,{element:(0,fN.jsx)(pN,{}),children:(0,fN.jsxs)(XI,{path:"/",element:(0,fN.jsx)(e,{}),children:[(0,fN.jsx)(XI,{path:"/",element:(0,fN.jsx)(yN,{})}),(0,fN.jsx)(XI,{path:"/newreserv",element:(0,fN.jsx)(jN,{})}),(0,fN.jsx)(XI,{path:"/newreserv/:id",element:(0,fN.jsx)(jN,{})}),(0,fN.jsx)(XI,{path:"/edit-profile",element:(0,fN.jsx)(UN,{})}),(0,fN.jsx)(XI,{path:"/archive",element:(0,fN.jsx)(VN,{})})]})})]})})})};e.createRoot(document.getElementById("root")).render((0,fN.jsx)(S,{store:UT,children:(0,fN.jsx)(zN,{})}))}()}();
//# sourceMappingURL=main.b0ec1416.js.map